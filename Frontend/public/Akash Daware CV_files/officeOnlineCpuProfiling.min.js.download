var officeOnlineCpuProfiling;!function(){"use strict";var e={d:function(r,t){for(var s in t)e.o(t,s)&&!e.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:t[s]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{getJSCPUProfilingPackageRetriever:function(){return Pt}});class t{start(){this.logger.logNullJSCPUProfilerStartCalled()}stop(){this.logger.logNullJSCPUProfilerStopCalled()}subscribeProfilerObserver(e,r){}unsubscribeProfilerObserver(e,r){}subscribeCallTreeCustomPropertiesRetriever(e){}unsubscribeCallTreeCustomPropertiesRetriever(e){}subscribeCallTreeCustomFilterer(e){}unsubscribeCallTreeCustomFilterer(e){}constructor(e){this.logger=e}}class s{getCurrentTimestamp(){return performance.now()}}const o=-1;class i{start(){this.unsupportedEnvironment?this.logger.logStopWatchStartingInUnsupportedEnvironment():this.startTimestamp=this.performanceTimestampRetriever.getCurrentTimestamp()}stop(){this.unsupportedEnvironment?this.logger.logStopWatchStoppingInUnsupportedEnvironment():this.stopTimestamp=this.performanceTimestampRetriever.getCurrentTimestamp()}getElapsedTime(){if(this.startTimestamp===o)return this.logger.logGetElapsedTimeCalledWithoutCallingStart(),o;if(this.stopTimestamp===o)return this.logger.logGetElapsedTimeCalledWithoutCallingStop(),o;const e=this.stopTimestamp-this.startTimestamp;return this.resetTimestamps(),e}resetTimestamps(){this.startTimestamp=o,this.stopTimestamp=o}constructor(e,r,t){return this.performanceAPIChecker=e,this.performanceTimestampRetriever=r,this.logger=t,this.startTimestamp=o,this.stopTimestamp=o,this.performanceAPIChecker.isPerformanceAPIAvailable()?this.performanceAPIChecker.isPerformanceNowDefined()?void(this.unsupportedEnvironment=!1):(this.logger.logPerformanceNowMissingInJSEnvironment(),void(this.unsupportedEnvironment=!0)):(this.logger.logPerformanceMissingInJSEnvironment(),void(this.unsupportedEnvironment=!0))}}class a{sendTraceTag(){}shipAssertTag(){}debugAssertTag(){}setCorrelationId(){}}const l=new class{setCorrelationId(e){this.externalLogger.setCorrelationId(e)}setLogger(e){this.externalLogger=e}sendTraceTag(e,r,t,s){this.externalLogger.sendTraceTag(e,r,t,s)}debugAssertTag(e,r,t,s){this.externalLogger.debugAssertTag(e,r,t,s)}shipAssertTag(e,r,t,s){this.externalLogger.shipAssertTag(e,r,t,s)}constructor(){this.externalLogger=new a}};function n(e){if(!e)throw new Error("The 'logger' argument is missing");l.setLogger(e)}var d,c;!function(e){e[e.msoulscat_ES_EWAJS=0]="msoulscat_ES_EWAJS",e[e.msoulscat_ES_EWAJSGrid=1]="msoulscat_ES_EWAJSGrid",e[e.msoulscat_ES_EWAJSChart=6]="msoulscat_ES_EWAJSChart",e[e.msoulscat_MSOSP_FileMenuCommands=202]="msoulscat_MSOSP_FileMenuCommands",e[e.msoulscat_MSOSP_AddInCommands=220]="msoulscat_MSOSP_AddInCommands",e[e.msoulscat_MSOSP_OTelJS=225]="msoulscat_MSOSP_OTelJS",e[e.msoulscat_MSOSP_OTelJSInWebWoker=227]="msoulscat_MSOSP_OTelJSInWebWoker",e[e.msoulscat_MSOSP_OTelJSWebWorkerPrototype=228]="msoulscat_MSOSP_OTelJSWebWorkerPrototype",e[e.msoulscat_Wac_WordViewer=301]="msoulscat_Wac_WordViewer",e[e.msoulscat_Wac_BrowserGeneral=306]="msoulscat_Wac_BrowserGeneral",e[e.msoulscat_Wac_TaskPane=320]="msoulscat_Wac_TaskPane",e[e.msoulscat_Wac_OneNoteGeneral=339]="msoulscat_Wac_OneNoteGeneral",e[e.msoulscat_Wac_Ribbon=340]="msoulscat_Wac_Ribbon",e[e.msoulscat_Wac_WacFeedback=356]="msoulscat_Wac_WacFeedback",e[e.msoulscat_Wac_WopiPendingApplication=379]="msoulscat_Wac_WopiPendingApplication",e[e.msoulscat_Wac_Telemetry=383]="msoulscat_Wac_Telemetry",e[e.msoulscat_Wac_WacCatchUpActivities=391]="msoulscat_Wac_WacCatchUpActivities",e[e.msoulscat_Wac_Dictation=394]="msoulscat_Wac_Dictation",e[e.msoulscat_Wac_OneNoteSync=395]="msoulscat_Wac_OneNoteSync",e[e.msoulscat_Wac_VisioApp=700]="msoulscat_Wac_VisioApp",e[e.msoulscat_OneNoteOnline_EditableCache=1601]="msoulscat_OneNoteOnline_EditableCache",e[e.msoulscat_Wac_PptAnimation=800]="msoulscat_Wac_PptAnimation",e[e.msoulscat_Wac_PptLive=833]="msoulscat_Wac_PptLive",e[e.msoulscat_Wac_PptMWeb=834]="msoulscat_Wac_PptMWeb",e[e.msoulscat_Wac_PptGc2General=835]="msoulscat_Wac_PptGc2General",e[e.msoulscat_Wac_PptGc2GraphicHost=836]="msoulscat_Wac_PptGc2GraphicHost",e[e.msoulscat_Wac_PptGc2Operation=837]="msoulscat_Wac_PptGc2Operation",e[e.msoulscat_Wac_PptGc2EditCanvas=852]="msoulscat_Wac_PptGc2EditCanvas",e[e.msoulscat_Wac_PptDataSync=844]="msoulscat_Wac_PptDataSync",e[e.msoulscat_Wac_PptFluidRuntime=848]="msoulscat_Wac_PptFluidRuntime",e[e.msoulscat_Wac_PptShape=815]="msoulscat_Wac_PptShape",e[e.msoulscat_Wac_PptSession=817]="msoulscat_Wac_PptSession",e[e.msoulscat_Wac_PptSlideshow=830]="msoulscat_Wac_PptSlideshow",e[e.msoulscat_Wac_PptView=822]="msoulscat_Wac_PptView",e[e.msoulscat_Wac_PptVideos=846]="msoulscat_Wac_PptVideos",e[e.msoulscat_Uci_Insights=1303]="msoulscat_Uci_Insights",e[e.msoulscat_Wac_VersionHistory=2300]="msoulscat_Wac_VersionHistory",e[e.msoulscat_Wac_WordPresence=302]="msoulscat_Wac_WordPresence",e[e.msoulscat_Wac_OAuth=3e3]="msoulscat_Wac_OAuth",e[e.msoulscat_Wac_WordVersionHistory=3005]="msoulscat_Wac_WordVersionHistory",e[e.msoulscat_Wac_LivePersonaCard=3006]="msoulscat_Wac_LivePersonaCard",e[e.msoulscat_Wac_CatchUpFlyout=3012]="msoulscat_Wac_CatchUpFlyout",e[e.msoulscat_Wac_WordDesigner=3016]="msoulscat_Wac_WordDesigner",e[e.msoulscat_Wac_ModernFontPicker=3021]="msoulscat_Wac_ModernFontPicker",e[e.msoulscat_Wac_UnifiedUiHost=3027]="msoulscat_Wac_UnifiedUiHost",e[e.msoulscat_Wac_EquationTools=3033]="msoulscat_Wac_EquationTools",e[e.msoulscat_Osf_Latency=1401]="msoulscat_Osf_Latency",e[e.msoulscat_Osf_Notification=1402]="msoulscat_Osf_Notification",e[e.msoulscat_Osf_Runtime=1403]="msoulscat_Osf_Runtime",e[e.msoulscat_Wac_AiMaker=3041]="msoulscat_Wac_AiMaker",e[e.msoulscat_Wac_AiRewrite=3043]="msoulscat_Wac_AiRewrite",e[e.msoulscat_Wac_AiInsert=3044]="msoulscat_Wac_AiInsert",e[e.msoulscat_Wac_AiSummarize=3047]="msoulscat_Wac_AiSummarize",e[e.msoulscat_Wac_CopilotCompose=3048]="msoulscat_Wac_CopilotCompose",e[e.msoulscat_Wac_Skittles=3049]="msoulscat_Wac_Skittles",e[e.msoulscat_Wac_CopilotChat=3050]="msoulscat_Wac_CopilotChat",e[e.msoulscat_Wac_Syntex=3051]="msoulscat_Wac_Syntex",e[e.msoulscat_Wac_WireGraph=3052]="msoulscat_Wac_WireGraph",e[e.msoulscat_Wac_CshCopilot=3053]="msoulscat_Wac_CshCopilot",e[e.msoulscat_Wac_CopilotComposeLaunchpad=3054]="msoulscat_Wac_CopilotComposeLaunchpad",e[e.msoulscat_Wac_CopilotProactiveSummary=3055]="msoulscat_Wac_CopilotProactiveSummary",e[e.msoulscat_Wac_CopilotProactiveShared=3056]="msoulscat_Wac_CopilotProactiveShared",e[e.msoulscat_Wac_CopilotCursor=3057]="msoulscat_Wac_CopilotCursor"}(d||(d={})),function(e){e[e.Error=10]="Error",e[e.Warning=15]="Warning",e[e.Important=20]="Important",e[e.Info=50]="Info",e[e.Verbose=100]="Verbose",e[e.Spam=200]="Spam"}(c||(c={}));class g{logPerformanceMissingInJSEnvironment(){l.sendTraceTag(579110677,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find performance in the JS environment")}logPerformanceNowMissingInJSEnvironment(){l.sendTraceTag(579110678,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find performance.now in the JS environment")}logStopWatchStartingInUnsupportedEnvironment(){l.sendTraceTag(579110679,d.msoulscat_Wac_Telemetry,c.Error,"Starting the stopwatch in an unsupported environment. Incorrect data will be stored")}logStopWatchStoppingInUnsupportedEnvironment(){l.sendTraceTag(579110680,d.msoulscat_Wac_Telemetry,c.Error,"Stopping the stopwatch in an unsupported environment. Incorrect data will be stored")}logGetElapsedTimeCalledWithoutCallingStart(){l.sendTraceTag(579110683,d.msoulscat_Wac_Telemetry,c.Error,"Stopwatch needs to be started before you can get elapsed time")}logGetElapsedTimeCalledWithoutCallingStop(){l.sendTraceTag(579110684,d.msoulscat_Wac_Telemetry,c.Error,"Stopwatch needs to be stopped before you can get elapsed time")}}class u{isPerformanceAPIAvailable(){return null!=performance}isPerformanceNowDefined(){return"now"in performance}}class m{static createNewStopWatch(){const e=new g,r=new u,t=new s;return new i(r,t,e)}}class p{serializeException(e){this.wasSerializeExceptionCalled=!0,null!=JSON&&"stringify"in JSON?this.serializedException=null!=Object&&"getOwnPropertyNames"in Object?JSON.stringify(e,Object.getOwnPropertyNames(e)):"":this.serializedException=""}retrieveSerializedException(){return this.wasSerializeExceptionCalled?(this.wasSerializeExceptionCalled=!1,this.serializedException):""}constructor(){this.serializedException="",this.wasSerializeExceptionCalled=!1}}class h{logOperation(e,r,t,s,o,i,a,l){}logFallbackResultReturned(){}}const T=new class{push(e){this.elements.unshift(e)}pop(){return this.elements.shift()}peek(){return this.elements.length>0?this.elements[0]:void 0}constructor(){this.elements=[]}};class f{addLog(e){this.logs.push(e)}addProperty(e,r){this.propertyBag.set(e,r)}getResult(){return this.operationResult.result}static startNew(e,r,t,s,o,i){return new f(e,r,t,null!=o&&o,null==i?new p:i,null==s?new h:s)}constructor(e,r,t,s,o,i){const a=T.peek(),l=void 0!==a?a:"";T.push(e),this.logs=[],this.propertyBag=new Map;const n=m.createNewStopWatch();let d;n.start();let c=!1;try{d=r(this),c=d.didOperationFailUnexpectedly}catch(e){o.serializeException(e),this.exception=o.retrieveSerializedException(),c=!0}this.operationResult=void 0!==d?d:t,n.stop(),!c&&s||i.logOperation(e,l,this.operationResult.didOperationSucceed,n.getElapsedTime(),c,this.logs,this.propertyBag,this.exception),T.pop()}}class P{static generateOperationResult(e){return new P(e.didOperationSucceed,null!=e.didOperationFailUnexpectedly&&e.didOperationFailUnexpectedly,e.result)}constructor(e,r,t){this.didOperationSucceed=e,this.didOperationFailUnexpectedly=r,this.result=t}}class S{hasProperty(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckWindowProperty",(r=>{if(null==window)return this.logger.logWindowMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});r.addProperty("PropertyNameChecked",e);const t=e in window;return r.addProperty("DoesPropertyExistOnWindow",t),P.generateOperationResult({didOperationSucceed:!0,result:t})}),r).getResult()}constructor(e){this.logger=e}}class C{logWindowMissingInJSEnvironment(){l.sendTraceTag(578834847,d.msoulscat_Wac_Telemetry,c.Warning,"Unable to find window in the JS environment")}logEmptyUserAgentString(){l.sendTraceTag(578834850,d.msoulscat_Wac_Telemetry,c.Error,"Empty user agent string")}logChromiumOnIOS(){l.sendTraceTag(578834851,d.msoulscat_Wac_Telemetry,c.Info,"iOS version of Chromium based browser detected")}logBrowserUserAgentNotChromiumBased(){l.sendTraceTag(578834880,d.msoulscat_Wac_Telemetry,c.Info,"Browser not chromium based")}logUserAgentSpoofedToBeChromium(){l.sendTraceTag(578834881,d.msoulscat_Wac_Telemetry,c.Info,"Browser user agent spoofed to be chromium based")}logUserAgentToParseChromiumMajorVersionNumber(e){l.sendTraceTag(578834882,d.msoulscat_Wac_Telemetry,c.Info,e)}logChromeNotPresentInUserAgent(){l.sendTraceTag(578834883,d.msoulscat_Wac_Telemetry,c.Error,"Chrome was not found in the user agent")}logUnableToIsolateChromeInformationFromUserAgent(){l.sendTraceTag(578834884,d.msoulscat_Wac_Telemetry,c.Error,"Unable to isolate chrome information from the user agent")}logUnableToExtractChromeVersionInformation(){l.sendTraceTag(578834885,d.msoulscat_Wac_Telemetry,c.Error,"Unable to extract chrome version information from the user agent")}logUnableToParseChromeMajorVersionString(){l.sendTraceTag(578834886,d.msoulscat_Wac_Telemetry,c.Error,"Unable to parse the chromium major version number")}logRequestIdleCallbackMissing(){l.sendTraceTag(576582740,d.msoulscat_Wac_Telemetry,c.Warning,"Unable to find window.requestIdleCallback in the JS environment")}logCallbackBeingInvokedImmediately(){l.sendTraceTag(576582743,d.msoulscat_Wac_Telemetry,c.Error,"Callback is being invoked immediately as there is no platform support for deferring work")}logCancelIdleCallbackMissing(){l.sendTraceTag(576582744,d.msoulscat_Wac_Telemetry,c.Warning,"Unable to find window.cancelIdleCallback in the JS environment")}logUnknownMechanism(){l.sendTraceTag(576582747,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find a way to cancel the idle time job")}logWindowSetTimeOutMissingInJSEnvironment(){l.sendTraceTag(576239755,d.msoulscat_Wac_Telemetry,c.Error,"window.setTimeout is missing in JS environment")}logWindowPerformanceMissingInJSEnvironment(){l.sendTraceTag(576218121,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find window.performance in the JS environment")}logWindowPerformanceNowMissingInJSEnvironment(){l.sendTraceTag(576218122,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find window.performance.now in the JS environment")}logNavigatorMissingInJSEnvironment(){l.sendTraceTag(574657350,d.msoulscat_Wac_Telemetry,c.Error,"Navigator is missing in the JS environment")}logSendBeaconNotSupported(){l.sendTraceTag(573970625,d.msoulscat_Wac_Telemetry,c.Info,"SendBeacon not supported in current environment")}logBeaconURLIsEmpty(){l.sendTraceTag(573919702,d.msoulscat_Wac_Telemetry,c.Error,"We were passed an empty URL for sendBeacon")}logBeaconDataIsEmpty(){l.sendTraceTag(573907718,d.msoulscat_Wac_Telemetry,c.Error,"We were passed an empty data for sendBeacon")}logDocumentMissingInJsEnvironment(){l.sendTraceTag(573572181,d.msoulscat_Wac_Telemetry,c.Error,"Document is not present in JS Environment")}logDocumentVisibilityStateMissingInJsEnvironment(){l.sendTraceTag(573572182,d.msoulscat_Wac_Telemetry,c.Error,"Document VisibilityState is not present in JS Environment")}logDocumentAddEventListenerMissingInJsEnvironment(){l.sendTraceTag(573572183,d.msoulscat_Wac_Telemetry,c.Error,"Document AddEventListener is not present in JS Environment")}logWindowAddEventListenerNotFound(){l.sendTraceTag(538710337,d.msoulscat_Wac_Telemetry,c.Error,"Window AddEventListener is not present in JS Environment")}logPerformanceEventCountsNotSupported(){l.sendTraceTag(537522270,d.msoulscat_Wac_Telemetry,c.Warning,"Performance.EventCounts is not present in JS Environment")}logRemoveQueryParamsNotCalled(){l.sendTraceTag(527439250,d.msoulscat_Wac_Telemetry,c.Error,"Remove query params was not called before retrieve")}logWindowPerformanceEventCountsMissingInJSEnvironment(){l.sendTraceTag(525099864,d.msoulscat_Wac_Telemetry,c.Info,"window.performance.eventcounts was not present in the JS environment")}}class v{removeQueryParams(e){this.wasRemoveQueryParamsCalled=!0,this.queryParamsRemovedURL=e.split("?")[0]}retrieveQueryParamsRemovedURL(){return this.wasRemoveQueryParamsCalled?(this.wasRemoveQueryParamsCalled=!1,this.queryParamsRemovedURL):(this.logger.logRemoveQueryParamsNotCalled(),"")}constructor(e){this.logger=e,this.wasRemoveQueryParamsCalled=!1,this.queryParamsRemovedURL=""}}class I{getURLQueryParamsRemover(){return new v(new C)}}class O{open(e,r,t){this.xmlHTTPRequest.open(e,r,t)}send(e){this.xmlHTTPRequest.send(e)}constructor(){this.xmlHTTPRequest=new XMLHttpRequest}}class b{generateXMLHTTPRequestWrapper(){return new O}}const k="InvalidUnderlyingMechanism",N="requestIdleCallback",M="hidden";class x{isBrowserChromiumBased(e){return function(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckChromiumBrowser",(t=>{if(t.addProperty("UserAgent",e),0===e.localeCompare(""))return r.logEmptyUserAgentString(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});const s=e.match(/(Chrome\/|CriOS\/)/g);return null!=e.match(/(CriOS\/)/g)&&r.logChromiumOnIOS(),null===s?(r.logBrowserUserAgentNotChromiumBased(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):P.generateOperationResult({didOperationSucceed:!0,result:!0})}),t).getResult()}(e,this.logger)}parseChromeMajorVersionNumber(e){return function(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:-1});return f.startNew("ParseChromiumMajorVersionNumber",(t=>{t.addProperty("UserAgent",e);const s=e.match(/((Chrome\/|CriOS\/)(\d|\.)+)/g);if(null==s)return r.logChromeNotPresentInUserAgent(),P.generateOperationResult({didOperationSucceed:!1,result:-1});const o=s[0].split("/");if(o.length<2)return r.logUnableToIsolateChromeInformationFromUserAgent(),P.generateOperationResult({didOperationSucceed:!1,result:-1});const i=o[1].split(".");if(i.length<4)return r.logUnableToExtractChromeVersionInformation(),P.generateOperationResult({didOperationSucceed:!1,result:-1});const a=i[0],l=parseInt(a,10);return isNaN(l)?(r.logUnableToParseChromeMajorVersionString(),P.generateOperationResult({didOperationSucceed:!1,result:-1})):(t.addProperty("MajorVersionNumber",l),P.generateOperationResult({didOperationSucceed:!0,result:l}))}),t).getResult()}(e,this.logger)}constructor(e){this.logger=e}}class y{static getBrowserUtils(){const e=new C;return new x(e)}}class R{scheduleJobForIdleTime(e){!function(e,r,t,s){const o=P.generateOperationResult({didOperationSucceed:!1,result:{id:-1,underlyingMechanism:k}});f.startNew("RequestIdleCallbackShim",(()=>{if(r.hasProperty(N)){const r=window.requestIdleCallback(e,undefined);return P.generateOperationResult({didOperationSucceed:!0,result:{id:r,underlyingMechanism:N}})}t.logRequestIdleCallbackMissing();Date.now();return t.logCallbackBeingInvokedImmediately(),e(),P.generateOperationResult({didOperationSucceed:!0,result:{id:-1,underlyingMechanism:k}})}),o).getResult()}((()=>{e()}),this.windowPropertyChecker,this.logger)}constructor(e,r){this.windowPropertyChecker=e,this.logger=r}}class F{static getIdleTimeJobScheduler(){const e=new C,r=new S(e);return new R(r,e)}}class E{setTimerJob(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SetTimerJob",(()=>null==window?(this.logger.logWindowMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):null==window.setTimeout?(this.logger.logWindowSetTimeOutMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):(window.setTimeout(e,r),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t)}constructor(e){this.logger=e}}class W{static getTimerJobScheduler(){const e=new C;return new E(e)}}class _{isDocumentVisibleNow(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckDocumentVisibility",(()=>{if(!this.isDocumentPresentInJsEnvironment())return this.logger.logDocumentMissingInJsEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});if(!this.isDocumentVisibilityStatePresentInJsEnvironment())return this.logger.logDocumentVisibilityStateMissingInJsEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});const e=document.visibilityState!==M;return P.generateOperationResult({didOperationSucceed:!0,result:e})}),e).getResult()}wasDocumentHiddenDuringTimeRange(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("WasDocumentHiddenDuringTimeRange",(()=>{if(this.isDocumentHidden)return P.generateOperationResult({didOperationSucceed:!0,result:!0});if(void 0===this.lastUnHiddenDate)return P.generateOperationResult({didOperationSucceed:!0,result:!1});const r=Date.now()-this.lastUnHiddenDate<e;return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r).getResult()}isDocumentPresentInJsEnvironment(){return null!=document}isDocumentVisibilityStatePresentInJsEnvironment(){return"visibilityState"in document}isDocumentAddEventListenerPresentInJsEnvironment(){return"addEventListener"in document}updateIsHidden(){this.isDocumentHidden=document.visibilityState===M,this.isDocumentHidden||(this.lastUnHiddenDate=Date.now())}constructor(e){this.logger=e,this.onVisibilityChange=()=>{this.updateIsHidden()},this.isDocumentPresentInJsEnvironment()||this.logger.logDocumentMissingInJsEnvironment(),this.isDocumentVisibilityStatePresentInJsEnvironment()||this.logger.logDocumentVisibilityStateMissingInJsEnvironment(),this.isDocumentAddEventListenerPresentInJsEnvironment()||this.logger.logDocumentAddEventListenerMissingInJsEnvironment(),this.lastUnHiddenDate=void 0,this.isDocumentHidden=!1,this.updateIsHidden(),document.addEventListener("visibilitychange",this.onVisibilityChange)}}class w{static getDocumentVisibilityChecker(){const e=new C;return new _(e)}}var U;!function(e){e.SendBeacon="sendBeacon"}(U||(U={}));class L{sendBeacon(e){return function(e,r,t,s,o,i){const a=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("SendBeaconCall",(a=>{if(0===o.length)return s.logBeaconURLIsEmpty(),P.generateOperationResult({didOperationSucceed:!1,result:!1});if(0===i.length)return s.logBeaconDataIsEmpty(),P.generateOperationResult({didOperationSucceed:!1,result:!1});if(!e.hasProperty(U.SendBeacon)){s.logSendBeaconNotSupported();const e="POST",r=t.generateXMLHTTPRequestWrapper();return r.open(e,o,!0),r.send(i),a.addProperty("POSTRequestSent",!0),P.generateOperationResult({didOperationSucceed:!0,result:!0})}const l=r.sendBeacon(o,i);return a.addProperty("BeaconRequestSuccessfullyQueued",l),P.generateOperationResult({didOperationSucceed:!0,result:l})}),a).getResult()}(this.navigatorPropertyChecker,this.navigatorAPI,this.xmlHTTPRequestWrapperFactory,this.logger,e.url,e.data)}constructor(e,r,t,s){this.navigatorPropertyChecker=e,this.navigatorAPI=r,this.xmlHTTPRequestWrapperFactory=t,this.logger=s}}class B{hasProperty(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckNavigatorProperty",(r=>{if(null==navigator)return this.logger.logNavigatorMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});r.addProperty("NavigatorPropertyChecked",e);const t=e in navigator;return r.addProperty("IsPropertyPresentInNavigatorResult",t),P.generateOperationResult({didOperationSucceed:!0,result:t})}),r).getResult()}constructor(e){this.logger=e}}class A{sendBeacon(e,r){return null==navigator?(this.logger.logNavigatorMissingInJSEnvironment(),!1):navigator.sendBeacon(e,r)}constructor(e){this.logger=e}}class J{static getSendBeaconScheduler(){const e=new C,r=new B(e),t=new A(e),s=new b;return new L(r,t,s,e)}}class ${getCurrentTimestamp(){if(null!=window)if(null!=window.performance){if(null!=window.performance.now)return window.performance.now();this.logger.logWindowPerformanceNowMissingInJSEnvironment()}else this.logger.logWindowPerformanceMissingInJSEnvironment();else this.logger.logWindowMissingInJSEnvironment()}constructor(e){this.logger=e}}class D{static getTimestampRetriever(){const e=new C;return new $(e)}}class z{peek(){return this.elements.size>0?this.elements.get(this.dequeueIndex):void 0}queue(e){this.elements.set(this.queueIndex,e),this.queueIndex+=1}dequeue(){0!==this.elements.size&&(this.elements.delete(this.dequeueIndex),this.dequeueIndex+=1)}length(){return this.elements.size}constructor(){this.elements=new Map,this.queueIndex=0,this.dequeueIndex=0}}class V{static createQueue(){return new z}}class G{retrieveUserAgent(){const e=P.generateOperationResult({didOperationSucceed:!1,result:""});return f.startNew("RetrieveUserAgent",(()=>{const e=this.getUserAgentFromNavigatorAPI();return P.generateOperationResult({didOperationSucceed:!0,result:e})}),e).getResult()}getUserAgentFromNavigatorAPI(){return"undefined"==typeof navigator?(this.logger.logNavigatorMissingInJSEnvironment(),""):navigator.userAgent}constructor(e){this.logger=e,this.logger=e}}class q{static getUserAgentRetriever(){return new G(new C)}}class j{peek(){const e=this.count();if(0!==e)return this.elements[e-1]}push(e){this.elements.push(e)}pop(){this.elements.pop()}count(){return this.elements.length}constructor(){this.elements=[]}}class H{static createStack(){return new j}}class Q{static getWindowPropertyChecker(){const e=new C;return new S(e)}}class K{generateGuid(){return""}}class Z{static getGuidGenerator(){return new K}}function X(){const e=new C;if(!window)return void e.logWindowMissingInJSEnvironment();if(!window.performance)return void e.logWindowPerformanceMissingInJSEnvironment();const r=window.performance.eventCounts;if(!r)return void e.logPerformanceEventCountsNotSupported();let t=0;return r.forEach((e=>t+=e)),t}const Y="JSSelfProfilingAPI-Profile",ee="StartManualProfiler",re="StopManualProfiler",te="StartTimedProfiler",se="StopTimedProfiler",oe="StartManualProfilerInternal",ie="StopManualProfilerInternal",ae="StartContinuousProfiler",le="StopContinuousProfiler",ne="TransformProfilerTrace",de="StartFullSessionProfiler",ce="StopFullSessionProfiler",ge="SendCallTrees",ue="SerializeCallTreesArray",me="OnMessageReceivedFromWorker",pe="useWebWorkForProfilerTraceProcessing",he=[Y,ne,ge,ue,me,pe,"ProfilerWorkerOnMessage",ie,de,ee,te,ae,le,ce,re,se,oe];var Te,fe,Pe;!function(e){e[e.Manual=0]="Manual",e[e.Timed=1]="Timed",e[e.Continuous=2]="Continuous",e[e.FullSession=3]="FullSession"}(Te||(Te={})),function(e){e[e.ProfilerStopped=0]="ProfilerStopped",e[e.PreProfilerStart=1]="PreProfilerStart"}(fe||(fe={}));class Se{getCustomProperties(){return this.customProperties}getResources(){return this.profilerTrace.resources}getFrames(){return this.profilerTrace.frames}getStacks(){return this.profilerTrace.stacks}getSamples(){return this.profilerTrace.samples}getSamplesTrimmed(){return this.getSamples().reduce(((e,r)=>{const t=e.length>0&&void 0!==e[e.length-1].stackId;return(void 0!==r.stackId||t)&&e.push(r),e}),[])}getProfilerTraceStartTimestamp(){return this.profilerTraceStartTimestamp}getProfilerProperties(){return this.profilerProperties}getElapsedProfilingTimeInMs(){return this.elapsedProfilingTime}constructor(e,r,t,s,o){this.customProperties=e,this.profilerTrace=r,this.profilerTraceStartTimestamp=t,this.profilerProperties=s,this.elapsedProfilingTime=o}}!function(e){e.Chrome="chrome"}(Pe||(Pe={}));const Ce={samplingIntervalInMs:-1},ve={name:"InvalidFrameName",resourceId:-1,line:-1,column:-1},Ie={name:"EndOfSiblingChainFrame",resourceId:-1,line:-1,column:-1},Oe="InvalidResourceName",be=!1,ke=!1,Ne=!1,Me={obfuscatedName:"InvalidObfuscatedName",startTimeInMs:-1,frameOnlyRunTimeInMs:-1,subTreeRunTimeInMs:-1,totalExecutionTimeInMs:-1,hasChildrenNodes:!1,resourceInfo:{resourceName:Oe,lineNo:-1,columnNo:-1}},xe=!1,ye=!1,Re=!1,Fe=!1,Ee="00000000-0000-0000-0000-000000000000",We=!1,_e=!0,we=!1,Ue=!1;function Le(e,r,t){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SendProfilerEventToProfilerObservers",(o=>(o.addProperty("ProfilerEventIdToSendToObservers",r.eventId),e.forEach(((e,o)=>{-1!==e.indexOf(r.eventId)&&f.startNew("InvokeOnProfilerEventOnProfilerObserver",(()=>(o.onProfilerEvent(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,t)})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,t)}class Be{constructor(e,r){this.subscriber=e,this.subscriptionList=r,this.subscriberString="callTreeCustomFilterer"}}class Ae{constructor(e,r){this.subscriber=e,this.subscriptionList=r,this.subscriberString="customPropertiesRetriever"}}class Je{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ee,(()=>{const e=this.startProfilerImplementation();return P.generateOperationResult({didOperationSucceed:e,result:void 0})}),e,this.logger)}startProfilerImplementation(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew(oe,(r=>void 0!==this.profiler?(this.logger.logProfilerAlreadyStarted(),P.generateOperationResult({didOperationSucceed:!1,result:!1})):this.preProfilerStartChecker.shouldProfilingStart()?null==this.profilerInitOptions.maximumNumberOfSamplesToTake?(this.logger.logMaxBufferSizeNotFixed(),P.generateOperationResult({didOperationSucceed:!1,result:!1})):(r.addProperty("SamplingInterval",this.profilerInitOptions.samplingIntervalInMs),r.addProperty("MaxBufferSize",this.profilerInitOptions.maximumNumberOfSamplesToTake),Le(this.profilerObserversToProfilerEventIds,{eventId:fe.PreProfilerStart,eventData:void 0},this.logger),this.profiler=this.jsSelfProfilingAPI.createProfiler({sampleInterval:this.profilerInitOptions.samplingIntervalInMs,maxBufferSize:this.profilerInitOptions.maximumNumberOfSamplesToTake}),null==this.profiler?(this.logger.logBailingOutOnNullProfiler(),P.generateOperationResult({didOperationSucceed:!1,result:!1})):(this.preProfilerStartChecker.getShouldProcessProfileCapturedWhileUserIsIdle()||(this.documentEventsCountBeforeProfiling=X()),this.profilerStartTimestamp=this.timestampRetriever.getCurrentTimestamp(),null!=e&&e(!0),P.generateOperationResult({didOperationSucceed:!0,result:!0}))):(this.logger.logPreProfilerStartCheckFailed(),this.didPreProfilerStartChecksFail=!0,e&&e(!1),P.generateOperationResult({didOperationSucceed:!0,result:!0}))),r,this.logger).getResult()}stop(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(re,(()=>{const e=this.stopProfilerImplementation();return P.generateOperationResult({didOperationSucceed:e,result:void 0})}),e,this.logger)}stopProfilerImplementation(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew(ie,(r=>{if(null==this.profiler){const e=!!this.didPreProfilerStartChecksFail;return this.didPreProfilerStartChecksFail=!1,this.logger.logProfilerInstanceIsUndefined(),P.generateOperationResult({didOperationSucceed:e,result:!1})}return this.profiler.stop().then((t=>{this.profilerStopTimestamp=this.timestampRetriever.getCurrentTimestamp(),this.profilerTrace=t;const s=this.customPropertiesExtractor.extractCustomProperties(this.customPropertiesRetriever);let o=-1;void 0!==this.profilerStartTimestamp&&void 0!==this.profilerStopTimestamp&&(o=this.profilerStopTimestamp-this.profilerStartTimestamp),r.addProperty("ElapsedProfilingTime",o);const i={profilerTrace:new Se(s,this.profilerTrace,void 0!==this.profilerStartTimestamp?this.profilerStartTimestamp:-1,this.profilerInitOptions,o),callTreeCustomPropertiesRetrievers:this.callTreeCustomPropertiesRetrievers,documentEventsCountBeforeProfiling:this.documentEventsCountBeforeProfiling,callTreeCustomFilterers:this.callTreeCustomFilterers};this.profilerStartTimestamp=void 0,this.profilerStopTimestamp=void 0;const a={eventId:fe.ProfilerStopped,eventData:i};Le(this.profilerObserversToProfilerEventIds,a,this.logger),this.profiler=void 0,this.documentEventsCountBeforeProfiling=void 0,null!=e&&e()}),(e=>{this.logger.logProfilerStopPromiseRejected(e),this.profiler=void 0,this.profilerTrace=void 0})),P.generateOperationResult({didOperationSucceed:!0,result:!0})}),r,this.logger).getResult()}subscribeProfilerObserver(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SubscribeProfilerObserver",(t=>{if(null==e)return this.logger.logNullOrUndefinedProfilerObserverPassedInForSubscribe(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==r)return this.logger.logNullOrUndefinedProfilerEventIds(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(t.addProperty("ProfilerEventIds",Array.from(r)),this.profilerObserversToProfilerEventIds.has(e)){const t=this.profilerObserversToProfilerEventIds.get(e);null==t?this.logger.logUnexpectedUndefinedProfilerEventIds():(r.forEach((e=>{t.push(e)})),this.profilerObserversToProfilerEventIds.set(e,Array.from(new Set(t))))}else this.profilerObserversToProfilerEventIds.set(e,Array.from(r));return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),t,this.logger)}unsubscribeProfilerObserver(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("UnsubscribeProfilerObserver",(t=>{if(null==e)return this.logger.logNullOrUndefinedProfilerObserverPassedInForUnsubscribe(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==r)return this.logger.logNullOrUndefinedProfilerEventToUnsubscribe(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(t.addProperty("ProfilerEventToUnsubscribe",r),!this.profilerObserversToProfilerEventIds.has(e))return this.logger.logProfilerObserverWasNeverSubscribed(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const s=this.profilerObserversToProfilerEventIds.get(e);return null==s?(this.logger.logUnexpectedNullOrUndefinedSubscribedProfilerEventIds(),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):-1===s.indexOf(r)?(this.logger.logProfilerObserverNeverSubscribedForProfilerEventId(r),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(this.profilerObserversToProfilerEventIds.set(e,s.filter((e=>e!==r))),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),t,this.logger)}subscribeCallTreeCustomPropertiesRetriever(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SubscibeCallTreeCustomPropertiesRetriever",(()=>this.subscribeToProfiler(new Ae(e,this.callTreeCustomPropertiesRetrievers))),r,this.logger)}unsubscribeCallTreeCustomPropertiesRetriever(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("UnsubscribeCallTreeCustomPropertiesRetriever",(()=>this.unsubscribeFromProfiler(new Ae(e,this.callTreeCustomPropertiesRetrievers))),r,this.logger)}subscribeCallTreeCustomFilterer(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("subscribeCallTreeCustomFilterer",(()=>this.subscribeToProfiler(new Be(e,this.callTreeCustomFilterers))),r,this.logger)}unsubscribeCallTreeCustomFilterer(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("unsubscribeCallTreeCustomFilterer",(()=>this.unsubscribeFromProfiler(new Be(e,this.callTreeCustomFilterers))),r,this.logger)}subscribeToProfiler(e){return null==e.subscriber?(this.logger.logNullOrUndefinedItemToSubscribe(e.subscriberString),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(e.subscriptionList.push(e.subscriber),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}unsubscribeFromProfiler(e){if(null==e.subscriber)return this.logger.logNullOrUndefinedItemForUnsubscribe(e.subscriberString),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const r=e.subscriptionList.indexOf(e.subscriber);return-1===r?(this.logger.logItemWasNeverSubscribed(e.subscriberString),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(e.subscriptionList.splice(r,1),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}constructor(e,r,t,s,o,i,a){this.preProfilerStartChecker=e,this.jsSelfProfilingAPI=r,this.profilerInitOptions=t,this.customPropertiesRetriever=s,this.timestampRetriever=o,this.customPropertiesExtractor=i,this.logger=a,this.profiler=void 0,this.profilerTrace=void 0,this.profilerStartTimestamp=void 0,this.profilerStopTimestamp=void 0,this.didPreProfilerStartChecksFail=!1,this.profilerObserversToProfilerEventIds=new Map,this.callTreeCustomPropertiesRetrievers=[],this.documentEventsCountBeforeProfiling=void 0,this.callTreeCustomFilterers=[]}}class $e extends Je{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(te,(()=>(super.startProfilerImplementation(this.postProfilerStartCallback),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}stop(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(se,(()=>(null==e||e||this.logger.logTimedProfilerIsBeingStoppedManually(),super.stopProfilerImplementation(),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}constructor(e,r,t,s,o,i,a,l){super(e,r,t,o,i,a,l),this.timerJobScheduler=s,this.postProfilerStartCallback=e=>{this.logger.logPostTimedStartProfilerStartCallbackInvoked(),null!=this.profilerInitOptions.profilingIntervalInMs?e&&(this.timerJobScheduler.setTimerJob(this.postTimerStopCallBack,this.profilerInitOptions.profilingIntervalInMs),this.logger.logTimerJobToStopProfilerSet()):this.logger.logProfilingIntervalIsUndefined()},this.postTimerStopCallBack=()=>{this.logger.logTimedProfilerStopCallbackInvoked(),this.stop(!0)}}}class De extends $e{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ae,(()=>(super.start(),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}stop(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(le,(()=>(super.stopProfilerImplementation(this.postProfilerStopCallback),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}constructor(){super(...arguments),this.postProfilerStartCallback=e=>{this.logger.logPostTimedStartProfilerStartCallbackInvoked(),this.profilerInitOptions.profilingIntervalInMs?e?(this.timerJobScheduler.setTimerJob(this.postTimerStopCallBack,this.profilerInitOptions.profilingIntervalInMs),this.logger.logTimerJobToStopProfilerSet()):(this.logger.logPostProfilerStopCallbackInvoked(),this.postProfilerStopCallback()):this.logger.logProfilingIntervalIsUndefined()},this.postProfilerStopCallback=()=>{null!=this.profilerInitOptions.idleIntervalInMs?this.timerJobScheduler.setTimerJob(this.profilerStopCallback,this.profilerInitOptions.idleIntervalInMs):this.logger.logNullOrUndefinedIdleInterval()},this.profilerStopCallback=()=>{this.start()}}}class ze extends Je{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew(de,(()=>(this.startProfilerImplementation(this.postProfilerStartCallback),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger).getResult()}stop(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew(ce,(()=>{let r;return void 0!==e&&e&&(r=this.postProfilerStopCallback),this.stopProfilerImplementation(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger).getResult()}constructor(e,r,t,s,o,i,a,l){super(e,r,t,o,i,a,l),this.timerJobScheduler=s,this.postProfilerStartCallback=e=>{this.timerJobScheduler.setTimerJob((()=>{e?this.stop(!0):this.start()}),e?1e4:0)},this.postProfilerStopCallback=()=>{this.start()}}}class Ve{createProfiler(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:null});return f.startNew(Y,(()=>{const r=new Profiler(e);return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e}}class Ge{shouldProfilingStart(){return!!this.isDocumentVisibleNow()||this.shouldProfilerStartInAHiddenDocument}getShouldProcessProfileCapturedWhileUserIsIdle(){return this.shouldProcessProfileCapturedWhileUserIsIdle}isDocumentVisibleNow(){return this.documentVisibilityChecker.isDocumentVisibleNow()}constructor(e,r,t){this.documentVisibilityChecker=e,this.shouldProfilerStartInAHiddenDocument=r,this.shouldProcessProfileCapturedWhileUserIsIdle=t}}class qe{extractCustomProperties(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:{}});return f.startNew("ExtractCustomProperties",(()=>{const r={};if(null!=e&&"getCustomProperties"in e&&"function"==typeof e.getCustomProperties){const t=e.getCustomProperties(void 0);null!=t?t.forEach(((e,t)=>{null==t?this.logger.logCustomPropertyKeyIsNull():null==e?this.logger.logCustomPropertyValueIsNull():r[t]=e})):this.logger.logNullOrUndefinedCustomProperties()}else this.logger.logNullOrUndefinedCustomPropertiesRetriever();return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}extractCustomPropertiesV2(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:{}});return f.startNew("ExtractCustomPropertiesV2",(()=>{const t={};if(null!=e&&"getCustomProperties"in e&&"function"==typeof e.getCustomProperties){const s=e.getCustomProperties(r);null!=s?s.forEach(((e,r)=>{null==r?this.logger.logCustomPropertyKeyIsNull():null==e?this.logger.logCustomPropertyValueIsNull():t[r]=e})):this.logger.logNullOrUndefinedCustomProperties()}else this.logger.logNullOrUndefinedCustomPropertiesRetriever();return P.generateOperationResult({didOperationSucceed:!0,result:t})}),t,this.logger).getResult()}constructor(e){this.logger=e}}class je{static buildProfiler(e,r,s,o,i,a){const l=P.generateOperationResult({didOperationSucceed:!1,result:new t(a)});return f.startNew("BuildProfilerInstance",(l=>{l.addProperty("ProfilerName",function(e,r){let t="";switch(e){case Te.Manual:t="ManualProfiler";break;case Te.Timed:t="TimedProfiler";break;case Te.Continuous:t="ContinuousProfiler";break;case Te.FullSession:t="FullSessionProfiler";break;default:r.logMissingProfilerNameForProfilerType(e),t="MissingProfilerName"}return t}(e,a)),l.addProperty("ProfilerInitOptions",{samplingIntervalInMs:r.samplingIntervalInMs,maximumNumberOfSamplesToTake:r.maximumNumberOfSamplesToTake,profilingIntervalInMs:r.profilingIntervalInMs,idleIntervalInMs:r.idleIntervalInMs});const n=w.getDocumentVisibilityChecker(),d=new Ge(n,null==i.shouldProfilingStartInAHiddenDocument?be:i.shouldProfilingStartInAHiddenDocument,null==i.shouldProcessProfileCapturedWhileUserIsIdle?_e:i.shouldProcessProfileCapturedWhileUserIsIdle),c=new Ve(a),g=W.getTimerJobScheduler(),u=D.getTimestampRetriever(),m=new qe(a);let p,h=!1,T=!1,f=!1;const S=new Set;switch(S.add(fe.ProfilerStopped),e){case Te.Manual:{const e=new Je(d,c,r,s,u,m,a);e.subscribeProfilerObserver(o,S),f=!0,p=e,h=!0}break;case Te.Timed:{const e=new $e(d,c,r,g,s,u,m,a);e.subscribeProfilerObserver(o,S),f=!0,p=e,h=!0}break;case Te.Continuous:{const e=new De(d,c,r,g,s,u,m,a);e.subscribeProfilerObserver(o,S),f=!0,p=e,h=!0}break;case Te.FullSession:{const e=new ze(d,c,r,g,s,u,m,a);e.subscribeProfilerObserver(o,S),f=!0,p=e,h=!0}break;default:a.logMissingProfilerImplementation(e),p=new t(a),h=!1,T=!0}void 0===p&&a.logNoProfilerInstanceBuilt(),void 0===p||f||a.logCreateProfilerDidNotSubscribeProfilerObserver();const C=void 0===p?new t(a):p;return P.generateOperationResult({didOperationSucceed:h,result:C,didOperationFailUnexpectedly:T})}),l,a).getResult()}}class He{createProfiler(e,r,s){const o=P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});return f.startNew("CreateProfiler",(()=>{if(!this.validator.areValidationsSuccessful())return this.logger.logFailingValidationsInProfilerFactory(),P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});if(!this.optionsValidatorFactory.retrieveValidator(e).isValid(r))return this.logger.logProfilerInitOptionsValidationFailed(),P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});const o=this.profilerInitOptionsFixerFactory.getFixerForProfilerType(e);o.fixProfilerInitOptions(r);const i=o.retrieveFixedProfilerInitOptions();if(null==i)return this.logger.logUnableToFixUpProfilerInitOptions(),P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});if(this.numberOfProfilersCreated>=100)return this.logger.logMaxNumberOfProfilersAlreadyCreated(),P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});const a=je.buildProfiler(e,i,s,this.profilerObserverFactory.createObserver(),this.packageInitOptions,this.logger);return this.numberOfProfilersCreated=this.numberOfProfilersCreated+1,P.generateOperationResult({didOperationSucceed:!0,result:a})}),o,this.logger).getResult()}createProfilerV2(e,r,s){const o=P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});return f.startNew("CreateProfilerV2",(()=>{if(!this.validator.areValidationsSuccessful())return this.logger.logFailingValidationsInProfilerFactory(),P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});if(!this.optionsValidatorFactory.retrieveValidator(e).isValid(r))return this.logger.logProfilerInitOptionsValidationFailed(),P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});const o=this.profilerInitOptionsFixerFactory.getFixerForProfilerType(e);o.fixProfilerInitOptions(r);const i=o.retrieveFixedProfilerInitOptions();if(null==i)return this.logger.logUnableToFixUpProfilerInitOptions(),P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});if(this.numberOfProfilersCreated>=100)return this.logger.logMaxNumberOfProfilersAlreadyCreated(),P.generateOperationResult({didOperationSucceed:!1,result:new t(this.logger)});const a=je.buildProfiler(e,i,s,this.profilerObserverFactory.createObserver(),this.packageInitOptions,this.logger);return this.numberOfProfilersCreated=this.numberOfProfilersCreated+1,P.generateOperationResult({didOperationSucceed:!0,result:a})}),o,this.logger).getResult()}constructor(e,r,t,s,o,i){this.validator=e,this.optionsValidatorFactory=r,this.profilerInitOptionsFixerFactory=t,this.profilerObserverFactory=s,this.packageInitOptions=o,this.logger=i,this.numberOfProfilersCreated=0}}class Qe{areValidationsSuccessful(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckProfilerFactoryValidations",(()=>this.isFeatureEnabled()?this.isSupportedEnvironmentForProfiling()?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logProfilingIsNotSupportedEnvironment(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logProfilingIsNotEnabled(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}isFeatureEnabled(){return null==this.featureChecker?(this.logger.logFeatureCheckerIsNullOrUndefined(),!1):"isProfilingEnabled"in this.featureChecker?"function"!=typeof this.featureChecker.isProfilingEnabled?(this.logger.logFeatureCheckerIsProfilingEnabledNotAFunction(),!1):this.featureChecker.isProfilingEnabled():(this.logger.logMissingIsProfilingEnabledOnFeatureChecker(),!1)}isSupportedEnvironmentForProfiling(){return this.supportedEnvironmentChecker.isSupportedEnvironment()}constructor(e,r,t){this.featureChecker=e,this.supportedEnvironmentChecker=r,this.logger=t}}class Ke{isProfilingSupportedInJSEnvironment(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckSupportedBrowser",(e=>{const r=this.userAgentRetriever.retrieveUserAgent();e.addProperty("UserAgent",r);const t=this.browserUtils.isBrowserChromiumBased(r);if(e.addProperty("isChromiumBasedBrowser",t),!t)return this.logger.logBrowserUserAgentNotChromiumBased(),P.generateOperationResult({didOperationSucceed:!0,result:!1});const s=this.browserUtils.parseChromeMajorVersionNumber(r);e.addProperty("ChromiumMajorVersionNumber",s);const o=s>=94;return e.addProperty("IsSupportedVersionOfChromiumBrowser",o),o?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logUnsupportedChromiumMajorVersionNumber(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))}),e,this.logger).getResult()}constructor(e,r,t){this.userAgentRetriever=e,this.browserUtils=r,this.logger=t}}class Ze{isSupportedEnvironment(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckSupportedEnvironment",(()=>this.isSupportedBrowser()?this.shouldSkipSupportedOSCheck||this.isSupportedOperatingSystem()?this.isJSSelfProfilingAPIAvailable()?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logJSSelfProfilingAPIUnavailable(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logUnsupportedOperatingSystem(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logUnsupportedBrowser(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}isSupportedBrowser(){return this.supportedBrowserChecker.isProfilingSupportedInJSEnvironment()}isSupportedOperatingSystem(){return this.supportedOperatingSystemChecker.isSupportedOperatingSystem()}isJSSelfProfilingAPIAvailable(){return this.jsSelfProfilingAPIAvailabilityChecker.isJSSelfProfilingAPIAvailable()}constructor(e,r,t,s,o){this.supportedBrowserChecker=e,this.supportedOperatingSystemChecker=r,this.jsSelfProfilingAPIAvailabilityChecker=t,this.shouldSkipSupportedOSCheck=s,this.logger=o}}class Xe{isSupportedOperatingSystem(){const e=P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:!1});return f.startNew("SupportedOperatingSystemCheck",(()=>{const e=this.isOperatingSystemWindows();return P.generateOperationResult({didOperationSucceed:!0,result:e})}),e,this.logger).getResult()}isOperatingSystemWindows(){return this.userAgentRetriever.retrieveUserAgent().toLowerCase().includes("win")}constructor(e,r){this.userAgentRetriever=e,this.logger=r}}class Ye{isJSSelfProfilingAPIAvailable(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckForJSSelfProfilingAPI",(()=>null==window?(this.logger.logWindowMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):"Profiler"in window?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logProfilerNotPresentInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}constructor(e){this.logger=e}}class er{isSupportedEnvironment(){return this.logger.logNullSupportedEnvironmentCheckerInvoked(),!1}constructor(e){this.logger=e}}class rr{static build(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:new er(r)});return f.startNew("BuildSupportedEnvironmentChecker",(()=>{const t=q.getUserAgentRetriever(),s=y.getBrowserUtils(),o=new Ke(t,s,r),i=new Xe(t,r),a=new Ye(r);return P.generateOperationResult({didOperationSucceed:!0,result:new Ze(o,i,a,e,r)})}),t,r).getResult()}}class tr{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckSamplingInterval",(r=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(r.addProperty("SamplingIntervalToValidate",e.samplingIntervalInMs),e.samplingIntervalInMs<=0?(this.logger.logSamplingIntervalIsLessThanOrEqualToZero(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):this.convertToMicroSeconds(e.samplingIntervalInMs)>2147483647?(this.logger.logSamplingIntervalAboveMaxSamplingInterval(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(e.samplingIntervalInMs<16&&this.logger.logSamplingIntervalLessThanMinimumSupportedSamplingInterval(e.samplingIntervalInMs,16),P.generateOperationResult({didOperationSucceed:!0,result:!0})))),r,this.logger).getResult()}convertToMicroSeconds(e){return 1e3*e}constructor(e){this.logger=e}}class sr extends tr{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckMaxBufferSizeIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isMaxBufferSizeValidIfSpecified(e)?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logMaxBufferValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logSamplingIntervalValidationCheckFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isMaxBufferSizeValidIfSpecified(e){return null==e.maximumNumberOfSamplesToTake?(this.logger.logMaxBufferSizeNotSpecified(),!0):!(e.maximumNumberOfSamplesToTake<=0&&(this.logger.logMaxBufferSizeLessThanOrEqualToZero(),1))}}class or extends sr{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckProfilingIntervalIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isProfilingIntervalValid(e)?this.isProfilingIntervalGreaterThanSamplingInterval(e)?P.generateOperationResult({didOperationSucceed:!0,result:!0}):P.generateOperationResult({didOperationSucceed:!0,result:!1}):(this.logger.logProfilingIntervalValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logManualProfilerValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isProfilingIntervalValid(e){return null==e.profilingIntervalInMs?(this.logger.logProfilingIntervalNullOrUndefined(),!1):!(e.profilingIntervalInMs<=0&&(this.logger.logProfilingIntervalLessThanOrEqualToZero(),1))}isProfilingIntervalGreaterThanSamplingInterval(e){return null==e.profilingIntervalInMs?(this.logger.logProfilingIntervalNullOrUndefined(),!1):!(e.profilingIntervalInMs<e.samplingIntervalInMs&&(this.logger.logProfilingIntervalLessThanSamplingInterval(),1))}}class ir extends or{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckIdleIntervalIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isIdleIntervalInValid(e)?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logIdleIntervalValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logTimedProfilerValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isIdleIntervalInValid(e){return null==e.idleIntervalInMs?(this.logger.logIdleIntervalIsNullOrUndefined(),!1):!(e.idleIntervalInMs<=0&&(this.logger.logIdleIntervalIsLessThanOrEqualToZero(),1))}}class ar{isValid(e){return this.logger.logNullJSCPUProfilerInitOptionsValidatorInvoked(),!1}constructor(e){this.logger=e}}class lr{retrieveValidator(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new ar(this.logger)});return f.startNew("RetrieveValidator",(r=>{switch(r.addProperty("ProfilerType",e),e){case Te.Manual:return P.generateOperationResult({didOperationSucceed:!0,result:new sr(this.logger)});case Te.Timed:return P.generateOperationResult({didOperationSucceed:!0,result:new or(this.logger)});case Te.Continuous:return P.generateOperationResult({didOperationSucceed:!0,result:new ir(this.logger)});case Te.FullSession:return P.generateOperationResult({didOperationSucceed:!0,result:new tr(this.logger)});default:return r.addLog("Missing validator implementation for profiler type"),P.generateOperationResult({didOperationSucceed:!1,result:new tr(this.logger),didOperationFailUnexpectedly:!0})}}),r,this.logger).getResult()}constructor(e){this.logger=e}}class nr{fixProfilerInitOptions(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("FixMaxBufferSize",(()=>null==e?(this.logger.logNullOrUndefinedProfilerInitOptions(),P.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):(this.fixedProfilerInitOptions=e,null==this.fixedProfilerInitOptions.maximumNumberOfSamplesToTake&&(this.logger.logMaxBufferSizeFixedToDefaultSize(),this.fixedProfilerInitOptions.maximumNumberOfSamplesToTake=2e5),this.didProfilerInitOptionsGetFixed=!0,P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}retrieveFixedProfilerInitOptions(){return this.didProfilerInitOptionsGetFixed?this.didProfilerInitOptionsGetFixed=!1:this.logger.logMaxBufferSizeWasNotFixedBeforeRetrieval(),this.fixedProfilerInitOptions}constructor(e){this.logger=e,this.didProfilerInitOptionsGetFixed=!1,this.fixedProfilerInitOptions=void 0}}class dr{fixProfilerInitOptions(e){this.logger.logLoopBackFixerFixProfilerInitOptionsInvoked(),null!=e&&(this.profilerInitOptionsToLoopBack=e)}retrieveFixedProfilerInitOptions(){return this.logger.logLoopBackFixerRetrieveFixedProfilerInitOptionsInvoked(),this.profilerInitOptionsToLoopBack}constructor(e){this.logger=e,this.profilerInitOptionsToLoopBack=void 0}}class cr{getFixerForProfilerType(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new dr(this.logger)});return f.startNew("GetFixerForProfileType",(()=>{this.logger.logFixerForProfilerType(e);let r=new dr(this.logger),t=!1;switch(e){case Te.Manual:case Te.Timed:case Te.Continuous:case Te.FullSession:t=!0,r=new nr(this.logger);break;default:this.logger.logMissingProfilerInitOptionsFixerImplementation()}return P.generateOperationResult({didOperationSucceed:t,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e}}class gr{createProfiler(e,r,s){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new t(this.logger)}createProfilerV2(e,r,s){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new t(this.logger)}constructor(e){this.logger=e}}class ur{filterFrames(){}retrieveFrameFilteredCallTree(){return new pr}}class mr{getNext(){}hasMore(){return!1}}class pr{getReconstructibleTreeIterator(){return new mr}getDepthFirstIterator(){return new mr}getNodesToMergeIterator(){return new mr}getRightMostNodesIterator(){return new mr}getTotalExecutionTimeInMs(){return-1}getCustomProperties(){return{}}getTreeId(){return Ee}getFramesFilterer(e){return new ur}}class hr{transform(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ne,(r=>{this.profilerTrace=e,this.traceToCallTreesConverter.buildCallTrees(this.profilerTrace);const t=this.traceToCallTreesConverter.retrieveBuiltCallTrees();r.addProperty("BuiltCallTreesCount",t.length);const s=t.filter((e=>!(e instanceof pr))).length;r.addProperty("NonEmptyCallTreesCount",s),this.callTreesMerger.mergeCallTrees(t);const o=this.callTreesMerger.retrieveMergedCallTrees();r.addProperty("MergedCallTreesCount",o.length),this.callTreesFilterer.filterCallTrees(o,this.callTreeFilteringThresholdInMs);const i=this.callTreesFilterer.retrieveFilteredCallTrees();return r.addProperty("FilteredCallTreesCount",i.length),this.callTreesToReturn=i,this.callTreesFramesFilterer.filterCallTrees(i,this.frameTotalExecutionTimeFilteringThresholdInMs),r.addProperty("FrameFilteredCallTreesCount",this.callTreesToReturn.length),this.transformCalledBeforeRetrieveCallTrees=!0,P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveCallTrees",(()=>this.transformCalledBeforeRetrieveCallTrees?(this.transformCalledBeforeRetrieveCallTrees=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.callTreesToReturn})):(this.logger.logRetrieveCallTreesCalledBeforeTransform(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}constructor(e,r,t,s,o,i,a){this.traceToCallTreesConverter=e,this.callTreesMerger=r,this.callTreesFilterer=t,this.callTreeFilteringThresholdInMs=s,this.callTreesFramesFilterer=o,this.frameTotalExecutionTimeFilteringThresholdInMs=i,this.logger=a,this.transformCalledBeforeRetrieveCallTrees=!1,this.profilerTrace=void 0,this.callTreesToReturn=[]}}class Tr{buildCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("BuildCallTrees",(()=>{this.didBuildCallTreesGetCalledBeforeRetrieve=!0,this.stacksBuilder.buildStacks(e);const r=this.stacksBuilder.retrieveStacks(),t=e.getCustomProperties();return this.stacksToCallTreesConverter.convertStacksToCallTrees(t,r),this.callTrees=this.stacksToCallTreesConverter.retrieveConvertedCallTrees(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveBuiltCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveBuiltCallTrees",(()=>this.didBuildCallTreesGetCalledBeforeRetrieve?(this.didBuildCallTreesGetCalledBeforeRetrieve=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.callTrees})):(this.logger.logRetrieveBuiltCallTreesBeforeBuildCallTrees(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}constructor(e,r,t){this.stacksBuilder=e,this.stacksToCallTreesConverter=r,this.logger=t,this.didBuildCallTreesGetCalledBeforeRetrieve=!1,this.callTrees=[]}}class fr{peek(){}pop(){}}class Pr{peek(){const e=this.profilerFrames.length;if(0!==e)return this.profilerFrames[e-1]}pop(){this.profilerFrames.pop()}push(e){this.profilerFrames.push(e)}constructor(){this.profilerFrames=[]}}class Sr{addChildNode(e){this.childrenNodes.push(e),e.setParentNode(this)}getFrameOnlyExecutionTimeInMs(){const e=this.getSubTreeExecutionTimeInMs();return this.shouldRecordExpandedTimeStamps?this.totalExecutionTime-e:this.trimTimeStamp(this.totalExecutionTime-e)}getSubTreeExecutionTimeInMs(){let e=0;return this.childrenNodes.forEach((r=>{e+=r.getTotalExecutionTimeInMs()})),e<0&&this.logger.logNegativeSubTreeExecutionTime(),e}getTotalExecutionTimeInMs(){return this.shouldRecordExpandedTimeStamps?this.totalExecutionTime:this.trimTimeStamp(this.totalExecutionTime)}getFrame(){return this.profilerFrame}getChildrenNodes(){return this.childrenNodes}removeChildNode(e){e.setParentNode(void 0),this.childrenNodes=this.childrenNodes.filter((r=>r!==e))}getStartTimeInMs(){return this.shouldRecordExpandedTimeStamps?this.startTime:this.trimTimeStamp(this.startTime)}getLastObservedTimestamp(){return this.shouldRecordExpandedTimeStamps?this.lastObservedTimestamp:this.trimTimeStamp(this.lastObservedTimestamp)}getResourceName(){return this.resourceName}getParentNode(){return this.parentNode}setParentNode(e){this.parentNode=e}setTotalExecutionTime(e){e<0&&this.logger.logInvalidNewFrameNodeExecutionTime(),this.totalExecutionTime=e}setLastObservedTimestamp(e){this.lastObservedTimestamp=e}trimTimeStamp(e){return Number.parseFloat(e.toFixed(2))}getCount(){return this.count}getFrameOnlyCount(){if(void 0===this.count)return;const e=this.childrenNodes.reduce(((e,r)=>e+r.getCount()),0);return this.count-e}addCount(e){this.recordFrameCount&&void 0!==e&&(this.count+=e)}constructor(e,r,t,s,o,i,a,l,n){this.profilerFrame=e,this.startTime=r,this.totalExecutionTime=t,this.lastObservedTimestamp=s,this.resourceName=o,this.shouldRecordExpandedTimeStamps=i,this.parentNode=a,this.recordFrameCount=l,this.logger=n,this.childrenNodes=[],r<0&&this.logger.logInvalidFrameNodeStartTime(),t<0&&this.logger.logInvalidFrameNodeExecutionTime(),this.recordFrameCount&&(this.count=1)}}class Cr{peek(){this.logger.logPeekOnNullExecutionStackInvoked()}pop(){this.logger.logPopOnNullExecutionStackInvoked()}constructor(e){this.logger=e}}class vr{buildStack(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("BuildStack",(r=>{if(this.buildStackCalled=!0,null==e.stackId){this.builtStack=new fr;const e="EmptyStackBuilt";return r.addProperty(e,!0),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}const t=this.profilerTrace.getStacks();if(0===t.length)return this.logger.logEmptyStacks(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const s=this.profilerTrace.getFrames();if(0===s.length)return this.logger.logEmptyFrames(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const o=new Pr;let i=e.stackId,a=0,l=!1;const n=[];for(;;){if(a>t.length){this.logger.logForciblyExitingLoopWhileBuildingStack(),l=!0;break}a+=1;const e=t[i],r=s[e.frameId];if(n.unshift(r),null==e.parentId)break;i=e.parentId}const d=e.timestamp,c=d,g=this.profilerTrace.getResources();return n.forEach((e=>{const r=new Sr(e,d,0,c,g[e.resourceId],this.shouldRecordExpandedTimeStamps,void 0,this.shouldRecordFrameCounts,this.logger);o.push(r)})),l?P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:void 0}):(this.builtStack=o,P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),r,this.logger,!0)}retrieveStack(){const e=P.generateOperationResult({didOperationSucceed:!1,result:new Cr(this.logger)});return f.startNew("RetrieveStack",(()=>this.buildStackCalled?void 0===this.builtStack?(this.logger.logExecutionStackNeverBuilt(),P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:new Cr(this.logger)})):(this.buildStackCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.builtStack})):(this.logger.logRetrieveStackCalledBeforeBuildStack(),P.generateOperationResult({didOperationSucceed:!1,result:new Cr(this.logger)}))),e,this.logger,!0).getResult()}constructor(e,r,t,s){this.profilerTrace=e,this.logger=r,this.shouldRecordExpandedTimeStamps=t,this.shouldRecordFrameCounts=s,this.buildStackCalled=!1,this.builtStack=void 0}}class Ir{buildStacks(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("BuildStacks",(()=>{this.buildStacksCalled=!0;const r=e.getSamples();let t=this.sampleSorter.sortSamples(r);const s=e.getProfilerProperties().profilingIntervalInMs;return null==s||this.shouldKeepSamplesOutsideOfProfilingInterval||(this.sampleFilterer.filterSamples(t,s),t=this.sampleFilterer.retrieveFilteredSamples()),this.builtExecutionStacks=this.samplesToStacks(t,e),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveStacks(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveStacks",(()=>this.buildStacksCalled?void 0===this.builtExecutionStacks?P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:[]}):(this.buildStacksCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.builtExecutionStacks})):(this.logger.logRetrieveStacksCalledBeforeBuildStacks(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}samplesToStacks(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ConvertSamplesToStacks",(()=>{const t=[],s=new vr(r,this.logger,this.shouldRecordExpandedTimeStamps,this.shouldRecordFrameCounts);return e.forEach((e=>{s.buildStack(e),t.push(s.retrieveStack())})),P.generateOperationResult({didOperationSucceed:!0,result:t})}),t,this.logger).getResult()}constructor(e,r,t,s,o,i){this.sampleSorter=e,this.sampleFilterer=r,this.shouldKeepSamplesOutsideOfProfilingInterval=t,this.shouldRecordExpandedTimeStamps=s,this.logger=o,this.shouldRecordFrameCounts=i,this.buildStacksCalled=!1,this.builtExecutionStacks=void 0}}class Or{sortSamples(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("SortSamples",(()=>{const r=e.sort(this.sortSampleByTimestamp);return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e,this.sortSampleByTimestamp=(e,r)=>{const t=P.generateOperationResult({didOperationSucceed:!1,result:0});return f.startNew("CustomSampleSort",(()=>e.timestamp>r.timestamp?P.generateOperationResult({didOperationSucceed:!0,result:1}):r.timestamp>e.timestamp?P.generateOperationResult({didOperationSucceed:!0,result:-1}):P.generateOperationResult({didOperationSucceed:!0,result:0})),t,this.logger,!0).getResult()}}}class br{removeChildNode(e){}addChildNode(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getFrame(){return ve}getChildrenNodes(){return[]}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getResourceName(){return Oe}getParentNode(){}setParentNode(e){}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}constructor(e){this.logger=e,this.logger.logNullFrameNodeCreated()}}class kr{getNext(){return this.logger.logNullCallTreeIteratorImplGetNextInvoked(),new br(this.logger)}hasMore(){return this.logger.logNullCallTreeIteratorImplHasMoreInvoked(),!1}constructor(e){this.logger=e}}class Nr{filterFrames(){this.logger.logNullCallTreeFramesFiltererFilterFramesInvoked()}retrieveFrameFilteredCallTree(){return this.logger.logNullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked(),new Mr(this.logger)}constructor(e){this.logger=e}}class Mr{getReconstructibleTreeIterator(){return this.logger.logNullCallTreeGetReconstructableTreeIteratorInvoked(),new kr(this.logger)}getDepthFirstIterator(){return this.logger.logNullCallTreeDepthFirstIteratorInvoked(),new kr(this.logger)}getNodesToMergeIterator(){return this.logger.logNullCallTreeLeftMostNodesIteratorInvoked(),new kr(this.logger)}getRightMostNodesIterator(){return this.logger.logNullCallTreeRightMostNodesIteratorInvoked(),new kr(this.logger)}getTotalExecutionTimeInMs(){return this.logger.logNullCallTreeGetTotalExecutionTimeInvoked(),-1}getCustomProperties(){return this.logger.logNullCallTreeGetCustomPropertiesInvoked(),{}}getTreeId(){return Ee}getFramesFilterer(){return this.logger.logNullCallTreeGetFramesFiltererInvoked(),new Nr(this.logger)}constructor(e){this.logger=e}}function xr(e,r){return e.name===r.name&&e.resourceId===r.resourceId&&e.line===r.line&&e.column===r.column}class yr{removeChildNode(e){}addChildNode(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return 0}getFrame(){return ve}getChildrenNodes(){return[]}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getResourceName(){return Oe}getParentNode(){return this.parentNode}setParentNode(e){this.parentNode=e}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}constructor(){}}class Rr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;this.nodesToIterate.pop();const r=e.getChildrenNodes();for(let e=r.length-1;e>=0;e-=1)xr(r[e].getFrame(),ve)||this.nodesToIterate.push(r[e]);return e}hasMore(){return 0!==this.nodesToIterate.count()}constructor(e){this.nodesToIterate=H.createStack(),e instanceof yr||this.nodesToIterate.push(e)}}class Fr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;const r=e.getChildrenNodes();return r.length>1&&this.logger.logExpectedOnlyOneNodePerLevelInCallTree(),this.nodesToIterate.queue(r[0]),this.nodesToIterate.dequeue(),e}hasMore(){return void 0!==this.nodesToIterate.peek()}constructor(e,r){this.logger=r,this.nodesToIterate=V.createQueue(),this.nodesToIterate.queue(e)}}class Er{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;const r=e.getChildrenNodes();return r.length>0&&this.nodesToIterate.queue(r[r.length-1]),this.nodesToIterate.dequeue(),e}hasMore(){return void 0!==this.nodesToIterate.peek()}constructor(e){this.nodesToIterate=V.createQueue(),this.nodesToIterate.queue(e)}}class Wr{filterFrames(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew("FilterCallTreeFrames",(()=>{const r=this.callTree.getDepthFirstIterator();let t;for(;r.hasMore();)t=r.getNext(),void 0!==t&&this.filterFrame(t,e);return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger).getResult()}filterFrame(e,r){if(e.getTotalExecutionTimeInMs()<=r){const r=e.getParentNode();if(!r)return void this.logger.logFilterFrameWithNoParent();r.removeChildNode(e)}}constructor(e,r){this.callTree=e,this.logger=r}}class _r{addChildNode(e){}getFrame(){return Ie}getChildrenNodes(){return[]}removeChildNode(e){}getResourceName(){return Oe}getParentNode(){}setParentNode(e){}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}}class wr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;this.nodesToIterate.pop();const r=e.getChildrenNodes();r.length>0&&this.nodesToIterate.push(new _r);for(let e=r.length-1;e>=0;e-=1)xr(r[e].getFrame(),ve)||this.nodesToIterate.push(r[e]);return e}hasMore(){return 0!==this.nodesToIterate.count()}constructor(e){this.nodesToIterate=H.createStack(),e instanceof yr||this.nodesToIterate.push(e)}}class Ur{getReconstructibleTreeIterator(){return f.startNew("GetReconstructibleTreeIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new wr(this.rootNode)})),this.fallbackResult,this.logger).getResult()}getDepthFirstIterator(){return f.startNew("GetDepthFirstIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new Rr(this.rootNode)})),this.fallbackResult,this.logger).getResult()}getNodesToMergeIterator(){return f.startNew("GetCallTreeLeftMostNodesIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new Fr(this.rootNode,this.logger)})),this.fallbackResult,this.logger,!0).getResult()}getRightMostNodesIterator(){return f.startNew("GetCallTreeRightMostNodesIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new Er(this.rootNode)})),this.fallbackResult,this.logger,!0).getResult()}getTotalExecutionTimeInMs(){return this.rootNode.getTotalExecutionTimeInMs()}getCustomProperties(){return this.customProperties}getTreeId(){return this.callTreeId}getFramesFilterer(){return new Wr(this,this.logger)}constructor(e,r,t,s){this.rootNode=e,this.customProperties=r,this.callTreeId=t,this.logger=s,this.fallbackResult=P.generateOperationResult({didOperationSucceed:!1,result:new kr(this.logger)})}}class Lr{convertStackToCallTree(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ConvertStackToCallTree",(()=>(this.convertedCallTree=this.buildCallTree(e),this.isConvertCalled=!0,P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger,!0)}retrieveCallTree(){const e=P.generateOperationResult({didOperationSucceed:!1,result:new Mr(this.logger)});return f.startNew("RetrieveCallTree",(()=>this.isConvertCalled?(this.isConvertCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.convertedCallTree})):(this.logger.logConvertStackToCallTreeNeverCalled(),P.generateOperationResult({didOperationSucceed:!1,result:new Mr(this.logger)}))),e,this.logger,!0).getResult()}buildCallTree(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new Mr(this.logger)});return f.startNew("BuildCallTree",(r=>{const t=[];for(;;){const r=e.peek();if(void 0===r)break;t.unshift(r),e.pop()}if(0===t.length)return r.addLog("No profiler frames were extracted. Returning null call tree"),P.generateOperationResult({didOperationSucceed:!0,result:new pr});let s=0;t.forEach(((e,r)=>{if(s=r+1,s===t.length)return;const o=t[s];e.addChildNode(o)}));const o=t[0],i=Z.getGuidGenerator().generateGuid();return P.generateOperationResult({didOperationSucceed:!0,result:new Ur(o,this.customProperties,i,this.logger)})}),r,this.logger,!0).getResult()}constructor(e,r){this.customProperties=e,this.logger=r,this.isConvertCalled=!1,this.convertedCallTree=new Mr(this.logger)}}class Br{convertStacksToCallTrees(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ConvertStacksToCallTrees",(()=>(this.convertStacksCalled=!0,this.customProperties=e,this.callTrees=this.convertToCallTrees(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,this.logger)}retrieveConvertedCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveConvertedCallTrees",(()=>this.convertStacksCalled?(this.convertStacksCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.callTrees})):(this.logger.logConvertStacksToCallTreesNeverCalled(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}convertToCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ConvertToCallTrees",(()=>{const r=[],t=new Lr(this.customProperties,this.logger);return e.forEach((e=>{t.convertStackToCallTree(e),r.push(t.retrieveCallTree())})),P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e,this.convertStacksCalled=!1,this.callTrees=[],this.customProperties={}}}function Ar(e,r,t){const s=P.generateOperationResult({didOperationSucceed:!1,result:{wasMergeSuccessful:!1,mergedCallTree:e}});return f.startNew("MergeTwoTrees",(t=>{const s=e.getRightMostNodesIterator(),o=r.getNodesToMergeIterator();if(!s.hasMore()||!o.hasMore()){const r="CurrentCallTreeIteratorEmptyProperty";t.addProperty(r,!s.hasMore());const i="CallTreeToMergeIteratorEmptyProperty";return t.addProperty(i,!o.hasMore()),P.generateOperationResult({didOperationSucceed:!0,result:{mergedCallTree:e,wasMergeSuccessful:!1}})}let i,a,l,n=0,d=!0;for(;s.hasMore()&&o.hasMore();){if(i=s.getNext(),a=o.getNext(),void 0===i||void 0===a||!xr(i.getFrame(),a.getFrame())){d=!1;break}{const e=i.getTotalExecutionTimeInMs()+(a.getLastObservedTimestamp()-i.getLastObservedTimestamp());i.setTotalExecutionTime(e),i.setLastObservedTimestamp(a.getLastObservedTimestamp()),i.addCount(a.getCount()),l=i,n+=1}}if(t.addProperty("MergeLength",n),0===n){const r="UnableToMerge";return t.addProperty(r,!0),P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!1,mergedCallTree:e}})}if(void 0===i&&void 0===a){const r="FullMerge";return t.addProperty(r,!0),P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!0,mergedCallTree:e}})}if(s.hasMore()&&!o.hasMore()&&void 0!==l){const r="TallerLeftCallTree";return t.addProperty(r,!0),l.addChildNode(new yr),P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!0,mergedCallTree:e}})}const c=void 0!==i&&void 0!==a&&!xr(i.getFrame(),a.getFrame())&&void 0!==l,g=!s.hasMore()&&o.hasMore()&&void 0!==l;if(c||g){if(c){const e="PartialMergeOfHeightBalancedCallTrees";t.addProperty(e,!0)}if(g){const e="TallerRightCallTreeMerge";t.addProperty(e,!0),d&&(a=o.getNext())}void 0!==l&&void 0!==a&&l.addChildNode(a)}return P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:n>0,mergedCallTree:e}})}),s,t,!0).getResult()}class Jr{mergeCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("MergeCallTrees",(()=>{if(e.length<2)return this.mergedCallTrees=e,P.generateOperationResult({didOperationSucceed:!0,result:void 0});this.didMergeCallTreesGetCalled=!0,this.mergedCallTrees=[];let r=0,t=1,s=!1;for(;t<e.length;){const o=e[r];s=Ar(o,e[t],this.logger).wasMergeSuccessful,s||(this.mergedCallTrees.push(o),r=t),t+=1}return s?this.mergedCallTrees.push(e[r]):this.mergedCallTrees.push(e[t-1]),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveMergedCallTrees(){return this.didMergeCallTreesGetCalled?(this.didMergeCallTreesGetCalled=!1,this.mergedCallTrees):[]}constructor(e){this.logger=e,this.mergedCallTrees=[],this.didMergeCallTreesGetCalled=!1}}class $r{filterCallTrees(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew("FilterCallTrees",(t=>(this.filterCallTreesCalled=!0,this.filteredCallTreesToReturn=[],t.addProperty("FilteringThresholdInMs",r),t.addProperty("NumberOfCallTreesPresent",e.length),e.forEach((e=>{e.getTotalExecutionTimeInMs()>r&&this.filteredCallTreesToReturn.push(e)})),t.addProperty("NumberOfCallTreesFiltered",this.filteredCallTreesToReturn.length),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,this.logger).getResult()}retrieveFilteredCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveFilteredCallTrees",(()=>this.filterCallTreesCalled?(this.filterCallTreesCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.filteredCallTreesToReturn})):P.generateOperationResult({didOperationSucceed:!1,result:[]})),e,this.logger).getResult()}constructor(e){this.logger=e,this.filteredCallTreesToReturn=[],this.filterCallTreesCalled=!1}}class Dr{filterSamples(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("FilterSamples",(()=>{if(this.didFilterSamplesGetCalled=!0,this.filteredSamples=[],0===e.length)return this.logger.logEmptySamplesArrayPassedToFilter(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const t=e[0];for(const s of e){if(s.timestamp-t.timestamp>r)break;this.filteredSamples.push(s)}return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),t,this.logger)}retrieveFilteredSamples(){return this.didFilterSamplesGetCalled?(this.didFilterSamplesGetCalled=!1,this.filteredSamples):[]}constructor(e){this.logger=e,this.didFilterSamplesGetCalled=!1,this.filteredSamples=[]}}class zr{serializeCallTree(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SeriallizeCallTree",(()=>{this.serializedCallTree={serializedFrames:[],totalExecutionTimeForTreeInMs:0,propertyBag:{}};const r=this.shouldMakeSerializedCallTreesFullyReconstructible?e.getReconstructibleTreeIterator():e.getDepthFirstIterator();let t;for(;r.hasMore();)t=r.getNext(),void 0!==t&&this.serializedCallTree.serializedFrames.push(this.onVisit(t));return this.serializedCallTree.totalExecutionTimeForTreeInMs=e.getTotalExecutionTimeInMs(),this.serializedCallTree.propertyBag=e.getCustomProperties(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}onVisit(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:Me});return f.startNew("VisitNodeInCallTree",(()=>{var r;const t={obfuscatedName:null!==(r=e.getFrame().name)&&void 0!==r?r:"",startTimeInMs:e.getStartTimeInMs(),frameOnlyRunTimeInMs:e.getFrameOnlyExecutionTimeInMs(),subTreeRunTimeInMs:e.getSubTreeExecutionTimeInMs(),totalExecutionTimeInMs:e.getTotalExecutionTimeInMs(),hasChildrenNodes:e.getChildrenNodes().length>0,resourceInfo:{resourceName:this.shouldCompressSerializedCallTrees?this.resourceUrlKeyRetriever(e.getResourceName()):e.getResourceName(),lineNo:e.getFrame().line,columnNo:e.getFrame().column},frameOnlyCount:e.getFrameOnlyCount(),totalCount:e.getCount()};return P.generateOperationResult({didOperationSucceed:!0,result:t})}),r,this.logger,!1).getResult()}retrieveSerializedTree(){return this.serializedCallTree}constructor(e,r,t,s){this.shouldMakeSerializedCallTreesFullyReconstructible=e,this.shouldCompressSerializedCallTrees=r,this.resourceUrlKeyRetriever=t,this.logger=s,this.serializedCallTree=void 0}}class Vr{serializeCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ue,(()=>{const r=new zr(this.shouldMakeSerializedCallTreesFullyReconstructible,this.shouldCompressSerializedCallTrees,this.resourceUrlKeyRetriever.bind(this),this.logger),t=e.map((e=>(r.serializeCallTree(e),r.retrieveSerializedTree())));return this.serializationResult={serializedCallTrees:t,resourceUrlsCompressionDictionary:Array.from(this.resourceUrlsCompressionDictionary,(([e,r])=>({url:e,index:r})))},P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveSerializedTrees(){return this.serializationResult}resourceUrlKeyRetriever(e){if(this.resourceUrlsCompressionDictionary.has(e))return this.resourceUrlsCompressionDictionary.get(e);const r=this.resourceUrlKeyIndex.toString();return this.resourceUrlsCompressionDictionary.set(e,r),this.resourceUrlKeyIndex++,r}constructor(e,r,t){this.shouldMakeSerializedCallTreesFullyReconstructible=e,this.shouldCompressSerializedCallTrees=r,this.logger=t,this.resourceUrlKeyIndex=0,this.resourceUrlsCompressionDictionary=new Map,this.serializationResult={serializedCallTrees:[],resourceUrlsCompressionDictionary:[]}}}class Gr{processTrace(e){this.profilerTraceTransformer.transform(e);const r=this.profilerTraceTransformer.retrieveCallTrees();this.serializer.serializeCallTrees(r),this.serializedCallTrees=this.serializer.retrieveSerializedTrees()}retrieveSerializedCallTrees(){return this.serializedCallTrees}constructor(e,r){this.profilerTraceTransformer=e,this.serializer=r,this.serializedCallTrees={resourceUrlsCompressionDictionary:[],serializedCallTrees:[]}}}class qr{isWebWorkerAPIAvailable(){return!!this.windowPropertyChecker.hasProperty("Worker")}constructor(e){this.windowPropertyChecker=e}}var jr,Hr,Qr;!function(e){e[e.ProcessTrace=0]="ProcessTrace",e[e.TraceProcessingComplete=1]="TraceProcessingComplete",e[e.ErrorEncounteredInWorker=2]="ErrorEncounteredInWorker"}(jr||(jr={}));class Kr{startWorker(e){if(this.workerStarted)return this.logger.logWebWorkerAlreadyStarted(),!0;const r=new Blob([`try{importScripts('${encodeURI(e)}');}catch(e){self.postMessage({id: ${jr.ErrorEncounteredInWorker}, data: {error: e}}); }`],{type:"application/javascript"}),t=new Worker(URL.createObjectURL(r));return t?(this.worker=t,this.workerStarted=!0,this.worker.addEventListener("message",this.onMessageReceived),this.worker.onerror=this.errorHandler,!0):(this.logger.logUnableToBootWebWorker(),!1)}processTrace(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ProfilerTraceProcessingWorkerImplProcessTrace",(()=>{if(!this.worker)return this.logger.logWorkerInstanceNotFound(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(this.workerCurrentlyProcessingTrace)return this.pendingTracesToProcess.queue(e),P.generateOperationResult({didOperationSucceed:!0,result:void 0});this.workerCurrentlyProcessingTrace=!0,this.currentTraceBeingProcessed=e;const r={id:jr.ProcessTrace,data:e.traceProcessingInfo};return this.worker.postMessage(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}terminateWorker(){this.worker?(this.worker.terminate(),this.worker=void 0,this.workerStarted=!1,this.logger.logWebWorkerTerminated()):this.logger.logWorkerInstanceNotFound()}handleLogMessageFromWorker(e){this.logMessageProcessor.processLogMessage(e)}getDeObfuscationRequestPropertiesAndQueryParams(){const e=new qe(this.logger);return[e.extractCustomProperties(this.jsCPUProfilingPackageInitOptions.deObfuscationRequestBodyPropertiesRetriever),e.extractCustomProperties(this.jsCPUProfilingPackageInitOptions.deObfuscationRequestQueryParamsRetriever)]}processNextStoredProfilerTraceIfAny(){if(this.pendingTracesToProcess.length()>0){const e=this.pendingTracesToProcess.peek();void 0!==e&&(this.processTrace(e),this.pendingTracesToProcess.dequeue())}}constructor(e,r,t){this.jsCPUProfilingPackageInitOptions=e,this.logMessageProcessor=r,this.logger=t,this.errorHandler=e=>{const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ProfilerTraceProcessingWorkerImplErrorHandler",(()=>{if(this.logger.logWebWorkerError(e.message),null==this.currentTraceBeingProcessed)return this.logger.logCurrentTraceBeingProcessedNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==this.currentTraceBeingProcessed.traceProcessingErrorCallback)return this.logger.logWebWorkerErrorCallbackNotRegistered(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==this.currentTraceBeingProcessed.traceProcessingInfo)return this.logger.logWebWorkerTraceProcessingInfoMissingToReturnOnError(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const[r,t]=this.getDeObfuscationRequestPropertiesAndQueryParams();return this.currentTraceBeingProcessed.traceProcessingErrorCallback(this.currentTraceBeingProcessed.traceProcessingInfo,r,t,this.currentTraceBeingProcessed.callTreeCustomPropertiesRetrievers,this.currentTraceBeingProcessed.callTreeCustomFilterers),this.workerCurrentlyProcessingTrace=!1,this.currentTraceBeingProcessed=void 0,this.processNextStoredProfilerTraceIfAny(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)},this.onMessageReceived=e=>{const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(me,(r=>{const t=e.data;if(!("id"in t))return this.logger.logIdNotFoundInMessageFromWorker(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(!("data"in t))return this.logger.logDataNotFoundInMessageFromWorker(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(r.addProperty("MessageReceived",t.id),null==this.currentTraceBeingProcessed)return this.logger.logCurrentTraceBeingProcessedNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});switch(t.id){case jr.TraceProcessingComplete:{const e=t.data;if(!("serializedCallTrees"in e))return this.logger.logSerializedCallTreesMissingInProcessorResult(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(!("logs"in e))return this.logger.logLogsMissingInProcessorResult(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const r=e;if(void 0===this.currentTraceBeingProcessed.traceProcessingCompletionCallback)return this.logger.logUndefinedWebWorkerCompletionCallback(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});r.logs.forEach((e=>{this.handleLogMessageFromWorker(e)}));const[s,o]=this.getDeObfuscationRequestPropertiesAndQueryParams();this.currentTraceBeingProcessed.traceProcessingCompletionCallback(r.serializedCallTrees,s,o,this.currentTraceBeingProcessed.callTreeCustomPropertiesRetrievers,this.currentTraceBeingProcessed.callTreeCustomFilterers,r.resourceUrlsCompressionDictionary)}break;case jr.ErrorEncounteredInWorker:{const e=t.data;if("logs"in e&&e.logs.forEach((e=>{this.handleLogMessageFromWorker(e)})),"error"in e&&this.logger.logErrorFromWorker(e.error),void 0===this.currentTraceBeingProcessed.traceProcessingErrorCallback)return this.logger.logUndefinedErrorCallback(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(void 0===this.currentTraceBeingProcessed.traceProcessingInfo)return this.logger.logUndefinedTraceProcessingInfoToReturnBack(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const[r,s]=this.getDeObfuscationRequestPropertiesAndQueryParams();this.currentTraceBeingProcessed.traceProcessingErrorCallback(this.currentTraceBeingProcessed.traceProcessingInfo,r,s,this.currentTraceBeingProcessed.callTreeCustomPropertiesRetrievers,this.currentTraceBeingProcessed.callTreeCustomFilterers),this.terminateWorker()}break;default:this.logger.logUnknownMessageFromWorker(t.id)}return this.workerCurrentlyProcessingTrace=!1,this.currentTraceBeingProcessed=void 0,this.processNextStoredProfilerTraceIfAny(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)},this.worker=void 0,this.workerStarted=!1,this.pendingTracesToProcess=V.createQueue(),this.workerCurrentlyProcessingTrace=!1,this.currentTraceBeingProcessed=void 0}}class Zr{getProfilerTraceProcessingWorker(e){return new Kr(this.jsCPUProfilingPackageInitOptions,this.logMessageProcessor,this.logger)}constructor(e,r,t){this.jsCPUProfilingPackageInitOptions=e,this.logMessageProcessor=r,this.logger=t}}class Xr{sendCallTreeToService(e,r,t,s){const o=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SendIndividualCallTree",(o=>{o.addProperty("compressedCallTree",this.shouldCompressSerializedCallTrees);let i="";if(this.shouldCompressSerializedCallTrees){const r={resourceUrlsCompressionDictionary:s,serializedCallTree:e,propertyBag:t};i=JSON.stringify(r)}else{const r={serializedCallTree:e,propertyBag:t};i=JSON.stringify(r)}if(this.shouldUseSendBeaconForSendingCallTrees)this.sendBeaconScheduler.sendBeacon({url:r,data:i});else{const e=this.xmlHTTPRequestWrapperFactory.generateXMLHTTPRequestWrapper();e.open("POST",r,!0),e.send(i)}return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),o,this.logger)}constructor(e,r,t,s,o){this.sendBeaconScheduler=e,this.xmlHTTPRequestWrapperFactory=r,this.shouldUseSendBeaconForSendingCallTrees=t,this.shouldCompressSerializedCallTrees=s,this.logger=o}}class Yr{sendCallTrees(e,r,t,s){const o=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SendMultipleCallTrees",(o=>{o.addProperty("compressedCallTrees",this.shouldCompressSerializedCallTrees);let i="";if(this.shouldCompressSerializedCallTrees){const r={resourceUrlsCompressionDictionary:s,serializedCallTrees:e,propertyBag:t};i=JSON.stringify(r)}else{const r={serializedCallTrees:e,propertyBag:t};i=JSON.stringify(r)}if(this.shouldUseSendBeaconForSendingCallTrees)this.sendBeaconScheduler.sendBeacon({url:r,data:i});else{const e=this.xmlHTTPRequestWrapperFactory.generateXMLHTTPRequestWrapper();e.open("POST",r,!0),e.send(i)}return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),o,this.logger)}constructor(e,r,t,s,o){this.sendBeaconScheduler=e,this.xmlHTTPRequestWrapperFactory=r,this.shouldUseSendBeaconForSendingCallTrees=t,this.shouldCompressSerializedCallTrees=s,this.logger=o}}class et{sendCallTreesToService(e,r,t,s,o){const i=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ge,(i=>{i.addProperty("NumberOfCallTreesToSend",e.length);const a=function(e,r){let t=e;return Object.entries(r).forEach(((e,r)=>{0===r?t.includes("?")?t+="&":t+="?":t+="&";const[s,o]=e;t+=`${s}=${o}`})),t}(r,t);return this.shouldSendAllCallTreesFromProfileInASingleRequest?this.sendAllCallTreesInASingleRequest(e,a,s,o):this.sendCallTreesIndividually(e,a,s,o),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),i,this.logger)}sendCallTreesIndividually(e,r,t,s){const o=new Xr(this.sendBeaconScheduler,this.xmlHTTPRequestWrapperFactory,this.shouldUseSendBeaconForSendingCallTrees,this.shouldCompressSerializedCallTrees,this.logger);e.forEach((e=>{o.sendCallTreeToService(e,r,t,s)}))}sendAllCallTreesInASingleRequest(e,r,t,s){new Yr(this.sendBeaconScheduler,this.xmlHTTPRequestWrapperFactory,this.shouldUseSendBeaconForSendingCallTrees,this.shouldCompressSerializedCallTrees,this.logger).sendCallTrees(e,r,t,s)}constructor(e,r,t,s,o,i){this.sendBeaconScheduler=e,this.shouldSendAllCallTreesFromProfileInASingleRequest=r,this.xmlHTTPRequestWrapperFactory=t,this.shouldUseSendBeaconForSendingCallTrees=s,this.shouldCompressSerializedCallTrees=o,this.logger=i}}class rt{filterCallTrees(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew("FilterCallTreesFrames",(()=>(e.forEach((e=>{e.getFramesFilterer(r).filterFrames(r)})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,this.logger).getResult()}constructor(e){this.logger=e}}class tt{getCustomProperties(){return this.logger.logGetCustomPropertiesCalledOnNullJSCPUProfilerTrace(),{}}getResources(){return this.logger.logGetResourcesCalledOnNullJSCPUProfilerTrace(),[]}getFrames(){return this.logger.logGetFramesCalledOnNullJSCPUProfilerTrace(),[]}getStacks(){return this.logger.logGetStacksCalledOnNullJSCPUProfilerTrace(),[]}getSamples(){return this.logger.logGetSamplesCalledOnNullJSCPUProfilerTrace(),[]}getSamplesTrimmed(){return[]}getProfilerTraceStartTimestamp(){return this.logger.logGetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace(),-1}getProfilerProperties(){return this.logger.logGetProfilerPropertiesCalledOnNullJSCPUProfilerTrace(),Ce}getElapsedProfilingTimeInMs(){return this.logger.logElapsedProfilingTimeMissingInTrace(),-1}constructor(e){this.logger=e}}class st{removeQueryParamsFromResourceURLs(e){this.wasRemoveQueryParamsFromResourceURLsCalled=!0;const r=e.getResources(),t=[];r.forEach((e=>{this.urlQueryParamsRemover.removeQueryParams(e),t.push(this.urlQueryParamsRemover.retrieveQueryParamsRemovedURL())})),this.outputProfilerTrace=new Se(e.getCustomProperties(),{samples:e.getSamples(),frames:e.getFrames(),resources:t,stacks:e.getStacks()},e.getProfilerTraceStartTimestamp(),e.getProfilerProperties(),e.getElapsedProfilingTimeInMs())}retrieveQueryParamsRemovedProfile(){return this.wasRemoveQueryParamsFromResourceURLsCalled?(this.wasRemoveQueryParamsFromResourceURLsCalled=!1,this.outputProfilerTrace):(this.logger.logRemoveQueryParamsFromResourceURLsNeverCalled(),new tt(this.logger))}constructor(e,r){this.urlQueryParamsRemover=e,this.logger=r,this.wasRemoveQueryParamsFromResourceURLsCalled=!1,this.outputProfilerTrace=new tt(r)}}class ot{mergeCustomProperties(e){const r={};return e.forEach((e=>{for(const[t,s]of Object.entries(e))r[t]=s})),r}}class it{onProfilerEvent(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("OnProfilerEvent",(r=>null==e?(this.params.logger.logNullOrUndefinedProfilerEvent(),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(r.addProperty("ProfilerEventId",e.eventId),e.eventId===fe.ProfilerStopped?null==e.eventData?this.params.logger.logNullOrUndefinedProfilerTrace():this.onProfilerStopped(e.eventData):this.params.logger.logUnknownProfilerEventId(e.eventId),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.params.logger)}onProfilerStopped(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("OnProfilerStopped",(()=>{const r=e.profilerTrace.getProfilerProperties().profilingIntervalInMs;if(null!=r&&this.params.documentVisibilityChecker.wasDocumentHiddenDuringTimeRange(r)&&!this.params.shouldProcessProfileCapturedInAHiddenDocument)return this.params.logger.logNotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling(),P.generateOperationResult({didOperationSucceed:!0,result:void 0});if(!this.params.shouldProcessProfileCapturedWhileUserIsIdle&&e.documentEventsCountBeforeProfiling&&X()===e.documentEventsCountBeforeProfiling)return this.params.logger.logNotProcessingCapturedTraceDueToUserBeingIdle(),P.generateOperationResult({didOperationSucceed:!0,result:void 0});this.params.shouldKeepQueryParamsInResourceURLs||(this.params.profileResourceURLsQueryParamsRemover.removeQueryParamsFromResourceURLs(e.profilerTrace),e.profilerTrace=this.params.profileResourceURLsQueryParamsRemover.retrieveQueryParamsRemovedProfile()),this.params.shouldLogRawProfilerTrace&&this.params.logger.logProfilerTrace(e.profilerTrace,this.params.profilerTraceLoggingChunkSize);const t=this.params.customPropertiesExtractor.extractCustomProperties(this.params.deObfuscationRequestBodyPropertiesRetriever),s=this.params.customPropertiesExtractor.extractCustomProperties(this.params.deObfuscationRequestQueryParamsRetriever);return this.params.shouldProcessProfileInMainEventLoop?this.useMainEventLoopForProfilerTraceProcessing(e,t,s):this.useWebWorkForProfilerTraceProcessing(e,t,s),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.params.logger)}useMainEventLoopForProfilerTraceProcessing(e,r,t){this.params.shouldSendProfilesForDeobfuscationImmediately?this.processAndSendTrace(e,r,t):this.params.idleTimeJobScheduler.scheduleJobForIdleTime((()=>{this.processAndSendTrace(e,r,t)}))}extractAndMergeCallTreeCustomProperties(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ExtractAndMergeCallTreeCustomProperties",(()=>{const t=new qe(this.params.logger),s=new ot;return e.forEach((e=>{const o=[];r.forEach((r=>{o.push(t.extractCustomPropertiesV2(r,e.serializedFrames[0]))})),o.push(e.propertyBag);const i=s.mergeCustomProperties(o);e.propertyBag=i})),P.generateOperationResult({didOperationSucceed:!0,result:e})}),t,this.params.logger).getResult()}applyCallTreeCustomFiltering(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ApplyCallTreeCustomFilterers",(()=>{let t=e;r.forEach((e=>{t=t.filter((r=>e.filter(r)))}));const s=e.length-t.length;return this.params.logger.logNumberOfCallTreesFiltererByCustomFilterers(s,e.length),P.generateOperationResult({didOperationSucceed:!0,result:t})}),t,this.params.logger).getResult()}useWebWorkForProfilerTraceProcessing(e,r,t){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(pe,(()=>{if(!this.params.webWorkerAPIAvailabilityChecker.isWebWorkerAPIAvailable())return this.params.logger.logWebWorkerAPINotAvailable(),this.useMainEventLoopForProfilerTraceProcessing(e,r,t),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(this.profilerTraceProcessingWorker||(this.profilerTraceProcessingWorker=this.params.profilerTraceProcessingWorkerFactory.getProfilerTraceProcessingWorker(this.params.webWorkerSourceURL)),!this.profilerTraceProcessingWorker.startWorker(this.params.webWorkerSourceURL))return this.useMainEventLoopForProfilerTraceProcessing(e,r,t),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const s={traceProcessingInfo:{trace:e.profilerTrace,shouldKeepSamplesOutsideOfProfilingInterval:this.params.shouldKeepSamplesOutsideOfProfilingInterval,shouldRecordExpandedTimeStamps:this.params.shouldRecordExpandedTimeStamps,callTreeFilteringThresholdInMs:this.params.callTreeFilteringThresholdInMs,frameTotalExecutionTimeFilteringThresholdInMs:this.params.frameTotalExecutionTimeFilteringThresholdInMs,operationLogMessageFilteringCriteria:this.params.operationLogMessageFilteringCriteria,traceId:this.profilerTraceIdNumber,shouldMakeSerializedCallTreesFullyReconstructible:this.params.shouldMakeSerializedCallTreesFullyReconstructible,shouldRecordFrameCounts:this.params.shouldRecordFrameCounts,shouldCompressSerializedCallTrees:this.params.shouldCompressSerializedCallTrees},traceProcessingCompletionCallback:this.webWorkerOnCompleteCallback,traceProcessingErrorCallback:this.webWorkerOnErrorCallback,callTreeCustomPropertiesRetrievers:e.callTreeCustomPropertiesRetrievers,callTreeCustomFilterers:e.callTreeCustomFilterers};return this.profilerTraceIdNumber+=1,this.profilerTraceProcessingWorker.processTrace(s),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),s,this.params.logger)}constructor(e){this.params=e,this.processAndSendTrace=(e,r,t)=>{this.params.traceProcessor.processTrace(e.profilerTrace);const s=this.params.traceProcessor.retrieveSerializedCallTrees();let o=s.serializedCallTrees;o=this.extractAndMergeCallTreeCustomProperties(o,e.callTreeCustomPropertiesRetrievers),e.callTreeCustomFilterers.length>0&&(o=this.applyCallTreeCustomFiltering(o,e.callTreeCustomFilterers)),this.params.serializedCallTreesToJSONStringsConverter.convertToJSONStrings(o);const i=this.params.serializedCallTreesToJSONStringsConverter.retrieveConvertedJSONStrings();this.logSerializedCallTrees(i),this.sendCallTrees(i,r,t,s.resourceUrlsCompressionDictionary)},this.webWorkerOnCompleteCallback=(e,r,t,s,o,i)=>{let a=this.extractAndMergeCallTreeCustomProperties(e,s);o.length>0&&(a=this.applyCallTreeCustomFiltering(a,o)),this.params.serializedCallTreesToJSONStringsConverter.convertToJSONStrings(a);const l=this.params.serializedCallTreesToJSONStringsConverter.retrieveConvertedJSONStrings();this.logSerializedCallTrees(l),this.sendCallTrees(l,r,t,i)},this.webWorkerOnErrorCallback=(e,r,t,s,o)=>{this.useMainEventLoopForProfilerTraceProcessing({profilerTrace:e.trace,callTreeCustomPropertiesRetrievers:s,callTreeCustomFilterers:o},r,t)},this.logSerializedCallTrees=e=>{this.params.shouldLogSerializedCallTrees&&e.forEach((e=>{this.params.logger.logSerializedCallTrees(e)}))},this.sendCallTrees=(e,r,t,s)=>{this.params.shouldSendSerializedCallTreesToServer&&(0!==e.length?this.params.callTreesSender.sendCallTreesToService(e,this.params.deObfuscationInfo.deObfuscationEndpoint,t,r,s):this.params.logger.logNoCallTreesToSend())},this.profilerTraceIdNumber=1}}class at{createObserver(){return new it(this.observerInitParams)}constructor(e){this.observerInitParams=e}}class lt{convertToJSONString(e){this.convertedJSONString=JSON.stringify(this.shouldCompressSerializedCallTrees?this.convertSerializedCallTreeToCompressedCallTree(e):e)}retrieveConvertedJSONString(){if(null==this.convertedJSONString)return this.logger.logConvertToJSONStringWasNeverCalled(),"BadSerializedCallTreeJSONString";const e=this.convertedJSONString;return this.convertedJSONString=void 0,e}convertSerializedCallTreeToCompressedCallTree(e){return{0:e.serializedFrames.map((e=>({0:e.startTimeInMs,1:e.frameOnlyRunTimeInMs,2:e.subTreeRunTimeInMs,3:e.totalExecutionTimeInMs,4:e.obfuscatedName,5:e.hasChildrenNodes,6:{0:e.resourceInfo.resourceName,1:e.resourceInfo.lineNo,2:e.resourceInfo.columnNo},7:e.frameOnlyCount,8:e.totalCount}))),1:e.totalExecutionTimeForTreeInMs,2:e.propertyBag}}constructor(e,r){this.shouldCompressSerializedCallTrees=e,this.logger=r,this.convertedJSONString=void 0}}class nt{convertToJSONStrings(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ConvertSerializedCallTreesToJSONStrings",(()=>(this.convertedJSONStrings=e.map((e=>{const r=new lt(this.shouldCompressSerializedCallTrees,this.logger);return r.convertToJSONString(e),r.retrieveConvertedJSONString()})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r)}retrieveConvertedJSONStrings(){return null==this.convertedJSONStrings?[]:this.convertedJSONStrings}constructor(e,r){this.shouldCompressSerializedCallTrees=e,this.logger=r,this.convertedJSONStrings=[]}}class dt{retrieveProfilerFactory(){const e=P.generateOperationResult({didOperationSucceed:!0,result:new gr(this.logger)});return f.startNew("RetrieveProfilerFactory",(()=>{var e;const r=null!==(e=this.jsCPUProfilingPackageInitOptions.shouldSkipSupportedOSCheck)&&void 0!==e&&e,t=this.getSupportedEnvironmentChecker(r),s=new Qe(this.featureChecker,t,this.logger),o=new lr(this.logger),i=new cr(this.logger);var a;const l={deObfuscationEndpoint:null!==(a=this.jsCPUProfilingPackageInitOptions.deObfuscationEndpoint)&&void 0!==a?a:""},n=new Or(this.logger),d=new Dr(this.logger);var c;const g=null!==(c=this.jsCPUProfilingPackageInitOptions.shouldKeepSamplesOutsideOfProfilingInterval)&&void 0!==c?c:Ne;var u;const m=null!==(u=this.jsCPUProfilingPackageInitOptions.shouldRecordExpandedTimeStamps)&&void 0!==u?u:xe;var p;const h=null!==(p=this.jsCPUProfilingPackageInitOptions.shouldRecordFrameCounts)&&void 0!==p&&p;var T;const f=null!==(T=this.jsCPUProfilingPackageInitOptions.shouldLogRawProfilerTrace)&&void 0!==T&&T,S=this.jsCPUProfilingPackageInitOptions.profilerTraceLoggingChunkSize||30,C=new Ir(n,d,g,m,this.logger,h),v=new Br(this.logger),O=new Tr(C,v,this.logger),k=new Jr(this.logger),N=new $r(this.logger);var M;const x=null!==(M=this.jsCPUProfilingPackageInitOptions.callTreeFilteringThresholdInMs)&&void 0!==M?M:50;var y;const R=null!==(y=this.jsCPUProfilingPackageInitOptions.frameTotalExecutionTimeFilteringThresholdInMs)&&void 0!==y?y:0;var E;const W=null!==(E=this.jsCPUProfilingPackageInitOptions.shouldMakeSerializedCallTreesFullyReconstructible)&&void 0!==E?E:Ue,_=new rt(this.logger),U=new hr(O,k,N,x,_,R,this.logger);var L;const B=null!==(L=this.jsCPUProfilingPackageInitOptions.shouldCompressSerializedCallTrees)&&void 0!==L&&L,A=new Vr(W,B,this.logger),$=F.getIdleTimeJobScheduler(),D=w.getDocumentVisibilityChecker();var z;const V=null!==(z=this.jsCPUProfilingPackageInitOptions.shouldProcessProfileCapturedInAHiddenDocument)&&void 0!==z?z:ke;var G;const q=null!==(G=this.jsCPUProfilingPackageInitOptions.shouldSendProfilesForDeobfuscationImmediately)&&void 0!==G?G:We,j=new Gr(U,A);var H;const K=null!==(H=this.jsCPUProfilingPackageInitOptions.useMainEventLoopForProfilerTraceProcessing)&&void 0!==H?H:ye,Z=Q.getWindowPropertyChecker(),X=new qr(Z),Y=J.getSendBeaconScheduler();var ee;const re=null!==(ee=this.jsCPUProfilingPackageInitOptions.shouldSendAllCallTreesFromProfileInASingleRequest)&&void 0!==ee?ee:Re;var te;const se=null===(te=this.jsCPUProfilingPackageInitOptions.shouldUseSendBeaconForSendingCallTrees)||void 0===te||te,oe=new b,ie=new et(Y,re,oe,se,B,this.logger),ae=new Zr(this.jsCPUProfilingPackageInitOptions,this.logMessageProcessor,this.logger);var le;const ne=null!==(le=this.jsCPUProfilingPackageInitOptions.profilerTraceProcessingWebWorkerSourceURL)&&void 0!==le?le:"",de=this.jsCPUProfilingPackageInitOptions.deObfuscationRequestBodyPropertiesRetriever,ce=this.jsCPUProfilingPackageInitOptions.deObfuscationRequestQueryParamsRetriever,ge=new qe(this.logger);var ue,me;const pe={shouldAlwaysLogOperationsData:null!==(ue=this.jsCPUProfilingPackageInitOptions.shouldAlwaysLogOperationsData)&&void 0!==ue?ue:Fe,durationThresholdInMsToLogOperationData:null!==(me=this.jsCPUProfilingPackageInitOptions.durationThresholdInMsToLogOperationData)&&void 0!==me?me:50,listOfOperationNamesToAlwaysLog:he};var Te;const fe=null!==(Te=this.jsCPUProfilingPackageInitOptions.shouldProcessProfileCapturedWhileUserIsIdle)&&void 0!==Te?Te:_e;var Pe;const Se=null!==(Pe=this.jsCPUProfilingPackageInitOptions.shouldKeepQueryParamsInResourceURLs)&&void 0!==Pe?Pe:we;var Ce;const ve=null===(Ce=this.jsCPUProfilingPackageInitOptions.shouldLogSerializedCallTrees)||void 0===Ce||Ce;var Ie;const Oe=null===(Ie=this.jsCPUProfilingPackageInitOptions.shouldSendSerializedCallTreesToServer)||void 0===Ie||Ie,be=(new I).getURLQueryParamsRemover(),Me=new st(be,this.logger),Ee=new nt(B,this.logger),Le=new at({idleTimeJobScheduler:$,documentVisibilityChecker:D,shouldProcessProfileCapturedInAHiddenDocument:V,traceProcessor:j,shouldProcessProfileInMainEventLoop:K,webWorkerAPIAvailabilityChecker:X,deObfuscationInfo:l,callTreesSender:ie,webWorkerSourceURL:ne,profilerTraceProcessingWorkerFactory:ae,shouldKeepSamplesOutsideOfProfilingInterval:g,shouldRecordExpandedTimeStamps:m,callTreeFilteringThresholdInMs:x,frameTotalExecutionTimeFilteringThresholdInMs:R,deObfuscationRequestBodyPropertiesRetriever:de,deObfuscationRequestQueryParamsRetriever:ce,customPropertiesExtractor:ge,operationLogMessageFilteringCriteria:pe,shouldSendProfilesForDeobfuscationImmediately:q,shouldProcessProfileCapturedWhileUserIsIdle:fe,shouldKeepQueryParamsInResourceURLs:Se,profileResourceURLsQueryParamsRemover:Me,shouldMakeSerializedCallTreesFullyReconstructible:W,shouldRecordFrameCounts:h,shouldLogRawProfilerTrace:f,profilerTraceLoggingChunkSize:S,shouldLogSerializedCallTrees:ve,shouldSendSerializedCallTreesToServer:Oe,shouldCompressSerializedCallTrees:B,serializedCallTreesToJSONStringsConverter:Ee,logger:this.logger}),Be=new He(s,o,i,Le,this.jsCPUProfilingPackageInitOptions,this.logger);return P.generateOperationResult({didOperationSucceed:!0,result:Be})}),e,this.logger).getResult()}getSupportedEnvironmentChecker(e){return rr.build(e,this.logger)}constructor(e,r,t,s){this.featureChecker=e,this.jsCPUProfilingPackageInitOptions=r,this.logMessageProcessor=t,this.logger=s}}class ct{retrieveProfilerFactory(){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new gr(this.logger)}constructor(e){this.logger=e}}!function(e){e[e.IdMissing=0]="IdMissing",e[e.DataMissing=1]="DataMissing",e[e.MissingProfilerImplementation=2]="MissingProfilerImplementation",e[e.FailingValidationsInProfilerFactory=3]="FailingValidationsInProfilerFactory",e[e.WindowMissingInJSEnvironment=4]="WindowMissingInJSEnvironment",e[e.WindowPropertyNameChecked=5]="WindowPropertyNameChecked",e[e.UserAgentToParseChromiumMajorVersionNumber=6]="UserAgentToParseChromiumMajorVersionNumber",e[e.ChromeNotPresentInUserAgent=7]="ChromeNotPresentInUserAgent",e[e.UnableToIsolateChromeInformationFromUserAgent=8]="UnableToIsolateChromeInformationFromUserAgent",e[e.UnableToExtractChromeVersionInformation=9]="UnableToExtractChromeVersionInformation",e[e.UnableToParseChromeMajorVersionString=10]="UnableToParseChromeMajorVersionString",e[e.ParsedChromiumMajorVersionNumber=11]="ParsedChromiumMajorVersionNumber",e[e.UserAgentToCheckForChromiumBrowser=12]="UserAgentToCheckForChromiumBrowser",e[e.EmptyUserAgentString=13]="EmptyUserAgentString",e[e.BrowserUserAgentNotChromiumBased=14]="BrowserUserAgentNotChromiumBased",e[e.UserAgentSpoofedToBeChromium=15]="UserAgentSpoofedToBeChromium",e[e.BrowserNotChromiumBasedBrowser=16]="BrowserNotChromiumBasedBrowser",e[e.UnsupportedChromiumMajorVersionNumber=17]="UnsupportedChromiumMajorVersionNumber",e[e.ProfilerInitOptionsNullOrUndefined=18]="ProfilerInitOptionsNullOrUndefined",e[e.SamplingIntervalIsLessThanOrEqualToZero=19]="SamplingIntervalIsLessThanOrEqualToZero",e[e.SamplingIntervalLessThanMinimumSupportedSamplingInterval=20]="SamplingIntervalLessThanMinimumSupportedSamplingInterval",e[e.UnsupportedBrowser=21]="UnsupportedBrowser",e[e.UnsupportedOperatingSystem=22]="UnsupportedOperatingSystem",e[e.JSSelfProfilingAPIUnavailable=23]="JSSelfProfilingAPIUnavailable",e[e.RetrievedUserAgent=24]="RetrievedUserAgent",e[e.NullJSCPUProfilerStartCalled=25]="NullJSCPUProfilerStartCalled",e[e.NullJSCPUProfilerStopCalled=26]="NullJSCPUProfilerStopCalled",e[e.NullOrUndefinedProfilerInitOptions=27]="NullOrUndefinedProfilerInitOptions",e[e.MaxBufferSizeFixedToDefaultSize=28]="MaxBufferSizeFixedToDefaultSize",e[e.MaxBufferSizeWasNotFixedBeforeRetrieval=29]="MaxBufferSizeWasNotFixedBeforeRetrieval",e[e.ProfilerNotPresentInJSEnvironment=30]="ProfilerNotPresentInJSEnvironment",e[e.SamplingIntervalValidationCheckFailed=31]="SamplingIntervalValidationCheckFailed",e[e.MaxBufferValidationFailed=32]="MaxBufferValidationFailed",e[e.MaxBufferSizeNotSpecified=33]="MaxBufferSizeNotSpecified",e[e.MaxBufferSizeLessThanOrEqualToZero=34]="MaxBufferSizeLessThanOrEqualToZero",e[e.ManualProfilerValidationFailed=35]="ManualProfilerValidationFailed",e[e.ProfilingIntervalValidationFailed=36]="ProfilingIntervalValidationFailed",e[e.ProfilingIntervalNullOrUndefined=37]="ProfilingIntervalNullOrUndefined",e[e.ProfilingIntervalLessThanOrEqualToZero=38]="ProfilingIntervalLessThanOrEqualToZero",e[e.ProfilingIntervalLessThanSamplingInterval=39]="ProfilingIntervalLessThanSamplingInterval",e[e.TimedProfilerValidationFailed=40]="TimedProfilerValidationFailed",e[e.IdleIntervalValidationFailed=41]="IdleIntervalValidationFailed",e[e.IdleIntervalIsNullOrUndefined=42]="IdleIntervalIsNullOrUndefined",e[e.IdleIntervalIsLessThanOrEqualToZero=43]="IdleIntervalIsLessThanOrEqualToZero",e[e.PostProfilerStartCallbackSpecified=44]="PostProfilerStartCallbackSpecified",e[e.PreProfilerStartCheckFailed=45]="PreProfilerStartCheckFailed",e[e.MaxBufferSizeNotFixed=46]="MaxBufferSizeNotFixed",e[e.ProfilerAlreadyStarted=47]="ProfilerAlreadyStarted",e[e.ProfilerStartSucceeded=48]="ProfilerStartSucceeded",e[e.InvokingPostProfilerStartCallback=49]="InvokingPostProfilerStartCallback",e[e.PostProfilerStopCallbackSpecified=50]="PostProfilerStopCallbackSpecified",e[e.ProfilerInstanceIsUndefined=51]="ProfilerInstanceIsUndefined",e[e.ProfilerStopPromiseResolved=52]="ProfilerStopPromiseResolved",e[e.ProfilerStopPromiseRejected=53]="ProfilerStopPromiseRejected",e[e.PostProfilerStopCallbackInvoked=54]="PostProfilerStopCallbackInvoked",e[e.PostTimedStartProfilerStartCallbackInvoked=55]="PostTimedStartProfilerStartCallbackInvoked",e[e.ProfilingIntervalIsUndefined=56]="ProfilingIntervalIsUndefined",e[e.TimerJobToStopProfilerSet=57]="TimerJobToStopProfilerSet",e[e.TimedProfilerStopCallbackInvoked=58]="TimedProfilerStopCallbackInvoked",e[e.TimedProfilerIsBeingStoppedManually=59]="TimedProfilerIsBeingStoppedManually",e[e.ProfilerStartPromiseCreated=60]="ProfilerStartPromiseCreated",e[e.ProfilerStopGoingToBeInvoked=61]="ProfilerStopGoingToBeInvoked",e[e.SamplingIntervalUsedForStartingProfiler=62]="SamplingIntervalUsedForStartingProfiler",e[e.MaxBufferSize=63]="MaxBufferSize",e[e.NoProfilerInstanceBuilt=64]="NoProfilerInstanceBuilt",e[e.ProfilerInitOptionsValidationFailed=65]="ProfilerInitOptionsValidationFailed",e[e.UnableToFixUpProfilerInitOptions=66]="UnableToFixUpProfilerInitOptions",e[e.ProfilingIsNotEnabled=67]="ProfilingIsNotEnabled",e[e.ProfilingIsNotSupportedEnvironment=68]="ProfilingIsNotSupportedEnvironment",e[e.FeatureCheckerIsNullOrUndefined=69]="FeatureCheckerIsNullOrUndefined",e[e.NullSupportedEnvironmentCheckerInvoked=70]="NullSupportedEnvironmentCheckerInvoked",e[e.NullJSCPUProfilerInitOptionsValidatorInvoked=71]="NullJSCPUProfilerInitOptionsValidatorInvoked",e[e.NullJSCPUProfilerFactoryInvoked=72]="NullJSCPUProfilerFactoryInvoked",e[e.NullOrUndefinedIdleInterval=73]="NullOrUndefinedIdleInterval",e[e.CreateProfilerDidNotSubscribeProfilerObserver=74]="CreateProfilerDidNotSubscribeProfilerObserver",e[e.NullOrUndefinedCustomPropertiesRetriever=75]="NullOrUndefinedCustomPropertiesRetriever",e[e.NullOrUndefinedCustomProperties=76]="NullOrUndefinedCustomProperties",e[e.CustomPropertyKeyIsNull=77]="CustomPropertyKeyIsNull",e[e.CustomPropertyValueIsNull=78]="CustomPropertyValueIsNull",e[e.RetrieveCallTreesCalledBeforeTransform=79]="RetrieveCallTreesCalledBeforeTransform",e[e.RetrieveBuiltCallTreesBeforeBuildCallTrees=80]="RetrieveBuiltCallTreesBeforeBuildCallTrees",e[e.RetrieveStacksCalledBeforeBuildStacks=81]="RetrieveStacksCalledBeforeBuildStacks",e[e.ExecutionStacksNeverBuilt=82]="ExecutionStacksNeverBuilt",e[e.PeekOnNullExecutionStackInvoked=83]="PeekOnNullExecutionStackInvoked",e[e.PopOnNullExecutionStackInvoked=84]="PopOnNullExecutionStackInvoked",e[e.EmptyStacks=85]="EmptyStacks",e[e.EmptyFrames=86]="EmptyFrames",e[e.ForciblyExitingLoopWhileBuildingStack=87]="ForciblyExitingLoopWhileBuildingStack",e[e.RetrieveStackCalledBeforeBuildStack=88]="RetrieveStackCalledBeforeBuildStack",e[e.ExecutionStackNeverBuilt=89]="ExecutionStackNeverBuilt",e[e.ConvertStacksToCallTreesNeverCalled=90]="ConvertStacksToCallTreesNeverCalled",e[e.ConvertStackToCallTreeNeverCalled=91]="ConvertStackToCallTreeNeverCalled",e[e.NullFrameNodeCreated=92]="NullFrameNodeCreated",e[e.InvalidSampleIndex=93]="InvalidSampleIndex",e[e.InvalidFrameNodeStartTime=94]="InvalidFrameNodeStartTime",e[e.InvalidFrameNodeExecutionTime=95]="InvalidFrameNodeExecutionTime",e[e.InvalidNewFrameNodeExecutionTime=96]="InvalidNewFrameNodeExecutionTime",e[e.NegativeSubTreeExecutionTime=97]="NegativeSubTreeExecutionTime",e[e.FixerForProfilerType=98]="FixerForProfilerType",e[e.MissingProfilerInitOptionsFixerImplementation=99]="MissingProfilerInitOptionsFixerImplementation",e[e.LoopBackFixerFixProfilerInitOptionsInvoked=100]="LoopBackFixerFixProfilerInitOptionsInvoked",e[e.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked=101]="LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked",e[e.MissingDeObfuscationEndpoint=102]="MissingDeObfuscationEndpoint",e[e.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling=103]="NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling",e[e.NullCallTreeDepthFirstIteratorInvoked=104]="NullCallTreeDepthFirstIteratorInvoked",e[e.EmptySamplesArrayPassedToFilter=105]="EmptySamplesArrayPassedToFilter",e[e.NullCallTreeLeftMostNodesIteratorInvoked=106]="NullCallTreeLeftMostNodesIteratorInvoked",e[e.NullCallTreeRightMostNodesIteratorInvoked=107]="NullCallTreeRightMostNodesIteratorInvoked",e[e.MissingIsProfilingEnabledOnFeatureChecker=108]="MissingIsProfilingEnabledOnFeatureChecker",e[e.FeatureCheckerIsProfilingEnabledNotAFunction=109]="FeatureCheckerIsProfilingEnabledNotAFunction",e[e.NullCallTreeGetTotalExecutionTimeInvoked=110]="NullCallTreeGetTotalExecutionTimeInvoked",e[e.NullCallTreeGetCustomPropertiesInvoked=111]="NullCallTreeGetCustomPropertiesInvoked",e[e.SerializedCallTrees=112]="SerializedCallTrees",e[e.NullCallTreeIteratorImplGetNextInvoked=113]="NullCallTreeIteratorImplGetNextInvoked",e[e.NullCallTreeIteratorImplHasMoreInvoked=114]="NullCallTreeIteratorImplHasMoreInvoked",e[e.MissingProfilerNameForProfilerType=115]="MissingProfilerNameForProfilerType",e[e.ExpectedOnlyOneNodePerLevelInCallTree=116]="ExpectedOnlyOneNodePerLevelInCallTree",e[e.MissingWebWorkerSourceURL=117]="MissingWebWorkerSourceURL",e[e.MaxNumberOfProfilersAlreadyCreated=118]="MaxNumberOfProfilersAlreadyCreated",e[e.WebWorkerAPINotAvailable=119]="WebWorkerAPINotAvailable",e[e.SamplingIntervalAboveMaxSamplingInterval=120]="SamplingIntervalAboveMaxSamplingInterval",e[e.UnableToBootWebWorker=121]="UnableToBootWebWorker",e[e.WorkerInstanceNotFound=122]="WorkerInstanceNotFound",e[e.IdNotFoundInMessageToWorker=123]="IdNotFoundInMessageToWorker",e[e.DataNotFoundInMessageToWorker=124]="DataNotFoundInMessageToWorker",e[e.IdNotFoundInMessageFromWorker=125]="IdNotFoundInMessageFromWorker",e[e.DataNotFoundInMessageFromWorker=126]="DataNotFoundInMessageFromWorker",e[e.IdNotFoundInWorkerLogMessage=127]="IdNotFoundInWorkerLogMessage",e[e.MessageNotFoundInWorkerLogMessage=128]="MessageNotFoundInWorkerLogMessage",e[e.UnknownMessageFromWorker=129]="UnknownMessageFromWorker",e[e.UnknownLogMessageFromWorker=130]="UnknownLogMessageFromWorker",e[e.Operation=131]="Operation",e[e.FallbackResultReturned=132]="FallbackResultReturned",e[e.UnknownMessageToWorker=133]="UnknownMessageToWorker",e[e.ExceptionEncounteredInWorker=134]="ExceptionEncounteredInWorker",e[e.MissingDeObfuscationInfoInTraceProcessingInfo=135]="MissingDeObfuscationInfoInTraceProcessingInfo",e[e.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo=136]="MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo",e[e.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo=137]="MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo",e[e.MissingCallTreeFilteringThresholdInMs=138]="MissingCallTreeFilteringThresholdInMs",e[e.InvalidMessageReceivedByWorker=139]="InvalidMessageReceivedByWorker",e[e.InvalidProcessTraceMessageReceivedByWorker=140]="InvalidProcessTraceMessageReceivedByWorker",e[e.MissingTraceInTraceProcessingInfo=141]="MissingTraceInTraceProcessingInfo",e[e.SerializedCallTreesMissingInProcessorResult=142]="SerializedCallTreesMissingInProcessorResult",e[e.LogsMissingInProcessorResult=143]="LogsMissingInProcessorResult",e[e.UndefinedWebWorkerCompletionCallback=144]="UndefinedWebWorkerCompletionCallback",e[e.LogsMissingInErrorsFromWebWorker=145]="LogsMissingInErrorsFromWebWorker",e[e.UndefinedErrorCallback=146]="UndefinedErrorCallback",e[e.UndefinedTraceProcessingInfoToReturnBack=147]="UndefinedTraceProcessingInfoToReturnBack",e[e.WebWorkerAlreadyStarted=148]="WebWorkerAlreadyStarted",e[e.WebWorkerErrorFallingBackToMainEventLoop=149]="WebWorkerErrorFallingBackToMainEventLoop",e[e.CustomPropertiesMissingInTrace=150]="CustomPropertiesMissingInTrace",e[e.ProfilerTraceMissingInTrace=151]="ProfilerTraceMissingInTrace",e[e.ProfilerTraceStartTimestampMissingInTrace=152]="ProfilerTraceStartTimestampMissingInTrace",e[e.ProfilerPropertiesMissingInTrace=153]="ProfilerPropertiesMissingInTrace",e[e.ElapsedProfilingTimeMissingInTrace=154]="ElapsedProfilingTimeMissingInTrace",e[e.InvalidProfilerTraceToProcess=155]="InvalidProfilerTraceToProcess",e[e.WebWorkerError=156]="WebWorkerError",e[e.WebWorkerTraceProcessingInfoMissingToReturnOnError=157]="WebWorkerTraceProcessingInfoMissingToReturnOnError",e[e.WebWorkerErrorCallbackNotRegistered=158]="WebWorkerErrorCallbackNotRegistered",e[e.ProfilerTrace=159]="ProfilerTrace",e[e.MissingCallToFilterCallTrees=160]="MissingCallToFilterCallTrees",e[e.MissingCallToFilterFrames=161]="MissingCallToFilterFrames",e[e.NullCallTreeFramesFiltererFilterFramesInvoked=162]="NullCallTreeFramesFiltererFilterFramesInvoked",e[e.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked=163]="NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked",e[e.NullCallTreeGetFramesFiltererInvoked=164]="NullCallTreeGetFramesFiltererInvoked",e[e.FilterFrameWithNoParent=165]="FilterFrameWithNoParent",e[e.MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo=166]="MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo",e[e.NoCallTreesToSend=167]="NoCallTreesToSend",e[e.OperationLogMessageFiltererInitOptions=168]="OperationLogMessageFiltererInitOptions",e[e.ErrorFromWorker=169]="ErrorFromWorker",e[e.WebWorkerTerminated=170]="WebWorkerTerminated",e[e.NullOrUndefinedProfilerEvent=171]="NullOrUndefinedProfilerEvent",e[e.UnknownProfilerEventId=172]="UnknownProfilerEventId",e[e.NullOrUndefinedProfilerTrace=173]="NullOrUndefinedProfilerTrace",e[e.OperationLogMessageFilteringCriteriaMissingInTrace=174]="OperationLogMessageFilteringCriteriaMissingInTrace",e[e.NullOrUndefinedProfilerObserverPassedInForSubscribe=175]="NullOrUndefinedProfilerObserverPassedInForSubscribe",e[e.NullOrUndefinedProfilerEventIds=176]="NullOrUndefinedProfilerEventIds",e[e.UnexpectedUndefinedProfilerEventIds=177]="UnexpectedUndefinedProfilerEventIds",e[e.NullOrUndefinedProfilerObserverPassedInForUnsubscribe=178]="NullOrUndefinedProfilerObserverPassedInForUnsubscribe",e[e.NullOrUndefinedProfilerEventToUnsubscribe=179]="NullOrUndefinedProfilerEventToUnsubscribe",e[e.ProfilerObserverWasNeverSubscribed=180]="ProfilerObserverWasNeverSubscribed",e[e.UnexpectedNullOrUndefinedSubscribedProfilerEventIds=181]="UnexpectedNullOrUndefinedSubscribedProfilerEventIds",e[e.ProfilerObserverNeverSubscribedForProfilerEventId=182]="ProfilerObserverNeverSubscribedForProfilerEventId",e[e.CallTreeCustomPropertiesRetrieversMissingInTrace=183]="CallTreeCustomPropertiesRetrieversMissingInTrace",e[e.NullOrUndefinedItemToSubscribe=184]="NullOrUndefinedItemToSubscribe",e[e.NullOrUndefinedItemForUnsubscribe=185]="NullOrUndefinedItemForUnsubscribe",e[e.ItemWasNeverSubscribed=186]="ItemWasNeverSubscribed",e[e.NumberOfCallTreesFiltererByCustomFilterers=187]="NumberOfCallTreesFiltererByCustomFilterers",e[e.ProcessTraceParamsIsNullOrUndefined=188]="ProcessTraceParamsIsNullOrUndefined",e[e.CurrentTraceBeingProcessedNullOrUndefined=189]="CurrentTraceBeingProcessedNullOrUndefined",e[e.TraceIdMissingInTrace=190]="TraceIdMissingInTrace",e[e.UndefinedStoredProfilerTraceProcessingWorker=191]="UndefinedStoredProfilerTraceProcessingWorker",e[e.BailingOutOnNullProfiler=192]="BailingOutOnNullProfiler",e[e.NotProcessingCapturedTraceDueToUserBeingIdle=193]="NotProcessingCapturedTraceDueToUserBeingIdle",e[e.NullCallTreeGetReconstructableTreeIteratorInvoked=194]="NullCallTreeGetReconstructableTreeIteratorInvoked",e[e.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace=195]="GetCustomPropertiesCalledOnNullJSCPUProfilerTrace",e[e.GetResourcesCalledOnNullJSCPUProfilerTrace=196]="GetResourcesCalledOnNullJSCPUProfilerTrace",e[e.GetFramesCalledOnNullJSCPUProfilerTrace=197]="GetFramesCalledOnNullJSCPUProfilerTrace",e[e.GetStacksCalledOnNullJSCPUProfilerTrace=198]="GetStacksCalledOnNullJSCPUProfilerTrace",e[e.GetSamplesCalledOnNullJSCPUProfilerTrace=199]="GetSamplesCalledOnNullJSCPUProfilerTrace",e[e.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace=200]="GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace",e[e.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace=201]="GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace",e[e.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace=202]="GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace",e[e.RemoveQueryParamsFromResourceURLsNeverCalled=203]="RemoveQueryParamsFromResourceURLsNeverCalled",e[e.SerializeCallTreeNeverCalled=204]="SerializeCallTreeNeverCalled",e[e.ConvertToJSONStringWasNeverCalled=205]="ConvertToJSONStringWasNeverCalled"}(Hr||(Hr={}));class gt{logMissingProfilerImplementation(){this.sendLogMessageToProcessors({id:Hr.MissingProfilerImplementation,message:void 0,context:this.logContext})}logFailingValidationsInProfilerFactory(){this.sendLogMessageToProcessors({id:Hr.FailingValidationsInProfilerFactory,message:void 0,context:this.logContext})}logWindowMissingInJSEnvironment(){this.sendLogMessageToProcessors({id:Hr.WindowMissingInJSEnvironment,message:void 0,context:this.logContext})}logWindowPropertyNameChecked(e){this.sendLogMessageToProcessors({id:Hr.WindowPropertyNameChecked,message:e,context:this.logContext})}logUserAgentToParseChromiumMajorVersionNumber(){this.sendLogMessageToProcessors({id:Hr.UserAgentToParseChromiumMajorVersionNumber,message:void 0,context:this.logContext})}logChromeNotPresentInUserAgent(){this.sendLogMessageToProcessors({id:Hr.ChromeNotPresentInUserAgent,message:void 0,context:this.logContext})}logUnableToIsolateChromeInformationFromUserAgent(){this.sendLogMessageToProcessors({id:Hr.UnableToIsolateChromeInformationFromUserAgent,message:void 0,context:this.logContext})}logUnableToExtractChromeVersionInformation(){this.sendLogMessageToProcessors({id:Hr.UnableToExtractChromeVersionInformation,message:void 0,context:this.logContext})}logUnableToParseChromeMajorVersionString(){this.sendLogMessageToProcessors({id:Hr.UnableToParseChromeMajorVersionString,message:void 0,context:this.logContext})}logParsedChromiumMajorVersionNumber(e){this.sendLogMessageToProcessors({id:Hr.ParsedChromiumMajorVersionNumber,message:e,context:this.logContext})}logUserAgentToCheckForChromiumBrowser(e){this.sendLogMessageToProcessors({id:Hr.UserAgentToCheckForChromiumBrowser,message:e,context:this.logContext})}logEmptyUserAgentString(){this.sendLogMessageToProcessors({id:Hr.EmptyUserAgentString,message:void 0,context:this.logContext})}logBrowserUserAgentNotChromiumBased(){this.sendLogMessageToProcessors({id:Hr.BrowserUserAgentNotChromiumBased,message:void 0,context:this.logContext})}logUserAgentSpoofedToBeChromium(){this.sendLogMessageToProcessors({id:Hr.UserAgentSpoofedToBeChromium,message:void 0,context:this.logContext})}logBrowserNotChromiumBasedBrowser(){this.sendLogMessageToProcessors({id:Hr.BrowserNotChromiumBasedBrowser,message:void 0,context:this.logContext})}logUnsupportedChromiumMajorVersionNumber(){this.sendLogMessageToProcessors({id:Hr.UnsupportedChromiumMajorVersionNumber,message:void 0,context:this.logContext})}logProfilerInitOptionsNullOrUndefined(){this.sendLogMessageToProcessors({id:Hr.ProfilerInitOptionsNullOrUndefined,message:void 0,context:this.logContext})}logSamplingIntervalIsLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:Hr.SamplingIntervalIsLessThanOrEqualToZero,message:void 0,context:this.logContext})}logSamplingIntervalLessThanMinimumSupportedSamplingInterval(e,r){this.sendLogMessageToProcessors({id:Hr.SamplingIntervalLessThanMinimumSupportedSamplingInterval,message:{samplingInterval:e,minimumSupportedSamplingInterval:r},context:this.logContext})}logUnsupportedBrowser(){this.sendLogMessageToProcessors({id:Hr.UnsupportedBrowser,message:void 0,context:this.logContext})}logUnsupportedOperatingSystem(){this.sendLogMessageToProcessors({id:Hr.UnsupportedOperatingSystem,message:void 0,context:this.logContext})}logJSSelfProfilingAPIUnavailable(){this.sendLogMessageToProcessors({id:Hr.JSSelfProfilingAPIUnavailable,message:void 0,context:this.logContext})}logRetrievedUserAgent(e){this.sendLogMessageToProcessors({id:Hr.RetrievedUserAgent,message:e,context:this.logContext})}logNullJSCPUProfilerStartCalled(){this.sendLogMessageToProcessors({id:Hr.NullJSCPUProfilerStartCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerStopCalled(){this.sendLogMessageToProcessors({id:Hr.NullJSCPUProfilerStopCalled,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerInitOptions(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedProfilerInitOptions,message:void 0,context:this.logContext})}logMaxBufferSizeFixedToDefaultSize(){this.sendLogMessageToProcessors({id:Hr.MaxBufferSizeFixedToDefaultSize,message:void 0,context:this.logContext})}logMaxBufferSizeWasNotFixedBeforeRetrieval(){this.sendLogMessageToProcessors({id:Hr.MaxBufferSizeWasNotFixedBeforeRetrieval,message:void 0,context:this.logContext})}logProfilerNotPresentInJSEnvironment(){this.sendLogMessageToProcessors({id:Hr.ProfilerNotPresentInJSEnvironment,message:void 0,context:this.logContext})}logSamplingIntervalValidationCheckFailed(){this.sendLogMessageToProcessors({id:Hr.SamplingIntervalValidationCheckFailed,message:void 0,context:this.logContext})}logMaxBufferValidationFailed(){this.sendLogMessageToProcessors({id:Hr.MaxBufferValidationFailed,message:void 0,context:this.logContext})}logMaxBufferSizeNotSpecified(){this.sendLogMessageToProcessors({id:Hr.MaxBufferSizeNotSpecified,message:void 0,context:this.logContext})}logMaxBufferSizeLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:Hr.MaxBufferSizeLessThanOrEqualToZero,message:void 0,context:this.logContext})}logManualProfilerValidationFailed(){this.sendLogMessageToProcessors({id:Hr.ManualProfilerValidationFailed,message:void 0,context:this.logContext})}logProfilingIntervalValidationFailed(){this.sendLogMessageToProcessors({id:Hr.ProfilingIntervalValidationFailed,message:void 0,context:this.logContext})}logProfilingIntervalNullOrUndefined(){this.sendLogMessageToProcessors({id:Hr.ProfilingIntervalNullOrUndefined,message:void 0,context:this.logContext})}logProfilingIntervalLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:Hr.ProfilingIntervalLessThanOrEqualToZero,message:void 0,context:this.logContext})}logProfilingIntervalLessThanSamplingInterval(){this.sendLogMessageToProcessors({id:Hr.ProfilingIntervalLessThanSamplingInterval,message:void 0,context:this.logContext})}logTimedProfilerValidationFailed(){this.sendLogMessageToProcessors({id:Hr.TimedProfilerValidationFailed,message:void 0,context:this.logContext})}logIdleIntervalValidationFailed(){this.sendLogMessageToProcessors({id:Hr.IdleIntervalValidationFailed,message:void 0,context:this.logContext})}logIdleIntervalIsNullOrUndefined(){this.sendLogMessageToProcessors({id:Hr.IdleIntervalIsNullOrUndefined,message:void 0,context:this.logContext})}logIdleIntervalIsLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:Hr.IdleIntervalIsLessThanOrEqualToZero,message:void 0,context:this.logContext})}logPostProfilerStartCallbackSpecified(){this.sendLogMessageToProcessors({id:Hr.PostProfilerStartCallbackSpecified,message:void 0,context:this.logContext})}logPreProfilerStartCheckFailed(){this.sendLogMessageToProcessors({id:Hr.PreProfilerStartCheckFailed,message:void 0,context:this.logContext})}logMaxBufferSizeNotFixed(){this.sendLogMessageToProcessors({id:Hr.MaxBufferSizeNotFixed,message:void 0,context:this.logContext})}logBailingOutOnNullProfiler(){this.sendLogMessageToProcessors({id:Hr.BailingOutOnNullProfiler,message:void 0,context:this.logContext})}logProfilerAlreadyStarted(){this.sendLogMessageToProcessors({id:Hr.ProfilerAlreadyStarted,message:void 0,context:this.logContext})}logProfilerStartSucceeded(){this.sendLogMessageToProcessors({id:Hr.ProfilerStartSucceeded,message:void 0,context:this.logContext})}logInvokingPostProfilerStartCallback(){this.sendLogMessageToProcessors({id:Hr.InvokingPostProfilerStartCallback,message:void 0,context:this.logContext})}logPostProfilerStopCallbackSpecified(){this.sendLogMessageToProcessors({id:Hr.PostProfilerStopCallbackSpecified,message:void 0,context:this.logContext})}logProfilerInstanceIsUndefined(){this.sendLogMessageToProcessors({id:Hr.ProfilerInstanceIsUndefined,message:void 0,context:this.logContext})}logProfilerStopPromiseResolved(){this.sendLogMessageToProcessors({id:Hr.ProfilerStopPromiseResolved,message:void 0,context:this.logContext})}logProfilerStopPromiseRejected(e){this.sendLogMessageToProcessors({id:Hr.ProfilerStopPromiseRejected,message:e,context:this.logContext})}logPostProfilerStopCallbackInvoked(){this.sendLogMessageToProcessors({id:Hr.PostProfilerStopCallbackInvoked,message:void 0,context:this.logContext})}logNotProcessingCapturedTraceDueToUserBeingIdle(){this.sendLogMessageToProcessors({id:Hr.NotProcessingCapturedTraceDueToUserBeingIdle,message:void 0,context:this.logContext})}logPostTimedStartProfilerStartCallbackInvoked(){this.sendLogMessageToProcessors({id:Hr.PostTimedStartProfilerStartCallbackInvoked,message:void 0,context:this.logContext})}logProfilingIntervalIsUndefined(){this.sendLogMessageToProcessors({id:Hr.ProfilingIntervalIsUndefined,message:void 0,context:this.logContext})}logTimerJobToStopProfilerSet(){this.sendLogMessageToProcessors({id:Hr.TimerJobToStopProfilerSet,message:void 0,context:this.logContext})}logTimedProfilerStopCallbackInvoked(){this.sendLogMessageToProcessors({id:Hr.TimedProfilerStopCallbackInvoked,message:void 0,context:this.logContext})}logTimedProfilerIsBeingStoppedManually(){this.sendLogMessageToProcessors({id:Hr.TimedProfilerIsBeingStoppedManually,message:void 0,context:this.logContext})}logProfilerStartPromiseCreated(){this.sendLogMessageToProcessors({id:Hr.ProfilerStartPromiseCreated,message:void 0,context:this.logContext})}logProfilerStopGoingToBeInvoked(){this.sendLogMessageToProcessors({id:Hr.ProfilerStopGoingToBeInvoked,message:void 0,context:this.logContext})}logSamplingIntervalUsedForStartingProfiler(){this.sendLogMessageToProcessors({id:Hr.SamplingIntervalUsedForStartingProfiler,message:void 0,context:this.logContext})}logMaxBufferSize(e){this.sendLogMessageToProcessors({id:Hr.MaxBufferSize,message:e,context:this.logContext})}logNoProfilerInstanceBuilt(){this.sendLogMessageToProcessors({id:Hr.NoProfilerInstanceBuilt,message:void 0,context:this.logContext})}logProfilerInitOptionsValidationFailed(){this.sendLogMessageToProcessors({id:Hr.ProfilerInitOptionsValidationFailed,message:void 0,context:this.logContext})}logUnableToFixUpProfilerInitOptions(){this.sendLogMessageToProcessors({id:Hr.UnableToFixUpProfilerInitOptions,message:void 0,context:this.logContext})}logProfilingIsNotEnabled(){this.sendLogMessageToProcessors({id:Hr.ProfilingIsNotEnabled,message:void 0,context:this.logContext})}logProfilingIsNotSupportedEnvironment(){this.sendLogMessageToProcessors({id:Hr.ProfilingIsNotSupportedEnvironment,message:void 0,context:this.logContext})}logFeatureCheckerIsNullOrUndefined(){this.sendLogMessageToProcessors({id:Hr.FeatureCheckerIsNullOrUndefined,message:void 0,context:this.logContext})}logNullSupportedEnvironmentCheckerInvoked(){this.sendLogMessageToProcessors({id:Hr.NullSupportedEnvironmentCheckerInvoked,message:void 0,context:this.logContext})}logNullJSCPUProfilerInitOptionsValidatorInvoked(){this.sendLogMessageToProcessors({id:Hr.NullJSCPUProfilerInitOptionsValidatorInvoked,message:void 0,context:this.logContext})}logNullJSCPUProfilerFactoryInvoked(){this.sendLogMessageToProcessors({id:Hr.NullJSCPUProfilerFactoryInvoked,message:void 0,context:this.logContext})}logNullOrUndefinedIdleInterval(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedIdleInterval,message:void 0,context:this.logContext})}logCreateProfilerDidNotSubscribeProfilerObserver(){this.sendLogMessageToProcessors({id:Hr.CreateProfilerDidNotSubscribeProfilerObserver,message:void 0,context:this.logContext})}logNullOrUndefinedCustomPropertiesRetriever(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedCustomPropertiesRetriever,message:void 0,context:this.logContext})}logNullOrUndefinedCustomProperties(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedCustomProperties,message:void 0,context:this.logContext})}logCustomPropertyKeyIsNull(){this.sendLogMessageToProcessors({id:Hr.CustomPropertyKeyIsNull,message:void 0,context:this.logContext})}logCustomPropertyValueIsNull(){this.sendLogMessageToProcessors({id:Hr.CustomPropertyValueIsNull,message:void 0,context:this.logContext})}logRetrieveCallTreesCalledBeforeTransform(){this.sendLogMessageToProcessors({id:Hr.RetrieveCallTreesCalledBeforeTransform,message:void 0,context:this.logContext})}logRetrieveBuiltCallTreesBeforeBuildCallTrees(){this.sendLogMessageToProcessors({id:Hr.RetrieveBuiltCallTreesBeforeBuildCallTrees,message:void 0,context:this.logContext})}logRetrieveStacksCalledBeforeBuildStacks(){this.sendLogMessageToProcessors({id:Hr.RetrieveStacksCalledBeforeBuildStacks,message:void 0,context:this.logContext})}logExecutionStacksNeverBuilt(){this.sendLogMessageToProcessors({id:Hr.ExecutionStacksNeverBuilt,message:void 0,context:this.logContext})}logPeekOnNullExecutionStackInvoked(){this.sendLogMessageToProcessors({id:Hr.PeekOnNullExecutionStackInvoked,message:void 0,context:this.logContext})}logPopOnNullExecutionStackInvoked(){this.sendLogMessageToProcessors({id:Hr.PopOnNullExecutionStackInvoked,message:void 0,context:this.logContext})}logEmptyStacks(){this.sendLogMessageToProcessors({id:Hr.EmptyStacks,message:void 0,context:this.logContext})}logEmptyFrames(){this.sendLogMessageToProcessors({id:Hr.EmptyFrames,message:void 0,context:this.logContext})}logForciblyExitingLoopWhileBuildingStack(){this.sendLogMessageToProcessors({id:Hr.ForciblyExitingLoopWhileBuildingStack,message:void 0,context:this.logContext})}logRetrieveStackCalledBeforeBuildStack(){this.sendLogMessageToProcessors({id:Hr.RetrieveStackCalledBeforeBuildStack,message:void 0,context:this.logContext})}logExecutionStackNeverBuilt(){this.sendLogMessageToProcessors({id:Hr.ExecutionStackNeverBuilt,message:void 0,context:this.logContext})}logConvertStacksToCallTreesNeverCalled(){this.sendLogMessageToProcessors({id:Hr.ConvertStacksToCallTreesNeverCalled,message:void 0,context:this.logContext})}logConvertStackToCallTreeNeverCalled(){this.sendLogMessageToProcessors({id:Hr.ConvertStackToCallTreeNeverCalled,message:void 0,context:this.logContext})}logNullFrameNodeCreated(){this.sendLogMessageToProcessors({id:Hr.NullFrameNodeCreated,message:void 0,context:this.logContext})}logInvalidSampleIndex(){this.sendLogMessageToProcessors({id:Hr.InvalidSampleIndex,message:void 0,context:this.logContext})}logInvalidFrameNodeStartTime(){this.sendLogMessageToProcessors({id:Hr.InvalidFrameNodeStartTime,message:void 0,context:this.logContext})}logInvalidFrameNodeExecutionTime(){this.sendLogMessageToProcessors({id:Hr.InvalidFrameNodeExecutionTime,message:void 0,context:this.logContext})}logInvalidNewFrameNodeExecutionTime(){this.sendLogMessageToProcessors({id:Hr.InvalidNewFrameNodeExecutionTime,message:void 0,context:this.logContext})}logNegativeSubTreeExecutionTime(){this.sendLogMessageToProcessors({id:Hr.NegativeSubTreeExecutionTime,message:void 0,context:this.logContext})}logFixerForProfilerType(e){this.sendLogMessageToProcessors({id:Hr.FixerForProfilerType,message:e,context:this.logContext})}logMissingProfilerInitOptionsFixerImplementation(){this.sendLogMessageToProcessors({id:Hr.MissingProfilerInitOptionsFixerImplementation,message:void 0,context:this.logContext})}logLoopBackFixerFixProfilerInitOptionsInvoked(){this.sendLogMessageToProcessors({id:Hr.LoopBackFixerFixProfilerInitOptionsInvoked,message:void 0,context:this.logContext})}logLoopBackFixerRetrieveFixedProfilerInitOptionsInvoked(){this.sendLogMessageToProcessors({id:Hr.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked,message:void 0,context:this.logContext})}logMissingDeObfuscationEndpoint(){this.sendLogMessageToProcessors({id:Hr.MissingDeObfuscationEndpoint,message:void 0,context:this.logContext})}logNotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling(){this.sendLogMessageToProcessors({id:Hr.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling,message:void 0,context:this.logContext})}logNullCallTreeDepthFirstIteratorInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeDepthFirstIteratorInvoked,message:void 0,context:this.logContext})}logEmptySamplesArrayPassedToFilter(){this.sendLogMessageToProcessors({id:Hr.EmptySamplesArrayPassedToFilter,message:void 0,context:this.logContext})}logNullCallTreeLeftMostNodesIteratorInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeLeftMostNodesIteratorInvoked,message:void 0,context:this.logContext})}logNullCallTreeRightMostNodesIteratorInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeRightMostNodesIteratorInvoked,message:void 0,context:this.logContext})}logMissingIsProfilingEnabledOnFeatureChecker(){this.sendLogMessageToProcessors({id:Hr.MissingIsProfilingEnabledOnFeatureChecker,message:void 0,context:this.logContext})}logFeatureCheckerIsProfilingEnabledNotAFunction(){this.sendLogMessageToProcessors({id:Hr.FeatureCheckerIsProfilingEnabledNotAFunction,message:void 0,context:this.logContext})}logNullCallTreeGetTotalExecutionTimeInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeGetTotalExecutionTimeInvoked,message:void 0,context:this.logContext})}logNullCallTreeGetCustomPropertiesInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeGetCustomPropertiesInvoked,message:void 0,context:this.logContext})}logNoCallTreesToSend(){this.sendLogMessageToProcessors({id:Hr.NoCallTreesToSend,message:void 0,context:this.logContext})}logSerializedCallTrees(e){this.sendLogMessageToProcessors({id:Hr.SerializedCallTrees,message:e,context:this.logContext})}logNullCallTreeIteratorImplGetNextInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeIteratorImplGetNextInvoked,message:void 0,context:this.logContext})}logNullCallTreeIteratorImplHasMoreInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeIteratorImplHasMoreInvoked,message:void 0,context:this.logContext})}logMissingProfilerNameForProfilerType(e){this.sendLogMessageToProcessors({id:Hr.MissingProfilerNameForProfilerType,message:e,context:this.logContext})}logExpectedOnlyOneNodePerLevelInCallTree(){this.sendLogMessageToProcessors({id:Hr.ExpectedOnlyOneNodePerLevelInCallTree,message:void 0,context:this.logContext})}logMissingWebWorkerSourceURL(){this.sendLogMessageToProcessors({id:Hr.MissingWebWorkerSourceURL,message:void 0,context:this.logContext})}logMaxNumberOfProfilersAlreadyCreated(){this.sendLogMessageToProcessors({id:Hr.MaxNumberOfProfilersAlreadyCreated,message:void 0,context:this.logContext})}logWebWorkerAPINotAvailable(){this.sendLogMessageToProcessors({id:Hr.WebWorkerAPINotAvailable,message:void 0,context:this.logContext})}logSamplingIntervalAboveMaxSamplingInterval(){this.sendLogMessageToProcessors({id:Hr.SamplingIntervalAboveMaxSamplingInterval,message:void 0,context:this.logContext})}logUnableToBootWebWorker(){this.sendLogMessageToProcessors({id:Hr.UnableToBootWebWorker,message:void 0,context:this.logContext})}logWorkerInstanceNotFound(){this.sendLogMessageToProcessors({id:Hr.WorkerInstanceNotFound,message:void 0,context:this.logContext})}logIdNotFoundInMessageToWorker(){this.sendLogMessageToProcessors({id:Hr.IdNotFoundInMessageToWorker,message:void 0,context:this.logContext})}logDataNotFoundInMessageToWorker(){this.sendLogMessageToProcessors({id:Hr.DataNotFoundInMessageToWorker,message:void 0,context:this.logContext})}logIdNotFoundInMessageFromWorker(){this.sendLogMessageToProcessors({id:Hr.IdNotFoundInMessageFromWorker,message:void 0,context:this.logContext})}logDataNotFoundInMessageFromWorker(){this.sendLogMessageToProcessors({id:Hr.DataNotFoundInMessageFromWorker,message:void 0,context:this.logContext})}logIdNotFoundInWorkerLogMessage(){this.sendLogMessageToProcessors({id:Hr.IdNotFoundInWorkerLogMessage,message:void 0,context:this.logContext})}logMessageNotFoundInWorkerLogMessage(){this.sendLogMessageToProcessors({id:Hr.MessageNotFoundInWorkerLogMessage,message:void 0,context:this.logContext})}logUnknownMessageFromWorker(e){this.sendLogMessageToProcessors({id:Hr.UnknownMessageFromWorker,message:void 0,context:this.logContext})}logUnknownLogMessageFromWorker(e){this.sendLogMessageToProcessors({id:Hr.UnknownLogMessageFromWorker,message:void 0,context:this.logContext})}logOperation(e,r,t,s,o,i,a,l){const n={operationName:e,parentOperationName:r,didOperationSucceed:t,measuredRunTime:s,didOperationFailUnexpectedly:o,logs:i,propertyBag:a,exception:l};this.sendLogMessageToProcessors({id:Hr.Operation,message:n,context:this.logContext})}logFallbackResultReturned(){this.sendLogMessageToProcessors({id:Hr.FallbackResultReturned,message:void 0,context:this.logContext})}logUnknownMessageToWorker(e){this.sendLogMessageToProcessors({id:Hr.FallbackResultReturned,message:e,context:this.logContext})}logErrorFromWorker(e){this.sendLogMessageToProcessors({id:Hr.ErrorFromWorker,message:e,context:this.logContext})}logExceptionEncounteredInWorker(e){this.sendLogMessageToProcessors({id:Hr.ExceptionEncounteredInWorker,message:e,context:this.logContext})}logMissingDeObfuscationInfoInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Hr.MissingDeObfuscationInfoInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Hr.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingShouldRecordExpandedTimeStampsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Hr.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingCallTreeFilteringThresholdInMsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Hr.MissingCallTreeFilteringThresholdInMs,message:void 0,context:this.logContext})}logInvalidMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:Hr.InvalidMessageReceivedByWorker,message:void 0,context:this.logContext})}logInvalidProcessTraceMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:Hr.InvalidProcessTraceMessageReceivedByWorker,message:void 0,context:this.logContext})}logMissingTraceInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:Hr.InvalidProcessTraceMessageReceivedByWorker,message:void 0,context:this.logContext})}logSerializedCallTreesMissingInProcessorResult(){this.sendLogMessageToProcessors({id:Hr.SerializedCallTreesMissingInProcessorResult,message:void 0,context:this.logContext})}logLogsMissingInProcessorResult(){this.sendLogMessageToProcessors({id:Hr.LogsMissingInProcessorResult,message:void 0,context:this.logContext})}logUndefinedWebWorkerCompletionCallback(){this.sendLogMessageToProcessors({id:Hr.UndefinedWebWorkerCompletionCallback,message:void 0,context:this.logContext})}logLogsMissingInErrorsFromWebWorker(){this.sendLogMessageToProcessors({id:Hr.LogsMissingInErrorsFromWebWorker,message:void 0,context:this.logContext})}logUndefinedErrorCallback(){this.sendLogMessageToProcessors({id:Hr.UndefinedErrorCallback,message:void 0,context:this.logContext})}logUndefinedTraceProcessingInfoToReturnBack(){this.sendLogMessageToProcessors({id:Hr.UndefinedTraceProcessingInfoToReturnBack,message:void 0,context:this.logContext})}logWebWorkerErrorFallingBackToMainEventLoop(){this.sendLogMessageToProcessors({id:Hr.WebWorkerErrorFallingBackToMainEventLoop,message:void 0,context:this.logContext})}logWebWorkerAlreadyStarted(){this.sendLogMessageToProcessors({id:Hr.WebWorkerAlreadyStarted,message:void 0,context:this.logContext})}logWebWorkerTerminated(){this.sendLogMessageToProcessors({id:Hr.WebWorkerTerminated,message:void 0,context:this.logContext})}logCustomPropertiesMissingInTrace(){this.sendLogMessageToProcessors({id:Hr.CustomPropertiesMissingInTrace,message:void 0,context:this.logContext})}logProfilerTraceMissingInTrace(){this.sendLogMessageToProcessors({id:Hr.ProfilerTraceMissingInTrace,message:void 0,context:this.logContext})}logProfilerTraceStartTimestampMissingInTrace(){this.sendLogMessageToProcessors({id:Hr.ProfilerTraceStartTimestampMissingInTrace,message:void 0,context:this.logContext})}logProfilerPropertiesMissingInTrace(){this.sendLogMessageToProcessors({id:Hr.ProfilerPropertiesMissingInTrace,message:void 0,context:this.logContext})}logElapsedProfilingTimeMissingInTrace(){this.sendLogMessageToProcessors({id:Hr.ElapsedProfilingTimeMissingInTrace,message:void 0,context:this.logContext})}logInvalidProfilerTraceToProcess(){this.sendLogMessageToProcessors({id:Hr.InvalidProfilerTraceToProcess,message:void 0,context:this.logContext})}logWebWorkerError(e){this.sendLogMessageToProcessors({id:Hr.WebWorkerError,message:e,context:this.logContext})}logWebWorkerErrorCallbackNotRegistered(){this.sendLogMessageToProcessors({id:Hr.WebWorkerErrorCallbackNotRegistered,message:void 0,context:this.logContext})}logWebWorkerTraceProcessingInfoMissingToReturnOnError(){this.sendLogMessageToProcessors({id:Hr.WebWorkerTraceProcessingInfoMissingToReturnOnError,message:void 0,context:this.logContext})}logProfilerTrace(e,r){this.sendLogMessageToProcessors({id:Hr.ProfilerTrace,message:e,context:this.logContext,logOptions:{profilerTraceLoggingChunkSize:r}})}logMissingCallToFilterCallTrees(){this.sendLogMessageToProcessors({id:Hr.MissingCallToFilterCallTrees,message:void 0,context:this.logContext})}logMissingCallToFilterFrames(){this.sendLogMessageToProcessors({id:Hr.MissingCallToFilterFrames,message:void 0,context:this.logContext})}logNullCallTreeFramesFiltererFilterFramesInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeFramesFiltererFilterFramesInvoked,message:void 0,context:this.logContext})}logNullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked,message:void 0,context:this.logContext})}logNullCallTreeGetFramesFiltererInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeGetFramesFiltererInvoked,message:void 0,context:this.logContext})}logFilterFrameWithNoParent(){this.sendLogMessageToProcessors({id:Hr.FilterFrameWithNoParent,message:void 0,context:this.logContext})}subscribe(e){this.logMessageProcessors.push(e)}unsubscribe(e){this.logMessageProcessors=this.logMessageProcessors.filter((r=>r!==e))}sendLogMessageToProcessors(e){this.logMessageProcessors.forEach((r=>{r.processLogMessage(e)}))}logOperationLogMessageFiltererInitOptions(e,r,t){this.sendLogMessageToProcessors({id:Hr.OperationLogMessageFiltererInitOptions,message:{shouldAlwaysLogOperationsData:e,listOfOperationNamesToAlwaysLog:r,operationMeasuredRunTimeFilteringThresholdInMs:t},context:this.logContext})}logNullOrUndefinedProfilerEvent(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedProfilerEvent,message:void 0,context:this.logContext})}logUnknownProfilerEventId(e){this.sendLogMessageToProcessors({id:Hr.UnknownProfilerEventId,message:e,context:this.logContext})}logNullOrUndefinedProfilerTrace(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedProfilerTrace,message:void 0,context:this.logContext})}logOperationLogMessageFilteringCriteriaMissingInTrace(){this.sendLogMessageToProcessors({id:Hr.OperationLogMessageFilteringCriteriaMissingInTrace,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerObserverPassedInForSubscribe(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedProfilerObserverPassedInForSubscribe,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerEventIds(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedProfilerEventIds,message:void 0,context:this.logContext})}logUnexpectedUndefinedProfilerEventIds(){this.sendLogMessageToProcessors({id:Hr.UnexpectedUndefinedProfilerEventIds,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerObserverPassedInForUnsubscribe(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedProfilerObserverPassedInForUnsubscribe,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerEventToUnsubscribe(){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedProfilerEventToUnsubscribe,message:void 0,context:this.logContext})}logProfilerObserverWasNeverSubscribed(){this.sendLogMessageToProcessors({id:Hr.ProfilerObserverWasNeverSubscribed,message:void 0,context:this.logContext})}logUnexpectedNullOrUndefinedSubscribedProfilerEventIds(){this.sendLogMessageToProcessors({id:Hr.UnexpectedNullOrUndefinedSubscribedProfilerEventIds,message:void 0,context:this.logContext})}logProfilerObserverNeverSubscribedForProfilerEventId(e){this.sendLogMessageToProcessors({id:Hr.ProfilerObserverNeverSubscribedForProfilerEventId,message:e,context:this.logContext})}logCallTreeCustomPropertiesRetrieversMissingInTrace(){this.sendLogMessageToProcessors({id:Hr.CallTreeCustomPropertiesRetrieversMissingInTrace,message:void 0,context:this.logContext})}logNullOrUndefinedItemToSubscribe(e){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedItemToSubscribe,message:e,context:this.logContext})}logNullOrUndefinedItemForUnsubscribe(e){this.sendLogMessageToProcessors({id:Hr.NullOrUndefinedItemForUnsubscribe,message:e,context:this.logContext})}logItemWasNeverSubscribed(e){this.sendLogMessageToProcessors({id:Hr.ItemWasNeverSubscribed,message:e,context:this.logContext})}logNumberOfCallTreesFiltererByCustomFilterers(e,r){this.sendLogMessageToProcessors({id:Hr.NumberOfCallTreesFiltererByCustomFilterers,message:{filteredCount:e,totalCount:r},context:this.logContext})}logProcessTraceParamsIsNullOrUndefined(){this.sendLogMessageToProcessors({id:Hr.ProcessTraceParamsIsNullOrUndefined,message:void 0,context:this.logContext})}logCurrentTraceBeingProcessedNullOrUndefined(){this.sendLogMessageToProcessors({id:Hr.ProcessTraceParamsIsNullOrUndefined,message:void 0,context:this.logContext})}logTraceIdMissingInTrace(){this.sendLogMessageToProcessors({id:Hr.TraceIdMissingInTrace,message:void 0,context:this.logContext})}logUndefinedStoredProfilerTraceProcessingWorker(){this.sendLogMessageToProcessors({id:Hr.UndefinedStoredProfilerTraceProcessingWorker,message:void 0,context:this.logContext})}logNullCallTreeGetReconstructableTreeIteratorInvoked(){this.sendLogMessageToProcessors({id:Hr.NullCallTreeGetReconstructableTreeIteratorInvoked,message:void 0,context:this.logContext})}logGetCustomPropertiesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Hr.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetResourcesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Hr.GetResourcesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetFramesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Hr.GetFramesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetStacksCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Hr.GetStacksCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetSamplesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Hr.GetSamplesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Hr.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetProfilerPropertiesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Hr.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:Hr.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logRemoveQueryParamsFromResourceURLsNeverCalled(){this.sendLogMessageToProcessors({id:Hr.RemoveQueryParamsFromResourceURLsNeverCalled,message:void 0,context:this.logContext})}logSerializeCallTreeWasNeverCalled(){this.sendLogMessageToProcessors({id:Hr.SerializeCallTreeNeverCalled,message:void 0,context:this.logContext})}logConvertToJSONStringWasNeverCalled(){this.sendLogMessageToProcessors({id:Hr.ConvertToJSONStringWasNeverCalled,message:void 0,context:this.logContext})}constructor(e){this.logContext=e,this.logMessageProcessors=[]}}!function(e){e[e.MainEventLoop=0]="MainEventLoop",e[e.Worker=1]="Worker"}(Qr||(Qr={}));class ut{getFiltererName(){return"OperationLogMessageFilterer"}shouldFilterLogMessage(e){if(e.id!==Hr.Operation)return!1;if(this.shouldAlwaysLogOperationsData)return!1;const r=e.message;return!(r.didOperationFailUnexpectedly||-1!==this.listOfOperationNamesToAlwaysLog.indexOf(r.operationName)||r.measuredRunTime>this.operationMeasuredRunTimeFilteringThresholdInMs)}constructor(e,r,t,s){this.shouldAlwaysLogOperationsData=e,this.listOfOperationNamesToAlwaysLog=r,this.operationMeasuredRunTimeFilteringThresholdInMs=t,this.logger=s,this.logger.logOperationLogMessageFiltererInitOptions(e,r,t)}}function mt(e,r=30){const t=[];for(let s=0;s<e.length;s+=r)t.push(e.slice(s,s+r));return t}class pt{getTransporterName(){return"ULSLogMessageTransporter"}transportLogMessage(e){if(!this.shouldTransportLogs)return;let r="";switch(e.context){case Qr.MainEventLoop:r="ProfilingSessionLogger-MainEventLoop";break;case Qr.Worker:r="ProfilingSessionLogger-Worker"}switch(e.id){case Hr.MissingProfilerImplementation:l.sendTraceTag(543477840,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Factory doesn't know how to create profiler of type ${e.message}`);break;case Hr.FailingValidationsInProfilerFactory:l.sendTraceTag(543477841,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Validations failed while creating the profiler`);break;case Hr.WindowMissingInJSEnvironment:l.sendTraceTag(543477842,d.msoulscat_Wac_Telemetry,c.Warning,`${r}: Unable to find window in the JS environment`);break;case Hr.WindowPropertyNameChecked:l.sendTraceTag(543477843,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case Hr.UserAgentToParseChromiumMajorVersionNumber:l.sendTraceTag(543477844,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case Hr.ChromeNotPresentInUserAgent:l.sendTraceTag(543477845,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Chrome was not found in the user agent`);break;case Hr.UnableToIsolateChromeInformationFromUserAgent:l.sendTraceTag(543477846,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to isolate chrome information from the user agent`);break;case Hr.UnableToExtractChromeVersionInformation:l.sendTraceTag(543477847,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to extract chrome version information from the user agent`);break;case Hr.UnableToParseChromeMajorVersionString:l.sendTraceTag(543477848,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to parse the chromium major version number`);break;case Hr.ParsedChromiumMajorVersionNumber:l.sendTraceTag(543477849,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case Hr.UserAgentToCheckForChromiumBrowser:l.sendTraceTag(543477850,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case Hr.EmptyUserAgentString:l.sendTraceTag(543477851,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Empty user agent string`);break;case Hr.BrowserUserAgentNotChromiumBased:l.sendTraceTag(543477852,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Browser not chromium based`);break;case Hr.UserAgentSpoofedToBeChromium:l.sendTraceTag(543477853,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Browser user agent spoofed to be chromium based`);break;case Hr.BrowserNotChromiumBasedBrowser:l.sendTraceTag(543477854,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Browser user agent spoofed to be chromium based`);break;case Hr.UnsupportedChromiumMajorVersionNumber:l.sendTraceTag(543477855,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Unsupported chromium major version number`);break;case Hr.ProfilerInitOptionsNullOrUndefined:l.sendTraceTag(543477856,d.msoulscat_Wac_Telemetry,c.Info,"ProfilerInitOptions cannot be null or undefined");break;case Hr.SamplingIntervalIsLessThanOrEqualToZero:l.sendTraceTag(543477857,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Sampling interval must be greater than zero`);break;case Hr.SamplingIntervalLessThanMinimumSupportedSamplingInterval:l.sendTraceTag(543477858,d.msoulscat_Wac_Telemetry,c.Warning,`${r}: Sampling interval ${e.message.samplingInterval} is less than minimum supported sampling interval ${e.message.minimumSupportedSamplingInterval}. API might perform scaling`);break;case Hr.UnsupportedBrowser:l.sendTraceTag(543477859,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling is not supported in this browser`);break;case Hr.UnsupportedOperatingSystem:l.sendTraceTag(543477888,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling is not supported in this operating system`);break;case Hr.JSSelfProfilingAPIUnavailable:l.sendTraceTag(543477889,d.msoulscat_Wac_Telemetry,c.Info,`${r}: JSSelfProfiling is not available`);break;case Hr.RetrievedUserAgent:l.sendTraceTag(543477890,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case Hr.NullJSCPUProfilerStartCalled:l.sendTraceTag(543477891,d.msoulscat_Wac_Telemetry,c.Info,`${r}: NullJSCPUProfiler start called`);break;case Hr.NullJSCPUProfilerStopCalled:l.sendTraceTag(543477892,d.msoulscat_Wac_Telemetry,c.Info,`${r}: NullJSCPUProfiler stop called`);break;case Hr.NullOrUndefinedProfilerInitOptions:l.sendTraceTag(543477893,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ProfilerInitOptions is null or undefined`);break;case Hr.MaxBufferSizeFixedToDefaultSize:l.sendTraceTag(543477894,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size was fixed to the default max size`);break;case Hr.MaxBufferSizeWasNotFixedBeforeRetrieval:l.sendTraceTag(543477895,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Retrieve was called before fix max buffer size was called. The returned options can be undefined`);break;case Hr.ProfilerNotPresentInJSEnvironment:l.sendTraceTag(543477896,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler is not present in the JS environment indicating JSSelfProfiling API is not available`);break;case Hr.SamplingIntervalValidationCheckFailed:l.sendTraceTag(543477897,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Sampling interval validation check failed`);break;case Hr.MaxBufferValidationFailed:l.sendTraceTag(543477898,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size validation failed`);break;case Hr.MaxBufferSizeNotSpecified:l.sendTraceTag(543477899,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size is not specified`);break;case Hr.MaxBufferSizeLessThanOrEqualToZero:l.sendTraceTag(543477900,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size is less than or equal to zero`);break;case Hr.ManualProfilerValidationFailed:l.sendTraceTag(543477901,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Timed profiler initialization options failed to pass manual profiler initialization options`);break;case Hr.ProfilingIntervalValidationFailed:l.sendTraceTag(543477902,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval validation failed`);break;case Hr.ProfilingIntervalNullOrUndefined:l.sendTraceTag(543477903,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval is null or undefined`);break;case Hr.ProfilingIntervalLessThanOrEqualToZero:l.sendTraceTag(543477904,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval is less than or equal to zero`);break;case Hr.ProfilingIntervalLessThanSamplingInterval:l.sendTraceTag(543477905,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval is less than sampling interval`);break;case Hr.TimedProfilerValidationFailed:l.sendTraceTag(543477906,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Continuous profiler init options failed to pass timed profiler initialization options`);break;case Hr.IdleIntervalValidationFailed:l.sendTraceTag(543477907,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Idle interval validation failed for continuous profiler`);break;case Hr.IdleIntervalIsNullOrUndefined:l.sendTraceTag(543477908,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Idle interval is a required argument for continuous profiler`);break;case Hr.IdleIntervalIsLessThanOrEqualToZero:l.sendTraceTag(543477909,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Idle interval must be greater than zero`);break;case Hr.PostProfilerStartCallbackSpecified:l.sendTraceTag(543477910,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A post profiler start callback is specified`);break;case Hr.PreProfilerStartCheckFailed:l.sendTraceTag(543477911,d.msoulscat_Wac_Telemetry,c.Info,`${r}: One or more pre-profiler start checks failed`);break;case Hr.MaxBufferSizeNotFixed:l.sendTraceTag(543477912,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Max buffer size must be fixed before we get to this point. Is the profiler being created outside the factory?`);break;case Hr.BailingOutOnNullProfiler:l.sendTraceTag(539109121,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null profiler was created due to some error, bailing out from profiling loop`);break;case Hr.NotProcessingCapturedTraceDueToUserBeingIdle:l.sendTraceTag(537706779,d.msoulscat_Wac_Telemetry,c.Info,`${r}: No browser events were detected between profiler start and profiler end. data will not be proccessed since user was idle`);break;case Hr.ProfilerAlreadyStarted:l.sendTraceTag(543477913,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Attempting to start the profiler even though the profiler is already started. Stop the profiler first and attempt a restart`);break;case Hr.ProfilerStartSucceeded:l.sendTraceTag(543477914,d.msoulscat_Wac_Telemetry,c.Info,`${r}: start the profiler successfully`);break;case Hr.InvokingPostProfilerStartCallback:l.sendTraceTag(543477915,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Invoking the post profiler start callback`);break;case Hr.PostProfilerStopCallbackSpecified:l.sendTraceTag(543477916,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A callback for post profiler stop is specified`);break;case Hr.ProfilerInstanceIsUndefined:l.sendTraceTag(543477917,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler instance is undefined. Is the profiler is being stopped without ever starting?`);break;case Hr.ProfilerStopPromiseResolved:l.sendTraceTag(543477918,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler stop promise has been resolved successfully`);break;case Hr.ProfilerStopPromiseRejected:l.sendTraceTag(543477919,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ${JSON.stringify({promiseRejectionReason:e.message})}`);break;case Hr.PostProfilerStopCallbackInvoked:l.sendTraceTag(543477920,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Post profiler stop callback is being invoked`);break;case Hr.PostTimedStartProfilerStartCallbackInvoked:l.sendTraceTag(543477921,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Post timed profiler start callback invoked`);break;case Hr.ProfilingIntervalIsUndefined:l.sendTraceTag(543477922,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Profiling interval is expected to be defined for timed profiler`);break;case Hr.TimerJobToStopProfilerSet:l.sendTraceTag(543477923,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A timer job to stop the profiler is created`);break;case Hr.TimedProfilerStopCallbackInvoked:l.sendTraceTag(543477952,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Timed profiler is being stopped automatically`);break;case Hr.TimedProfilerIsBeingStoppedManually:l.sendTraceTag(543477953,d.msoulscat_Wac_Telemetry,c.Warning,`${r}: Timed profiler is being stopped manually`);break;case Hr.ProfilerStartPromiseCreated:l.sendTraceTag(543477954,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler start promise has been created`);break;case Hr.ProfilerStopGoingToBeInvoked:l.sendTraceTag(543477955,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A call to stop profiler is going to be invoked`);break;case Hr.SamplingIntervalUsedForStartingProfiler:l.sendTraceTag(543477956,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case Hr.MaxBufferSize:l.sendTraceTag(543477957,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case Hr.NoProfilerInstanceBuilt:l.sendTraceTag(543477958,d.msoulscat_Wac_Telemetry,c.Error,`${r}: No instance of a profiler was built. Missing implementation?`);break;case Hr.ProfilerInitOptionsValidationFailed:l.sendTraceTag(543477959,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ProfilerInitOptions validation failed`);break;case Hr.UnableToFixUpProfilerInitOptions:l.sendTraceTag(543477960,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to fixup profilerInitOptions`);break;case Hr.ProfilingIsNotEnabled:l.sendTraceTag(543477961,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling feature is not enabled`);break;case Hr.ProfilingIsNotSupportedEnvironment:l.sendTraceTag(543477962,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling is not supported in the environment`);break;case Hr.FeatureCheckerIsNullOrUndefined:l.sendTraceTag(543477963,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Feature checker is null or undefined`);break;case Hr.NullSupportedEnvironmentCheckerInvoked:l.sendTraceTag(543477964,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullSupportedEnvironmentChecker was invoked`);break;case Hr.NullJSCPUProfilerInitOptionsValidatorInvoked:l.sendTraceTag(543477965,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullJSCPUProfilerInitOptionsValidator was invoked`);break;case Hr.NullJSCPUProfilerFactoryInvoked:l.sendTraceTag(543477966,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullJSCPUProfilerFactory createProfiler was invoked`);break;case Hr.NullOrUndefinedIdleInterval:l.sendTraceTag(543477967,d.msoulscat_Wac_Telemetry,c.Error,`${r}: idleIntervalInMs is null or undefined. So killing the timer job`);break;case Hr.CreateProfilerDidNotSubscribeProfilerObserver:l.sendTraceTag(543477969,d.msoulscat_Wac_Telemetry,c.Error,`${r}: A profiler observer was never subscribed to the created profiler`);break;case Hr.NullOrUndefinedCustomPropertiesRetriever:l.sendTraceTag(543477972,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Custom Properties retriever is null or undefined`);break;case Hr.NullOrUndefinedCustomProperties:l.sendTraceTag(543477973,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Custom Properties is null or undefined`);break;case Hr.CustomPropertyKeyIsNull:l.sendTraceTag(543477974,d.msoulscat_Wac_Telemetry,c.Error,`${r}: A custom property key is null`);break;case Hr.CustomPropertyValueIsNull:l.sendTraceTag(543477975,d.msoulscat_Wac_Telemetry,c.Error,`${r}: A custom property value is null`);break;case Hr.RetrieveCallTreesCalledBeforeTransform:l.sendTraceTag(543477976,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Transform should be called before retrieveCallTrees`);break;case Hr.RetrieveBuiltCallTreesBeforeBuildCallTrees:l.sendTraceTag(543477977,d.msoulscat_Wac_Telemetry,c.Error,`${r}: BuildCallTrees should be called before retrieveBuiltCallTrees`);break;case Hr.RetrieveStacksCalledBeforeBuildStacks:l.sendTraceTag(543477978,d.msoulscat_Wac_Telemetry,c.Error,`${r}: BuildStacks should be called before retrieveStacks`);break;case Hr.ExecutionStacksNeverBuilt:l.sendTraceTag(543477979,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Execution stacks were not built. Instead an empty array of stacks will be returned`);break;case Hr.PeekOnNullExecutionStackInvoked:l.sendTraceTag(543477980,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Peek was invoked on Null ExecutionStack`);break;case Hr.PopOnNullExecutionStackInvoked:l.sendTraceTag(543477981,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Pop was invoked on Null ExecutionStack`);break;case Hr.EmptyStacks:l.sendTraceTag(543477982,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Stacks array is empty. No further processing can be performed.`);break;case Hr.EmptyFrames:l.sendTraceTag(543477983,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Frames array is empty. No further processing can be performed.`);break;case Hr.ForciblyExitingLoopWhileBuildingStack:l.sendTraceTag(543477984,d.msoulscat_Wac_Telemetry,c.Error,`${r}: While loop is being forcibly exited because of a runaway while loop `);break;case Hr.RetrieveStackCalledBeforeBuildStack:l.sendTraceTag(543477985,d.msoulscat_Wac_Telemetry,c.Error,`${r}: BuildStack should be called before RetrieveStack`);break;case Hr.ExecutionStackNeverBuilt:l.sendTraceTag(543477986,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Built execution stack is undefined. So null execution stack will be returned`);break;case Hr.ConvertStacksToCallTreesNeverCalled:l.sendTraceTag(543477987,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Convert stacks to call trees was not called before retrieve call trees. Empty call trees will be returned`);break;case Hr.ConvertStackToCallTreeNeverCalled:l.sendTraceTag(543478016,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Convert stack to call tree was not called before retrieve call tree. Null call tree will be returned`);break;case Hr.NullFrameNodeCreated:l.sendTraceTag(543478017,d.msoulscat_Wac_Telemetry,c.Info,`${r}: NullFrameNode created`);break;case Hr.InvalidSampleIndex:l.sendTraceTag(543478018,d.msoulscat_Wac_Telemetry,c.Error,`${r}: sampleIndex needs to be greater than zero for proper indexing`);break;case Hr.InvalidFrameNodeStartTime:l.sendTraceTag(543478019,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid frame node starting time`);break;case Hr.InvalidFrameNodeExecutionTime:l.sendTraceTag(543478020,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid frame node execution time`);break;case Hr.InvalidNewFrameNodeExecutionTime:l.sendTraceTag(543478021,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid new frame node execution time`);break;case Hr.NegativeSubTreeExecutionTime:l.sendTraceTag(543478022,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Negative sub tree execution time`);break;case Hr.FixerForProfilerType:l.sendTraceTag(543478023,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case Hr.MissingProfilerInitOptionsFixerImplementation:l.sendTraceTag(543478024,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Missing profiler init options fixer for unknown profiler type`);break;case Hr.LoopBackFixerFixProfilerInitOptionsInvoked:l.sendTraceTag(543478025,d.msoulscat_Wac_Telemetry,c.Error,`${r}: LoopBackFixer fixProfilerInitOptions was invoked`);break;case Hr.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked:l.sendTraceTag(543478026,d.msoulscat_Wac_Telemetry,c.Error,`${r}: LoopBackFixer retrieveFixedProfilerInitOptions was invoked`);break;case Hr.MissingDeObfuscationEndpoint:l.sendTraceTag(543478027,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined deObfuscation endpoint was provided`);break;case Hr.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling:l.sendTraceTag(543478028,d.msoulscat_Wac_Telemetry,c.Info,`${r}: The profile was captured in a hidden document. So, we are not processing it`);break;case Hr.NullCallTreeDepthFirstIteratorInvoked:l.sendTraceTag(543478029,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null getDepthFirstIterator was invoked`);break;case Hr.EmptySamplesArrayPassedToFilter:l.sendTraceTag(543478030,d.msoulscat_Wac_Telemetry,c.Error,`${r}: In order to properly filter out samples we need at least one sample`);break;case Hr.NullCallTreeLeftMostNodesIteratorInvoked:l.sendTraceTag(543478031,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null iterator was returned back to iterate over left most nodes`);break;case Hr.NullCallTreeRightMostNodesIteratorInvoked:l.sendTraceTag(543478032,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null iterator was returned back to iterate over right most nodes`);break;case Hr.MissingIsProfilingEnabledOnFeatureChecker:l.sendTraceTag(543478033,d.msoulscat_Wac_Telemetry,c.Error,`${r}: isProfilingEnabled is missing in FeatureChecker`);break;case Hr.FeatureCheckerIsProfilingEnabledNotAFunction:l.sendTraceTag(543478034,d.msoulscat_Wac_Telemetry,c.Error,`${r}: isProfilingEnabled on FeatureChecker is not a function`);break;case Hr.NullCallTreeGetTotalExecutionTimeInvoked:l.sendTraceTag(543478035,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTree getTotalExecutionTimeInMs was invoked`);break;case Hr.NullCallTreeGetCustomPropertiesInvoked:l.sendTraceTag(543478036,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTree getCustomProperties was invoked`);break;case Hr.SerializedCallTrees:l.sendTraceTag(543478037,d.msoulscat_Wac_Telemetry,c.Info,`${e.message}`);break;case Hr.NullCallTreeIteratorImplGetNextInvoked:l.sendTraceTag(543478038,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTreeIterator getNext was invoked`);break;case Hr.NullCallTreeIteratorImplHasMoreInvoked:l.sendTraceTag(543478039,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTreeIterator hasMore was invoked`);break;case Hr.MissingProfilerNameForProfilerType:l.sendTraceTag(543478040,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing profiler name for profiler type ${e.message}`);break;case Hr.ExpectedOnlyOneNodePerLevelInCallTree:l.sendTraceTag(543478041,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Expected to see only one node per level in the call tree`);break;case Hr.MissingWebWorkerSourceURL:l.sendTraceTag(543478042,d.msoulscat_Wac_Telemetry,c.Error,`${r}: In order to use the web worker to process the profile, a source URL needs to be passed into the worker. But the URL was not provided`);break;case Hr.MaxNumberOfProfilersAlreadyCreated:l.sendTraceTag(543478043,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Max number of profilers have already been created. Cannot create anymore`);break;case Hr.SamplingIntervalAboveMaxSamplingInterval:l.sendTraceTag(543478044,d.msoulscat_Wac_Telemetry,c.Error,`${r}: The sampling interval is above the maximum allowed sampling interval`);break;case Hr.WebWorkerAPINotAvailable:l.sendTraceTag(543478045,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web Worker API is not available. We will fallback to processing traces on the main event loop`);break;case Hr.UnableToBootWebWorker:l.sendTraceTag(543478046,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Attempted to start the web worker. But it failed for some reason`);break;case Hr.WorkerInstanceNotFound:l.sendTraceTag(543478047,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web worker instance was not found. Cannot perform any action`);break;case Hr.IdNotFoundInMessageToWorker:l.sendTraceTag(543478048,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Id was not found in the message sent to the worker`);break;case Hr.DataNotFoundInMessageToWorker:l.sendTraceTag(543478049,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Data was not found in the message sent to the worker`);break;case Hr.IdNotFoundInMessageFromWorker:l.sendTraceTag(543478050,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Id was not found in the message sent from the worker`);break;case Hr.DataNotFoundInMessageFromWorker:l.sendTraceTag(543478051,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Data was not found in the message sent from the worker`);break;case Hr.UnknownMessageFromWorker:l.sendTraceTag(543478080,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown message with message id - ${e.message} sent from the worker`);break;case Hr.ErrorFromWorker:l.sendTraceTag(540844827,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Error - ${e.message} sent from the worker`);break;case Hr.IdNotFoundInWorkerLogMessage:l.sendTraceTag(543478081,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Id is not present in the log message from the worker`);break;case Hr.MessageNotFoundInWorkerLogMessage:l.sendTraceTag(543478082,d.msoulscat_Wac_Telemetry,c.Error,`${r}: message is not present in the log message from the worker`);break;case Hr.UnknownLogMessageFromWorker:l.sendTraceTag(543478083,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown log message id - ${e.message} sent as part of the worker log message`);break;case Hr.Operation:l.sendTraceTag(543478084,d.msoulscat_Wac_Telemetry,e.message.didOperationFailUnexpectedly?c.Error:c.Info,`${r}: ${JSON.stringify({operationName:e.message.operationName,parentOperationName:e.message.parentOperationName,didOperationSucceed:e.message.didOperationSucceed,measuredRunTime:e.message.measuredRunTime,logs:e.message.logs,properties:e.message.propertyBag?Array.from(e.message.propertyBag):e.message.propertyBag,exception:e.message.exception})}`);break;case Hr.FallbackResultReturned:l.sendTraceTag(543478085,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Exception encountered. So, fallback result is being returned back`);break;case Hr.UnknownMessageToWorker:l.sendTraceTag(543478086,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown worker messageId ${e.message} encountered`);break;case Hr.ExceptionEncounteredInWorker:l.sendTraceTag(543478087,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ${JSON.stringify(e.message)}`);break;case Hr.MissingDeObfuscationInfoInTraceProcessingInfo:l.sendTraceTag(543478088,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing deObfuscationInfo in trace processing information`);break;case Hr.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo:l.sendTraceTag(543478089,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing shouldKeepSamplesOutsideOfProfilingInterval in trace processing information`);break;case Hr.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo:l.sendTraceTag(543478090,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing shouldRecordExpandedTimeStamps in trace processing information`);break;case Hr.MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo:l.sendTraceTag(543478091,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing callTreeFilteringThresholdInMs in trace processing information`);break;case Hr.InvalidMessageReceivedByWorker:l.sendTraceTag(543478092,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid message received by the worker. Returning without any processing`);break;case Hr.InvalidProcessTraceMessageReceivedByWorker:l.sendTraceTag(543478093,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid process trace message received by the worker. Returning without any processing`);break;case Hr.MissingTraceInTraceProcessingInfo:l.sendTraceTag(543478094,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing trace in trace processing information`);break;case Hr.SerializedCallTreesMissingInProcessorResult:l.sendTraceTag(543478095,d.msoulscat_Wac_Telemetry,c.Error,`${r}: serializedCallTrees is missing in the processor result`);break;case Hr.LogsMissingInProcessorResult:l.sendTraceTag(543478096,d.msoulscat_Wac_Telemetry,c.Error,`${r}: logs is missing in the processor result`);break;case Hr.UndefinedWebWorkerCompletionCallback:l.sendTraceTag(543478097,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Undefined completion callback for the processor result. The results will be ignored`);break;case Hr.LogsMissingInErrorsFromWebWorker:l.sendTraceTag(543478098,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker raised an error. But no logs can be found in the message that the worker sent over. This should not happen`);break;case Hr.UndefinedErrorCallback:l.sendTraceTag(543478099,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker raised an error. But the main thread has not provided a callback function to notify on error. So, ignoring the error`);break;case Hr.UndefinedTraceProcessingInfoToReturnBack:l.sendTraceTag(543478100,d.msoulscat_Wac_Telemetry,c.Error,`${r}: The worker ran into an error. But no trace processing info was found to return back to the caller`);break;case Hr.WebWorkerAlreadyStarted:l.sendTraceTag(543478101,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Attempting to start a web worker that has already been started`);break;case Hr.WebWorkerTerminated:l.sendTraceTag(540844828,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Web worker got terminated`);break;case Hr.WebWorkerErrorFallingBackToMainEventLoop:l.sendTraceTag(543478102,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Error encountered in the web worker. So falling back to processing the trace in the main event loop`);break;case Hr.CustomPropertiesMissingInTrace:l.sendTraceTag(543478103,d.msoulscat_Wac_Telemetry,c.Error,`${r}: CustomProperties was not found in the trace`);break;case Hr.ProfilerTraceMissingInTrace:l.sendTraceTag(543478104,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProfilerTrace was not found in the trace`);break;case Hr.ProfilerTraceStartTimestampMissingInTrace:l.sendTraceTag(543478105,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProfilerTraceStartTimestamp was not found in the trace`);break;case Hr.ProfilerPropertiesMissingInTrace:l.sendTraceTag(543478106,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProfilerProperties was not found in the trace`);break;case Hr.ElapsedProfilingTimeMissingInTrace:l.sendTraceTag(543478107,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ElapsedProfilingTime was not found in the trace`);break;case Hr.InvalidProfilerTraceToProcess:l.sendTraceTag(543478108,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid profiler trace to process. Returning back without processing`);break;case Hr.WebWorkerError:l.sendTraceTag(543478109,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ${e.message}`);break;case Hr.WebWorkerErrorCallbackNotRegistered:l.sendTraceTag(543478110,d.msoulscat_Wac_Telemetry,c.Error,`${r}: No error callback has been registered for the web worker. So ignoring the error message`);break;case Hr.WebWorkerTraceProcessingInfoMissingToReturnOnError:l.sendTraceTag(543478111,d.msoulscat_Wac_Telemetry,c.Error,`${r}: In order to reprocess the trace in the main event loop, trace processing info is required. But did not find any`);break;case Hr.ProfilerTrace:var t;const s=(null===(t=e.logOptions)||void 0===t?void 0:t.profilerTraceLoggingChunkSize)||30;let o=0;for(const t of mt(e.message.getResources(),s))l.sendTraceTag(543478112,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${o}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),resources:t})}`),o++;o=0;for(const t of mt(e.message.getFrames(),s))l.sendTraceTag(539784207,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${o}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),frames:t})}`),o++;o=0;for(const t of mt(e.message.getStacks(),s))l.sendTraceTag(539784208,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${o}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),stacks:t})}`),o++;o=0;for(const t of mt(e.message.getSamplesTrimmed(),s))l.sendTraceTag(539784209,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${o}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),samples:t})}`),o++;break;case Hr.MissingCallToFilterCallTrees:l.sendTraceTag(543478113,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing a call to filterCallTrees. Returning an empty array back`);break;case Hr.MissingCallToFilterFrames:l.sendTraceTag(543478114,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing a call to filterFrames. Returning NullCallTree back`);break;case Hr.NullCallTreeFramesFiltererFilterFramesInvoked:l.sendTraceTag(543478115,d.msoulscat_Wac_Telemetry,c.Error,`${r}: filterFrames invoked on NullCallTreeFilterFrames`);break;case Hr.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked:l.sendTraceTag(543478144,d.msoulscat_Wac_Telemetry,c.Error,`${r}: retrieveFilteredCallTree invoked on NullCallTreeFilterFrames`);break;case Hr.NullCallTreeGetFramesFiltererInvoked:l.sendTraceTag(543478145,d.msoulscat_Wac_Telemetry,c.Error,`${r}: getFramesFilterer invoked on NullCallTree`);break;case Hr.FilterFrameWithNoParent:l.sendTraceTag(543478146,d.msoulscat_Wac_Telemetry,c.Error,`${r}: CallTreeFramesFiltererImpl tries to filter node with no parent`);break;case Hr.OperationLogMessageFiltererInitOptions:l.sendTraceTag(542389340,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${JSON.stringify(e.message)}`);break;case Hr.NoCallTreesToSend:l.sendTraceTag(542229786,d.msoulscat_Wac_Telemetry,c.Info,`${r}: No call trees to send to server`);break;case Hr.NullOrUndefinedProfilerEvent:l.sendTraceTag(540624656,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler event sent to the profiler observer`);break;case Hr.UnknownProfilerEventId:l.sendTraceTag(540624657,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown profiler event ID ${e.message} sent to the profiler observer. Are you missing a case statement?`);break;case Hr.NullOrUndefinedProfilerTrace:l.sendTraceTag(540624658,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler trace sent to the observer. This message will be ignored`);break;case Hr.OperationLogMessageFilteringCriteriaMissingInTrace:l.sendTraceTag(540612253,d.msoulscat_Wac_Telemetry,c.Error,`${r}: OperationLogMessageFilteringCriteria is missing in trace`);break;case Hr.NullOrUndefinedProfilerObserverPassedInForSubscribe:l.sendTraceTag(540545986,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler observer passed in for subscribe`);break;case Hr.NullOrUndefinedProfilerEventIds:l.sendTraceTag(540545987,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler event ids`);break;case Hr.UnexpectedUndefinedProfilerEventIds:l.sendTraceTag(540545988,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unexpected undefined profiler event ids`);break;case Hr.NullOrUndefinedProfilerObserverPassedInForUnsubscribe:l.sendTraceTag(540393807,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler observer passed in for unsubscribe`);break;case Hr.NullOrUndefinedProfilerEventToUnsubscribe:l.sendTraceTag(540393808,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler event id passed for unsubscribe`);break;case Hr.ProfilerObserverWasNeverSubscribed:l.sendTraceTag(540393809,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Profiler observer does not have any subscriptions`);break;case Hr.UnexpectedNullOrUndefinedSubscribedProfilerEventIds:l.sendTraceTag(540393810,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Expected to receive a set of subscribed profiler event IDs. But unexpectedly received null/undefined`);break;case Hr.ProfilerObserverNeverSubscribedForProfilerEventId:l.sendTraceTag(540393811,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Profiler observer never subscribed for the event ${e.message} that it is requesting to unsubscribe from`);break;case Hr.NullOrUndefinedItemToSubscribe:l.sendTraceTag(509374879,d.msoulscat_Wac_Telemetry,c.Error,`${r}: null or undefined item tried to subscribe to an instance of profiler. type: ${e.message}`);break;case Hr.NullOrUndefinedItemForUnsubscribe:l.sendTraceTag(509374878,d.msoulscat_Wac_Telemetry,c.Error,`${r}: null or undefined item tried to unsubscribe from an instance of profiler. type: ${e.message}`);break;case Hr.ItemWasNeverSubscribed:l.sendTraceTag(509374877,d.msoulscat_Wac_Telemetry,c.Error,`${r}: trying to unsubscribe while item was never subscribed. type: ${e.message}`);break;case Hr.NumberOfCallTreesFiltererByCustomFilterers:l.sendTraceTag(509374876,d.msoulscat_Wac_Telemetry,c.Info,`${r}: applied custom filterer and removed: ${e.message.filteredCount} call trees out of ${e.message.totalCount}.`);break;case Hr.CallTreeCustomPropertiesRetrieversMissingInTrace:l.sendTraceTag(539797325,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Call Tree Custom Properties Retrievers missing in trace. Trace is invalid and web worker will return without processing`);break;case Hr.ProcessTraceParamsIsNullOrUndefined:l.sendTraceTag(539767647,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProcessTraceParams is null or undefined`);break;case Hr.CurrentTraceBeingProcessedNullOrUndefined:l.sendTraceTag(539767648,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Current trace being processed is null or undefined`);break;case Hr.TraceIdMissingInTrace:l.sendTraceTag(539767629,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Trace ID is missing in trace`);break;case Hr.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace:l.sendTraceTag(527247246,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetCustomProperties called on NullJSCPUProfilerTrace`);break;case Hr.GetFramesCalledOnNullJSCPUProfilerTrace:l.sendTraceTag(527247247,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetFrames called on NullJSCPUProfilerTrace`);break;case Hr.GetStacksCalledOnNullJSCPUProfilerTrace:l.sendTraceTag(527247248,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetStacks called on NullJSCPUProfilerTrace`);break;case Hr.GetSamplesCalledOnNullJSCPUProfilerTrace:l.sendTraceTag(527247249,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetSamples called on NullJSCPUProfilerTrace`);break;case Hr.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace:l.sendTraceTag(527247250,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetProfilerTraceStartTimestamp called on NullJSCPUProfilerTrace`);break;case Hr.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace:l.sendTraceTag(527247251,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetProfilerProperties called on NullJSCPUProfilerTrace`);break;case Hr.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace:l.sendTraceTag(527247252,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetElapsedProfilingTimeInMs called on NullJSCPUProfilerTrace`);break;case Hr.RemoveQueryParamsFromResourceURLsNeverCalled:l.sendTraceTag(527247253,d.msoulscat_Wac_Telemetry,c.Error,`${r}: removeQueryParamsFromResourceURLs was never called`);break;case Hr.SerializeCallTreeNeverCalled:l.sendTraceTag(506590178,d.msoulscat_Wac_Telemetry,c.Error,`${r}: serializeCallTree should be called before attempting to retrieve the call tree. Returning undefined`);break;case Hr.ConvertToJSONStringWasNeverCalled:l.sendTraceTag(506587295,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;default:l.sendTraceTag(543478147,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown LogId. Please add a case for ${e.id}`)}}constructor(e){this.shouldTransportLogs=e}}class ht{processLogMessage(e){this.shouldFilterLogMessage(e)||this.logMessageTransporters.forEach((r=>{r.transportLogMessage(e)}))}subscribeFilterer(e){this.logMessageFilterers.push(e)}subscribeTransporter(e){this.logMessageTransporters.push(e)}shouldFilterLogMessage(e){for(const r of this.logMessageFilterers)if(r.shouldFilterLogMessage(e))return!0;return!1}constructor(){this.logMessageFilterers=[],this.logMessageTransporters=[]}}class Tt extends ht{processLogMessage(e){this.storedLogMessages.queue(e),this.storedLogMessages.length()>10&&this.logMessageTransporters.length>0&&!this.idleTimeJobScheduled&&(this.idleTimeJobScheduled=!0,this.transportLogsInIdleTime())}getNextLogMessageToTransport(){let e=this.storedLogMessages.peek();for(;void 0!==e&&this.shouldFilterLogMessage(e);)this.storedLogMessages.dequeue(),e=this.storedLogMessages.peek();return void 0!==e&&this.storedLogMessages.dequeue(),e}transportLogsInIdleTime(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});this.idleTimeJobScheduler.scheduleJobForIdleTime((()=>{f.startNew("TransportLogMessagesInIdleTime",(e=>{let r=this.getNextLogMessageToTransport(),t=0;for(;void 0!==r&&t<50;)this.logMessageTransporters.forEach((e=>{void 0!==r&&e.transportLogMessage(r)})),t+=1,r=this.getNextLogMessageToTransport(),e.addProperty("NumberOfLogMessagesTransported",t);return this.idleTimeJobScheduled=!1,P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),e,this.logger)}))}getAllStoredLogMessages(){return this.storedLogMessages}constructor(e,r){super(),this.idleTimeJobScheduler=e,this.logger=r,this.storedLogMessages=V.createQueue(),this.idleTimeJobScheduled=!1}}class ft{retrievePackageV2(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});return f.startNew("RetrieveCPUProfilingPackageV2",(r=>{if(null==e)return P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});if(null==e.ulsInstance)return P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});if(n(e.ulsInstance),null==e.deObfuscationEndpoint)return this.logger.logMissingDeObfuscationEndpoint(),P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});if(null==e.useMainEventLoopForProfilerTraceProcessing&&(e.useMainEventLoopForProfilerTraceProcessing=ye),r.addProperty("UseMainEventLoopForProfilerTraceProcessing",e.useMainEventLoopForProfilerTraceProcessing),!e.useMainEventLoopForProfilerTraceProcessing&&null==e.profilerTraceProcessingWebWorkerSourceURL)return this.logger.logMissingWebWorkerSourceURL(),P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});null==e.callTreeFilteringThresholdInMs&&(e.callTreeFilteringThresholdInMs=50),r.addProperty("CallTreeFilteringThresholdInMs",e.callTreeFilteringThresholdInMs),null==e.shouldProfilingStartInAHiddenDocument&&(e.shouldProfilingStartInAHiddenDocument=be),r.addProperty("ShouldProfilingStartInAHiddenDocument",e.shouldProfilingStartInAHiddenDocument),null==e.shouldProcessProfileCapturedInAHiddenDocument&&(e.shouldProcessProfileCapturedInAHiddenDocument=ke),r.addProperty("ShouldProcessProfileCapturedInAHiddenDocument",e.shouldProcessProfileCapturedInAHiddenDocument),null==e.shouldKeepSamplesOutsideOfProfilingInterval&&(e.shouldKeepSamplesOutsideOfProfilingInterval=Ne),r.addProperty("ShouldKeepSamplesOutsideOfProfilingInterval",e.shouldKeepSamplesOutsideOfProfilingInterval),null==e.shouldRecordExpandedTimeStamps&&(e.shouldRecordExpandedTimeStamps=xe),r.addProperty("ShouldRecordExpandedTimeStamps",e.shouldRecordExpandedTimeStamps),null==e.shouldSendAllCallTreesFromProfileInASingleRequest&&(e.shouldSendAllCallTreesFromProfileInASingleRequest=Re),r.addProperty("ShouldSendAllCallTreesFromProfileInASingleRequest",e.shouldSendAllCallTreesFromProfileInASingleRequest),null==e.frameTotalExecutionTimeFilteringThresholdInMs&&(e.frameTotalExecutionTimeFilteringThresholdInMs=0),r.addProperty("FrameTotalExecutionTimeFilteringThresholdInMs",e.frameTotalExecutionTimeFilteringThresholdInMs),null==e.shouldAlwaysLogOperationsData&&(e.shouldAlwaysLogOperationsData=Fe),r.addProperty("ShouldAlwaysLogOperationsData",e.shouldAlwaysLogOperationsData),null==e.durationThresholdInMsToLogOperationData&&(e.durationThresholdInMsToLogOperationData=50),r.addProperty("DurationThresholdInMsToLogOperationData",e.durationThresholdInMsToLogOperationData),null==e.shouldUseInMemoryLogger&&(e.shouldUseInMemoryLogger=!1),r.addProperty("ShouldUseInMemoryLogger",e.shouldUseInMemoryLogger),null==e.shouldTransportLogs&&(e.shouldTransportLogs=!0),r.addProperty("ShouldTransportLogs",e.shouldTransportLogs),this.logMessageTransporter=new pt(e.shouldTransportLogs),e.shouldUseInMemoryLogger||(this.logger.unsubscribe(this.logMessageProcessor),this.logMessageProcessor=new ht,this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)),null==e.shouldSendProfilesForDeobfuscationImmediately&&(e.shouldSendProfilesForDeobfuscationImmediately=We),r.addProperty("ShouldSendProfilesForDeobfuscationImmediately",e.shouldSendProfilesForDeobfuscationImmediately),null==e.shouldProcessProfileCapturedWhileUserIsIdle&&(e.shouldProcessProfileCapturedWhileUserIsIdle=_e),r.addProperty("ShouldProcessProfileCapturedWhileUserIsIdle",e.shouldProcessProfileCapturedWhileUserIsIdle),null==e.shouldKeepQueryParamsInResourceURLs&&(e.shouldKeepQueryParamsInResourceURLs=we),r.addProperty("ShouldKeepQueryParamsInResourceURLs",e.shouldKeepQueryParamsInResourceURLs),null==e.shouldMakeSerializedCallTreesFullyReconstructible&&(e.shouldMakeSerializedCallTreesFullyReconstructible=Ue),r.addProperty("ShouldMakeSerializedCallTreesFullyReconstructible",e.shouldMakeSerializedCallTreesFullyReconstructible),null==e.shouldSkipSupportedOSCheck&&(e.shouldSkipSupportedOSCheck=!1),r.addProperty("ShouldSkipSupportedOSCheck",e.shouldSkipSupportedOSCheck);const t=new ut(e.shouldAlwaysLogOperationsData,he,e.durationThresholdInMsToLogOperationData,this.logger);return this.logMessageProcessor.subscribeFilterer(t),P.generateOperationResult({didOperationSucceed:!0,result:new dt(e.featureChecker,e,this.logMessageProcessor,this.logger)})}),r,this.logger).getResult()}retrievePackage(e,r){const t=P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});return f.startNew("RetrieveCPUProfilingPackage",(t=>{if(null==r)return P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});if(null==r.ulsInstance)return P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});if(n(r.ulsInstance),null==r.deObfuscationEndpoint)return this.logger.logMissingDeObfuscationEndpoint(),P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});if(null==r.useMainEventLoopForProfilerTraceProcessing&&(r.useMainEventLoopForProfilerTraceProcessing=ye),t.addProperty("UseMainEventLoopForProfilerTraceProcessing",r.useMainEventLoopForProfilerTraceProcessing),!r.useMainEventLoopForProfilerTraceProcessing&&null==r.profilerTraceProcessingWebWorkerSourceURL)return this.logger.logMissingWebWorkerSourceURL(),P.generateOperationResult({didOperationSucceed:!1,result:new ct(this.logger)});null==r.callTreeFilteringThresholdInMs&&(r.callTreeFilteringThresholdInMs=50),null==r.shouldProfilingStartInAHiddenDocument&&(r.shouldProfilingStartInAHiddenDocument=be),null==r.shouldProcessProfileCapturedInAHiddenDocument&&(r.shouldProcessProfileCapturedInAHiddenDocument=ke),null==r.shouldKeepSamplesOutsideOfProfilingInterval&&(r.shouldKeepSamplesOutsideOfProfilingInterval=Ne),null==r.shouldRecordExpandedTimeStamps&&(r.shouldRecordExpandedTimeStamps=xe),null==r.shouldSendAllCallTreesFromProfileInASingleRequest&&(r.shouldSendAllCallTreesFromProfileInASingleRequest=Re),null==r.frameTotalExecutionTimeFilteringThresholdInMs&&(r.frameTotalExecutionTimeFilteringThresholdInMs=0),null==r.shouldAlwaysLogOperationsData&&(r.shouldAlwaysLogOperationsData=Fe),null==r.durationThresholdInMsToLogOperationData&&(r.durationThresholdInMsToLogOperationData=50),null==r.shouldUseInMemoryLogger&&(r.shouldUseInMemoryLogger=!1),r.shouldUseInMemoryLogger||(this.logger.unsubscribe(this.logMessageProcessor),this.logMessageProcessor=new ht,this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)),null==r.shouldSendProfilesForDeobfuscationImmediately&&(r.shouldSendProfilesForDeobfuscationImmediately=We),null==r.shouldProcessProfileCapturedWhileUserIsIdle&&(r.shouldProcessProfileCapturedWhileUserIsIdle=_e),null==r.shouldKeepQueryParamsInResourceURLs&&(r.shouldKeepQueryParamsInResourceURLs=we),null==r.shouldMakeSerializedCallTreesFullyReconstructible&&(r.shouldMakeSerializedCallTreesFullyReconstructible=Ue);const s=new ut(r.shouldAlwaysLogOperationsData,he,r.durationThresholdInMsToLogOperationData,this.logger);return this.logMessageProcessor.subscribeFilterer(s),t.addProperty("DeObfuscationEndpoint",r.deObfuscationEndpoint),t.addProperty("CallTreeFilteringThresholdInMs",r.callTreeFilteringThresholdInMs),t.addProperty("ShouldProfilingStartInAHiddenDocument",r.shouldProfilingStartInAHiddenDocument),t.addProperty("ShouldProcessProfileCapturedInAHiddenDocument",r.shouldProcessProfileCapturedInAHiddenDocument),t.addProperty("ShouldKeepSamplesOutsideOfProfilingInterval",r.shouldKeepSamplesOutsideOfProfilingInterval),t.addProperty("ShouldRecordExpandedTimeStamps",r.shouldRecordExpandedTimeStamps),t.addProperty("WebWorkerSourceURL",r.profilerTraceProcessingWebWorkerSourceURL),t.addProperty("ShouldSendAllCallTreesFromProfileInASingleRequest",r.shouldSendAllCallTreesFromProfileInASingleRequest),t.addProperty("FrameTotalExecutionTimeFilteringThresholdInMs",r.frameTotalExecutionTimeFilteringThresholdInMs),t.addProperty("ShouldAlwaysLogOperationsData",r.shouldAlwaysLogOperationsData),t.addProperty("DurationThresholdToLogOperationData",r.durationThresholdInMsToLogOperationData),t.addProperty("ShouldUseInMemoryLogger",r.shouldUseInMemoryLogger),t.addProperty("ShouldKeepQueryParamsInResourceURLs",r.shouldKeepQueryParamsInResourceURLs),t.addProperty("ShouldMakeSerializedCallTreesFullyReconstructible",r.shouldMakeSerializedCallTreesFullyReconstructible),P.generateOperationResult({didOperationSucceed:!0,result:new dt(e,r,this.logMessageProcessor,this.logger)})}),t,this.logger).getResult()}constructor(){this.logger=new gt(Qr.MainEventLoop);const e=F.getIdleTimeJobScheduler();this.logMessageProcessor=new Tt(e,this.logger),this.logMessageTransporter=new pt(!0),this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)}}function Pt(){return new ft}officeOnlineCpuProfiling=r}();